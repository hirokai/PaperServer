/* w2ui 1.1 (c) http://w2ui.com, vitmalina@gmail.com */
var w2ui=w2ui||{},w2utils=function(){function b(a){var b=/^[-]?[0-9]+$/;return b.test(a)}function c(a){var b=/^[-]?[0-9]*[\.]?[0-9]+$/;return b.test(a)}function d(a){var b=/^[\$\\u20ac\\u00a3\\u00a5]?[-]?[0-9]*[\.]?[0-9]+$/;return b.test(a)}function e(a){var b=/^[a-fA-F0-9]+$/;return b.test(a)}function f(a){var b=/^[a-zA-Z0-9_-]+$/;return b.test(a)}function g(a){var b=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,4}$/;return b.test(a)}function h(a){if(a===void 0||null==a)return!1;if(3!=a.split("/").length)return!1;var b=a.split("/")[0],c=a.split("/")[1],d=a.split("/")[2],e=new Date(d,b-1,c);return e.getMonth()+1!=b||e.getDate()!=c||e.getFullYear()!=d?!1:!0}function i(a){if("undefined"==a+"")return!1;var b;a=a.toUpperCase(),b=a.indexOf("PM")>=0||a.indexOf("AM")>=0?12:23,a=$.trim(a.replace("AM","")),a=$.trim(a.replace("PM",""));var c=a.split(":");return 2!=c.length?!1:""==c[0]||0>parseInt(c[0])||parseInt(c[0])>b||!this.isInt(c[0])?!1:""==c[1]||0>parseInt(c[1])||parseInt(c[1])>59||!this.isInt(c[1])?!1:!0}function j(a,b){var c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],d=["January","February","March","April","May","June","July","August","September","October","November","December"];if(b===void 0&&(b=this.settings.date_format),a===void 0||""==a||null==a)return"";var e=new Date(a);w2utils.isInt(a)&&(e=new Date(Number(a)));var f=(a+"").split("-");3==f.length&&(e=new Date(f[0],Number(f[1])-1,f[2]));var f=(a+"").split("/");if(3==f.length&&(e=new Date(f[2],Number(f[0])-1,f[1])),"Invalid Date"==e)return"";var g=e.getFullYear(),h=e.getMonth(),i=e.getDate(),j=b.toLowerCase().replace("yyyy",g).replace("mm",h+1).replace("dd",i).replace("mon",c[h]).replace("month",d[h]);return j}function k(a){var b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];if(""==a||a===void 0||null==a)return"";w2utils.isInt(a)&&(a=Number(a));var c=new Date(a);w2utils.isInt(a)&&(c=new Date(Number(a)));var d=(a+"").split("-");3==d.length&&(c=new Date(d[0],Number(d[1])-1,d[2]));var d=(a+"").split("/");if(3==d.length&&(c=new Date(d[2],Number(d[0])-1,d[1])),"Invalid Date"==c)return"";var e=new Date,f=new Date;f.setTime(f.getTime()-864e5);var g=b[c.getMonth()]+" "+c.getDate()+", "+c.getFullYear(),h=b[e.getMonth()]+" "+e.getDate()+", "+e.getFullYear(),i=b[f.getMonth()]+" "+f.getDate()+", "+f.getFullYear(),j=c.getHours()-(c.getHours()>12?12:0)+":"+(10>c.getMinutes()?"0":"")+c.getMinutes()+" "+(c.getHours()>=12?"pm":"am"),k=c.getHours()-(c.getHours()>12?12:0)+":"+(10>c.getMinutes()?"0":"")+c.getMinutes()+":"+(10>c.getSeconds()?"0":"")+c.getSeconds()+" "+(c.getHours()>=12?"pm":"am"),l=g;return g==h&&(l=j),g==i&&(l="Yesterday"),'<span title="'+g+" "+k+'">'+l+"</span>"}function l(a){if(""==a||a===void 0||null==a)return"";w2utils.isInt(a)&&(a=Number(a));var b=new Date(a);w2utils.isInt(a)&&(b=new Date(Number(a)));var c=(a+"").split("-");3==c.length&&(b=new Date(c[0],Number(c[1])-1,c[2]));var c=(a+"").split("/");if(3==c.length&&(b=new Date(c[2],Number(c[0])-1,c[1])),"Invalid Time"==b)return"";var d=new Date,e=(d.getTime()-b.getTime())/1e3,f="",g="";return 60>e?(f=Math.floor(e),g="sec"):3600>e?(f=Math.floor(e/60),g="min"):86400>e?(f=Math.floor(e/60/60),g="hour"):2592e3>e?(f=Math.floor(e/24/60/60),g="day"):31104e3>e?(f=Math.floor(e/30/24/60/60),g="month"):e>=31104e3&&(f=Math.floor(e/12/30/24/60/60),g="year"),f+" "+g+(f>1?"s":"")}function m(a){if(null==a)return a;switch(typeof a){case"number":break;case"string":a=$.trim((a+"").replace(/(<([^>]+)>)/gi,""));break;case"object":for(var b in a)a[b]=this.stripTags(a[b])}return a}function n(a){if(null==a)return a;switch(typeof a){case"number":break;case"string":a=(a+"").replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;");break;case"object":for(var b in a)a[b]=this.encodeTags(a[b])}return a}function o(a){function l(a){for(var a=a.replace(/\r\n/g,"\n"),b="",c=0;a.length>c;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(192|d>>6),b+=String.fromCharCode(128|63&d)):(b+=String.fromCharCode(224|d>>12),b+=String.fromCharCode(128|63&d>>6),b+=String.fromCharCode(128|63&d))}return b}var c,d,e,f,g,h,i,b="",j=0,k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";for(a=l(a);a.length>j;)c=a.charCodeAt(j++),d=a.charCodeAt(j++),e=a.charCodeAt(j++),f=c>>2,g=(3&c)<<4|d>>4,h=(15&d)<<2|e>>6,i=63&e,isNaN(d)?h=i=64:isNaN(e)&&(i=64),b=b+k.charAt(f)+k.charAt(g)+k.charAt(h)+k.charAt(i);return b}function p(a){function l(a){for(var b="",c=0,d=c1=c2=0;a.length>c;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),c++):d>191&&224>d?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&c2),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&c2)<<6|63&c3),c+=3);return b}var c,d,e,f,g,h,i,b="",j=0,k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");a.length>j;)f=k.indexOf(a.charAt(j++)),g=k.indexOf(a.charAt(j++)),h=k.indexOf(a.charAt(j++)),i=k.indexOf(a.charAt(j++)),c=f<<2|g>>4,d=(15&g)<<4|h>>2,e=(3&h)<<6|i,b+=String.fromCharCode(c),64!=h&&(b+=String.fromCharCode(d)),64!=i&&(b+=String.fromCharCode(e));return b=l(b)}function q(a,b,c,d){function h(a,b,c){return $.browser.webkit||void 0===c||(b=c),";"+a+": "+b+"; -webkit-"+a+": "+b+"; -moz-"+a+": "+b+"; "+"-ms-"+a+": "+b+"; -o-"+a+": "+b+";"}var e=$(a).width(),f=$(a).height(),g=.5;if(!a||!b)return $.error("Cannot do transition when one of the divs is null"),void 0;switch(a.parentNode.style.cssText+=h("perspective","700px")+"; overflow: hidden;",a.style.cssText+="; position: absolute; z-index: 1019; "+h("backface-visibility","hidden"),b.style.cssText+="; position: absolute; z-index: 1020; "+h("backface-visibility","hidden"),c){case"slide-left":a.style.cssText+="overflow: hidden; "+h("transform","translate3d(0, 0, 0)","translate(0, 0)"),b.style.cssText+="overflow: hidden; "+h("transform","translate3d("+e+"px, 0, 0)","translate("+e+"px, 0)"),$(b).show(),window.setTimeout(function(){b.style.cssText+=h("transition",g+"s")+";"+h("transform","translate3d(0, 0, 0)","translate(0, 0)"),a.style.cssText+=h("transition",g+"s")+";"+h("transform","translate3d(-"+e+"px, 0, 0)","translate(-"+e+"px, 0)")},1);break;case"slide-right":a.style.cssText+="overflow: hidden; "+h("transform","translate3d(0, 0, 0)","translate(0, 0)"),b.style.cssText+="overflow: hidden; "+h("transform","translate3d(-"+e+"px, 0, 0)","translate(-"+e+"px, 0)"),$(b).show(),window.setTimeout(function(){b.style.cssText+=h("transition",g+"s")+"; "+h("transform","translate3d(0px, 0, 0)","translate(0px, 0)"),a.style.cssText+=h("transition",g+"s")+"; "+h("transform","translate3d("+e+"px, 0, 0)","translate("+e+"px, 0)")},1);break;case"slide-down":a.style.cssText+="overflow: hidden; z-index: 1; "+h("transform","translate3d(0, 0, 0)","translate(0, 0)"),b.style.cssText+="overflow: hidden; z-index: 0; "+h("transform","translate3d(0, 0, 0)","translate(0, 0)"),$(b).show(),window.setTimeout(function(){b.style.cssText+=h("transition",g+"s")+"; "+h("transform","translate3d(0, 0, 0)","translate(0, 0)"),a.style.cssText+=h("transition",g+"s")+"; "+h("transform","translate3d(0, "+f+"px, 0)","translate(0, "+f+"px)")},1);break;case"slide-up":a.style.cssText+="overflow: hidden; "+h("transform","translate3d(0, 0, 0)","translate(0, 0)"),b.style.cssText+="overflow: hidden; "+h("transform","translate3d(0, "+f+"px, 0)","translate(0, "+f+"px)"),$(b).show(),window.setTimeout(function(){b.style.cssText+=h("transition",g+"s")+"; "+h("transform","translate3d(0, 0, 0)","translate(0, 0)"),a.style.cssText+=h("transition",g+"s")+"; "+h("transform","translate3d(0, 0, 0)","translate(0, 0)")},1);break;case"flip-left":a.style.cssText+="overflow: hidden; "+h("-transform","rotateY(0deg)"),b.style.cssText+="overflow: hidden; "+h("transform","rotateY(-180deg)"),$(b).show(),window.setTimeout(function(){b.style.cssText+=h("transition",g+"s")+"; "+h("transform","rotateY(0deg)"),a.style.cssText+=h("transition",g+"s")+"; "+h("transform","rotateY(180deg)")},1);break;case"flip-right":a.style.cssText+="overflow: hidden; "+h("transform","rotateY(0deg)"),b.style.cssText+="overflow: hidden; "+h("transform","rotateY(180deg)"),$(b).show(),window.setTimeout(function(){b.style.cssText+=h("transition",g+"s")+"; "+h("transform","rotateY(0deg)"),a.style.cssText+=h("transition",g+"s")+"; "+h("transform","rotateY(-180deg)")},1);break;case"flip-down":a.style.cssText+="overflow: hidden; "+h("transform","rotateX(0deg)"),b.style.cssText+="overflow: hidden; "+h("transform","rotateX(180deg)"),$(b).show(),window.setTimeout(function(){b.style.cssText+=h("transition",g+"s")+"; "+h("transform","rotateX(0deg)"),a.style.cssText+=h("transition",g+"s")+"; "+h("transform","rotateX(-180deg)")},1);break;case"flip-up":a.style.cssText+="overflow: hidden; "+h("transform","rotateX(0deg)"),b.style.cssText+="overflow: hidden; "+h("transform","rotateX(-180deg)"),$(b).show(),window.setTimeout(function(){b.style.cssText+=h("transition",g+"s")+"; "+h("transform","rotateX(0deg)"),a.style.cssText+=h("transition",g+"s")+"; "+h("transform","rotateX(180deg)")},1);break;case"pop-in":a.style.cssText+="overflow: hidden; "+h("transform","translate3d(0, 0, 0)","translate(0, 0)"),b.style.cssText+="overflow: hidden; "+h("transform","translate3d(0, 0, 0)","translate(0, 0)")+"; "+h("transform","scale(.8)")+"; opacity: 0;",$(b).show(),window.setTimeout(function(){b.style.cssText+=h("transition",g+"s")+"; "+h("transform","scale(1)")+"; opacity: 1;",a.style.cssText+=h("transition",g+"s")+";"},1);break;case"pop-out":a.style.cssText+="overflow: hidden; "+h("transform","translate3d(0, 0, 0)","translate(0, 0)")+"; "+h("transform","scale(1)")+"; opacity: 1;",b.style.cssText+="overflow: hidden; "+h("transform","translate3d(0, 0, 0)","translate(0, 0)")+"; opacity: 0;",$(b).show(),window.setTimeout(function(){b.style.cssText+=h("transition",g+"s")+"; opacity: 1;",a.style.cssText+=h("transition",g+"s")+"; "+h("transform","scale(1.7)")+"; opacity: 0;"},1);break;default:a.style.cssText+="overflow: hidden; "+h("transform","translate3d(0, 0, 0)","translate(0, 0)"),b.style.cssText+="overflow: hidden; "+h("transform","translate3d(0, 0, 0)","translate(0, 0)")+"; opacity: 0;",$(b).show(),window.setTimeout(function(){b.style.cssText+=h("transition",g+"s")+"; opacity: 1;",a.style.cssText+=h("transition",g+"s")},1)}setTimeout(function(){"slide-down"==c&&($(a).css("z-index","1019"),$(b).css("z-index","1020")),b&&$(b).css({opacity:"1","-webkit-transition":"","-moz-transition":"","-ms-transition":"","-o-transition":"","-webkit-transform":"","-moz-transform":"","-ms-transform":"","-o-transform":"","-webkit-backface-visibility":"","-moz-backface-visibility":"","-ms-backface-visibility":"","-o-backface-visibility":""}),a&&($(a).css({opacity:"1","-webkit-transition":"","-moz-transition":"","-ms-transition":"","-o-transition":"","-webkit-transform":"","-moz-transform":"","-ms-transform":"","-o-transform":"","-webkit-backface-visibility":"","-moz-backface-visibility":"","-ms-backface-visibility":"","-o-backface-visibility":""}),a.parentNode&&$(a.parentNode).css({"-webkit-perspective":"","-moz-perspective":"","-ms-perspective":"","-o-perspective":""})),"function"==typeof d&&d()},1e3*g)}function r(a,b){var c={left:parseInt($(a).css("border-left-width"))||0,right:parseInt($(a).css("border-right-width"))||0,top:parseInt($(a).css("border-top-width"))||0,bottom:parseInt($(a).css("border-bottom-width"))||0},d={left:parseInt($(a).css("margin-left"))||0,right:parseInt($(a).css("margin-right"))||0,top:parseInt($(a).css("margin-top"))||0,bottom:parseInt($(a).css("margin-bottom"))||0},e={left:parseInt($(a).css("padding-left"))||0,right:parseInt($(a).css("padding-right"))||0,top:parseInt($(a).css("padding-top"))||0,bottom:parseInt($(a).css("padding-bottom"))||0};switch(b){case"top":return c.top+d.top+e.top;case"bottom":return c.bottom+d.bottom+e.bottom;case"left":return c.left+d.left+e.left;case"right":return c.right+d.right+e.right;case"width":return c.left+d.left+c.right+d.right+e.right+e.right+parseInt($(a).width());case"height":return c.top+d.top+c.bottom+d.bottom+e.bottom+e.bottom+parseInt($(a).height());case"+width":return c.left+d.left+c.right+d.right+e.right+e.right;case"+height":return c.top+d.top+c.bottom+d.bottom+e.bottom+e.bottom}}var a={settings:{date_format:"Mon dd, yyyy",time_format:"hh:mi pm"},isInt:b,isFloat:c,isMoney:d,isHex:e,isAlphaNumeric:f,isEmail:g,isDate:h,isTime:i,age:l,formatDate:j,date:k,stripTags:m,encodeTags:n,base64encode:o,base64decode:p,transition:q,getSize:r};return a}();$.w2event={on:function(a,b){return $.isPlainObject(a)||(a={type:a}),a=$.extend({type:null,execute:"before",target:null,onComplete:null},a),a.type===void 0?($.error("You must specify event type when calling .on() method of "+this.name),void 0):b===void 0?($.error("You must specify event handler function when calling .on() method of "+this.name),void 0):(this.handlers.push({event:a,handler:b}),void 0)},off:function(a,b){if($.isPlainObject(a)||(a={type:a}),a=$.extend({},{type:null,execute:"before",target:null,onComleted:null},a),a.type===void 0)return $.error("You must specify event type when calling .off() method of "+this.name),void 0;b===void 0&&(b=null);var c=[];for(var d in this.handlers){var e=this.handlers[d];(e.event.type!=a.type&&"*"!=a.type||e.event.target!=a.target&&null!=a.target||e.handler!=b&&null!=b)&&c.push(e)}this.handlers=c},trigger:function(a){var a=$.extend({type:null,phase:"before",target:null,stop:!1},a);a.target===void 0&&(a.target=null);for(var b=this.handlers.length-1;b>=0;b--){var c=this.handlers[b];if(!(c.event.type!=a.type&&"*"!=c.event.type||c.event.target!=a.target&&null!=c.event.target||c.event.execute!=a.phase&&"*"!=c.event.execute&&"*"!=c.event.phase)){var d=c.handler.call(this,a.target,a);if($.isPlainObject(d)&&($.extend(a,d),a.stop===!0))return a}}if("before"==a.phase&&"function"==typeof this["on"+a.type.substr(0,1).toUpperCase()+a.type.substr(1)]){var d=this["on"+a.type.substr(0,1).toUpperCase()+a.type.substr(1)].call(this,a.target,a);if($.isPlainObject(d)&&($.extend(a,d),a.stop===!0))return a}if(a.object!==void 0&&null!=a.object&&"before"==a.phase&&"function"==typeof a.object["on"+a.type.substr(0,1).toUpperCase()+a.type.substr(1)]){var d=a.object["on"+a.type.substr(0,1).toUpperCase()+a.type.substr(1)].call(this,a.target,a);if($.isPlainObject(d)&&($.extend(a,d),a.stop===!0))return a}return"after"==a.phase&&null!=a.onComplete&&a.onComplete.call(this,a),a}},function(){$.fn.w2render=function(a){$(this).length>0&&("string"==typeof a&&w2ui[a]&&w2ui[a].render($(this)[0]),"object"==typeof a&&a.render($(this)[0]))},$.fn.w2destroy=function(a){"string"==typeof a&&w2ui[a]&&w2ui[a].destroy(),"object"==typeof a&&a.destroy()},$.fn.w2lite=function(){},$.fn.w2tag=function(a,b){return $.isPlainObject(b)||(b={}),$.isPlainObject(b.css)||(b.css={}),b["class"]===void 0&&(b["class"]=""),0==$(this).length?($(".global-tag").each(function(a,b){$("#"+$(b).data("tagID")).removeClass($(b).data("options")["class"]),clearInterval($(b).data("timer")),$(b).remove()}),void 0):$(this).each(function(c,d){function h(){0>=$("#global-tag-"+e).length||(clearInterval($("#global-tag-"+e).data("timer")),$("#global-tag-"+e).remove(),$(d).off("keypress",h).removeClass(b["class"]),$(d).length>0&&($(d)[0].style.cssText=g),"function"==typeof b.onHide&&b.onHide())}var e=d.id;if(""==a||null==a||a===void 0)$("#global-tag-"+e).css("opacity",0),setTimeout(function(){clearInterval($("#global-tag-"+e).data("timer")),$("#global-tag-"+e).remove()},300);else{clearInterval($("#global-tag-"+e).data("timer")),$("#global-tag-"+e).remove(),$("body").append('<div id="global-tag-'+e+'" class="global-tag" '+'	style="position: absolute; z-index: 1100; opacity: 0; -webkit-transition: opacity .3s; -moz-transition: opacity .3s; -ms-transition: opacity .3s; -o-transition: opacity .3s"></div>');var f=setInterval(function(){return 0==$(d).length||0==$(d).offset().left&&0==$(d).offset().top?(clearInterval($("#global-tag-"+e).data("timer")),h(),void 0):($("#global-tag-"+e).data("position")!=$(d).offset().left+d.offsetWidth+"x"+$(d).offset().top&&$("#global-tag-"+e).css({"-webkit-transition":".2s","-moz-transition":".2s","-ms-transition":".2s","-o-transition":".2s",left:$(d).offset().left+d.offsetWidth+"px",top:$(d).offset().top+"px"}).data("position",$(d).offset().left+d.offsetWidth+"x"+$(d).offset().top),void 0)},100);setTimeout(function(){$(d).offset()&&($("#global-tag-"+e).css({opacity:"1",left:$(d).offset().left+d.offsetWidth+"px",top:$(d).offset().top+"px"}).html('<div style="margin-top: -2px 0px 0px -2px; white-space: nowrap;"> <div class="bubble-tag">'+a+"</div> </div>").data("text",a).data("tagID",e).data("options",b).data("position",$(d).offset().left+d.offsetWidth+"x"+$(d).offset().top).data("timer",f),$(d).off("keypress",h).on("keypress",h).off("change",h).on("change",h).css(b.css).addClass(b["class"]),"function"==typeof b.onShow&&b.onShow())},1);var g="";$(d).length>0&&(g=$(d)[0].style.cssText)}})},$.fn.w2overlay=function(a,b){var c=!1;if(0==this.length||""==a)return $("#w2ui-overlay").remove(),void 0;0==$("#w2ui-overlay").length&&($("body").append('<div id="w2ui-overlay" class="w2ui-overlay" style="display: none;"><div></div></div>'),c=!0),$.isPlainObject(b)||(b={}),$.isPlainObject(b.css)||(b.css={});var d=this,e=$("#w2ui-overlay div");e.css(b.css).html(a),b["class"]!==void 0&&e.addClass(b["class"]),b.top===void 0&&(b.top=0),b.left===void 0&&(b.left=0);var e=$("#w2ui-overlay");e.css({display:"block",left:$(d).offset().left+b.left+"px",top:$(d).offset().top+w2utils.getSize($(d),"height")+3+b.top+"px"}).fadeIn("fast").data("position",$(d).offset().left+"x"+($(d).offset().top+d.offsetHeight)).on("click",function(){e.data("ignoreClick",!0)}),c||e.data("ignoreClick",!0);var f=function(){"function"==typeof b.onHide&&b.onHide();var a=$("#w2ui-overlay");return a.data("ignoreClick")===!0?(a.data("ignoreClick",!1),void 0):(a.remove(),$(document).off("click",f),void 0)};setTimeout(function(){c&&$(document).on("click",f),"function"==typeof b.onShow&&b.onShow()},1)}}(),function(){var w2grid=function(a){this.name=null,this.box=null,this.header="",this.url="",this.columns=[],this.columnGroups=[],this.records=[],this.searches=[],this.searchData=[],this.sortData=[],this.postData={},this.toolbar={},this.show={header:!1,toolbar:!1,footer:!1,columnHeaders:!0,lineNumbers:!1,expandColumn:!1,selectColumn:!1,emptyRecords:!0,toolbarReload:!0,toolbarColumns:!0,toolbarSearch:!0,toolbarAdd:!1,toolbarDelete:!1,toolbarSave:!1},this.fixedBody=!0,this.fixedRecord=!0,this.multiSearch=!0,this.multiSelect=!0,this.multiSort=!0,this.keyboard=!0,this.total=0,this.page=0,this.recordsPerPage=50,this.style="",this.isLoaded=!1,this.width=null,this.height=null,this.msgDelete="Are you sure you want to delete selected record(s)?",this.msgNoData="There is no data.",this.layout="table",this.tmpl="",this.tmpl_start="",this.tmpl_end="",this.tmpl_group="",this.tmpl_empty='<div style="padding: 8px;">~msg~</div>',this.onRequest=null,this.onLoad=null,this.onAdd=null,this.onDelete=null,this.onSave=null,this.onSelect=null,this.onUnselect=null,this.onClick=null,this.onDblClick=null,this.onSort=null,this.onSearch=null,this.onChange=null,this.onExpand=null,this.onRender=null,this.onRefresh=null,this.onResize=null,this.onDestroy=null,this.recid=null,this.searchOpened=!1,this.last_field="all",this.last_caption="All Fields",this.last_logic="OR",this.last_search="",this.last_multi=!1,this.last_scrollTop=0,this.last_scrollLeft=0,this.last_selected=[],this.last_sortData=null,this.last_sortCount=0,this.transition=!1,this.request_xhr=null,this.isIOS=-1!=navigator.userAgent.toLowerCase().indexOf("iphone")||-1!=navigator.userAgent.toLowerCase().indexOf("ipod")||-1!=navigator.userAgent.toLowerCase().indexOf("ipad")?!0:!1,$.extend(!0,this,a)};$.fn.w2grid=function(a){if("object"==typeof a||!a){if(!a||a.name===void 0)return console.log('ERROR: The parameter "name" is required but not supplied in $().w2grid().'),void 0;if(w2ui[a.name]!==void 0)return console.log('ERROR: The parameter "name" is not unique. There are other objects already created with the same name (obj: '+a.name+")."),void 0;var b=a.columns,c=a.columnGroups,d=a.records,e=a.searches,f=a.searchData,g=a.sortData,h=a.postData,i=a.toolbar,j=new w2grid(a);$.extend(j,{postData:{},records:[],columns:[],searches:[],toolbar:{},sortData:[],searchData:[],handlers:[]}),null!=j.onExpand&&(j.show.expandColumn=!0),$.extend(!0,j.toolbar,i);for(var k in b)j.columns[k]=$.extend({},b[k]);for(var k in c)j.columnGroups[k]=$.extend({},c[k]);for(var k in e)j.searches[k]=$.extend({},e[k]);for(var k in f)j.searchData[k]=$.extend({},f[k]);for(var k in g)j.sortData[k]=$.extend({},g[k]);for(var k in h)j.postData[k]=$.extend({},h[k]);for(var l in d){if(null==d[l].recid||d[l].recid===void 0)return console.log("ERROR: Cannot add records without recid. (obj: "+j.name+")"),void 0;j.records[l]=$.extend({},d[l])}return j.records.length>0&&(j.total=j.records.length),j.initToolbar(),0!=$(this).length&&j.render($(this)[0]),w2ui[j.name]=j,j}if($(this).data("w2name")!==void 0){var m=w2ui[$(this).data("w2name")];return m[a].apply(m,Array.prototype.slice.call(arguments,1)),this}console.log("ERROR: Method "+a+" does not exist on jQuery.w2grid")},w2grid.prototype={add:function(a){$.isArray(a)||(a=[a]);for(var b in a)null!=a[b].recid&&void 0!==a[b].recid?this.records.push(a[b]):console.log("ERROR: Cannot add record without recid. (obj: "+this.name+")");this.total=this.records.length,""==this.url&&(this.localSearch(),this.localSort()),this.refresh()},find:function(a){(a===void 0||null==a)&&(a={});for(var b=[],c=0;this.records.length>c;c++){var d=!0;for(var e in a)a[e]!=this.records[c][e]&&(d=!1);d&&b.push(this.records[c].recid)}return b},set:function(a,b){var b,c=this.getIndex(a);$.extend(this.records[c],b);var d=$("#grid_"+this.name+"_rec_"+a);if(0!=d.length)for(var e=d.attr("line"),f=0;;){var g=this.columns[f];if(g.hidden){if(f++,this.columns[f]===void 0)break}else{var h="";if((g.field+"").indexOf(".")>-1){var i=(g.field+"").split(".");h=this.records[c][i[0]],"object"==typeof h&&null!=h&&(h=h[i[1]])}else h=this.records[c][g.field];if(g.render!==void 0&&("function"==typeof g.render&&(h=g.render.call(this,this.records[c],c)),"object"==typeof g.render&&(h=g.render[this.records[c][g.field]])),(null==h||h===void 0)&&(h=""),"string"==typeof g.render)switch(g.render.toLowerCase()){case"url":var j=h.indexOf("/",8);h='<a href="'+h+'" target="_blank">'+h.substr(0,j)+"</a>";break;case"repeat":c>0&&this.records[c][g.field]==this.records[c-1][g.field]&&""!=this.records[c][g.field]&&(h="-- // --")}if($(d).find("#grid_"+this.name+"_cell_"+e+"_"+f+" > div").html(h),f++,this.columns[f]===void 0)break}}},get:function(a){for(var b=0;this.records.length>b;b++)if(this.records[b].recid==a)return this.records[b];return null},getIndex:function(a){for(var b=0;this.records.length>b;b++)if(this.records[b].recid==a)return b;return null},remove:function(){var a=0;for(var b in arguments)for(var c=this.records.length-1;c>=0;c--)this.records[c].recid==arguments[b]&&(this.records.splice(c,1),a++);return""==this.url&&(this.total=this.records.length,this.localSearch(),this.localSort()),this.refresh(),a},clear:function(){this.records=[],this.total=0,this.refresh()},localSort:function(){var a=this;this.records.sort(function(b,c){if(b.summary&&c.summary){if(b.recid>c.recid)return 1;if(b.recid<=c.recid)return-1}var d=0;for(var e in a.sortData){var f=b[a.sortData[e].field],g=c[a.sortData[e].field];if("string"==typeof f&&(f=$.trim(f.toLowerCase())),"string"==typeof g&&(g=$.trim(g.toLowerCase())),f>g&&(d="asc"==a.sortData[e].direction?1:-1),g>f&&(d="asc"==a.sortData[e].direction?-1:1),"object"!=typeof f&&"object"==typeof g&&(d=-1),"object"!=typeof g&&"object"==typeof f&&(d=1),0!=d)break}return d}),this.last_sortCount=this.records.length},localSearch:function(){function n(b){for(var c in a.searchData)if(a.searchData[c].field==b)return a.searchData[c];return null}var a=this;this.total=this.records.length;for(var b in this.records)this.records[b].hidden=!1;if(this.searchData.length>0){this.total=0;for(var b in this.records){var c=this.records[b],d=0;for(var e in this.searches){var f=this.searches[e],g=n(f.field);if(null!=g){var h=(c[f.field]+"").toLowerCase();if(g.value!==void 0)if($.isArray(g.value))var i=g.value[0],j=g.value[1];else var i=(g.value+"").toLowerCase();switch(g.operator){case"is":if(c[f.field]==g.value&&d++,"text"==f.type&&h==i&&d++,"date"==f.type){var k=new Date(h),l=new Date(i);d0=Date.UTC(k.getFullYear(),k.getMonth(),k.getDate()),d1=Date.UTC(l.getFullYear(),l.getMonth(),l.getDate()),d0==d1&&d++}break;case"between":if("int"==f.type&&parseInt(c[f.field])>=parseInt(i)&&parseInt(c[f.field])<=parseInt(j)&&d++,"float"==f.type&&parseFloat(c[f.field])>=parseFloat(i)&&parseFloat(c[f.field])<=parseFloat(j)&&d++,"date"==f.type){var k=new Date(h),l=new Date(i),m=new Date(j);d0=Date.UTC(k.getFullYear(),k.getMonth(),k.getDate()),d1=Date.UTC(l.getFullYear(),l.getMonth(),l.getDate()),d2=Date.UTC(m.getFullYear(),m.getMonth(),m.getDate()),d0>=d1&&d2>=d0&&d++}break;case"begins with":0==h.indexOf(i)&&d++;break;case"contains":h.indexOf(i)>=0&&d++;break;case"ends with":h.indexOf(i)==h.length-i.length&&d++}}}"OR"==this.last_logic&&(c.hidden=0==d?!0:!1),"AND"==this.last_logic&&(c.hidden=d!=this.searchData.length?!0:!1),c.hidden!==!0&&c.summary!==!0&&this.total++}}},select:function(){var b=0;for(var c in arguments){var d=this.get(arguments[c]);if(null!=d&&d.selected!==!0){var e=this.trigger({phase:"before",type:"select",target:this.name,recid:d.recid});if(e.stop!==!0){var f=this.getIndex(d.recid);d.selected=!0,$("#grid_"+this.name+"_rec_"+d.recid).addClass("w2ui-selected").data("selected","yes"),$("#grid_"+this.name+"_cell_"+f+"_select_check").attr("checked",!0),b++,this.trigger($.extend(e,{phase:"after"}))}}}return $("#grid_"+this.name+"_check_all").attr("checked",!0),$("#grid_"+this.name+"_records").find(".grid_select_check[type=checkbox]").length==$("#grid_"+this.name+"_records").find(".grid_select_check[type=checkbox]:checked").length?$("#grid_"+this.name+"_check_all").attr("checked",!0):$("#grid_"+this.name+"_check_all").removeAttr("checked"),b},unselect:function(){var b=0;for(var c in arguments){var d=this.get(arguments[c]);if(null!=d&&d.selected===!0){var e=this.trigger({phase:"before",type:"unselect",target:this.name,recid:d.recid});if(e.stop!==!0){var f=this.getIndex(d.recid);d.selected=!1,$("#grid_"+this.name+"_rec_"+d.recid).removeClass("w2ui-selected").data("selected",""),0!=$("#grid_"+this.name+"_rec_"+d.recid).length&&($("#grid_"+this.name+"_rec_"+d.recid)[0].style.cssText=$("#grid_"+this.name+"_rec_"+d.recid).attr("custom_style")),$("#grid_"+this.name+"_cell_"+f+"_select_check").removeAttr("checked"),b++,this.trigger($.extend(e,{phase:"after"}))}}}return $("#grid_"+this.name+"_check_all").attr("checked",!0),$("#grid_"+this.name+"_records").find(".grid_select_check[type=checkbox]").length==$("#grid_"+this.name+"_records").find(".grid_select_check[type=checkbox]:checked").length?$("#grid_"+this.name+"_check_all").attr("checked",!0):$("#grid_"+this.name+"_check_all").removeAttr("checked"),b},selectAll:function(){if(this.multiSelect!==!1){for(var a=0;this.records.length>a;a++)this.records[a].hidden!==!0&&this.records[a].summary!==!0&&this.select(this.records[a].recid);this.getSelection().length>0?this.toolbar.enable("delete-selected"):this.toolbar.disable("delete-selected")}},selectPage:function(){if(this.multiSelect!==!1){this.selectNone();var a=0;if(""==this.url)for(var b=this.page*this.recordsPerPage,c=0;this.records.length>c;c++)if(this.records[c].hidden!==!0&&this.records[c].summary!==!0&&(b--,0>b)){a=c;break}for(var d=a,e=0;this.recordsPerPage>e&&this.records.length>d;d++){var f=this.records[d];f&&f.hidden!==!0&&(e++,this.select(this.records[d].recid))}this.getSelection().length>0?this.toolbar.enable("delete-selected"):this.toolbar.disable("delete-selected")}},selectNone:function(){for(var a=0;this.records.length>a;a++)this.records[a].selected===!0&&this.unselect(this.records[a].recid);this.last_selected=[]},getSelection:function(){var a=[];for(var b in this.records)this.records[b].selected===!0&&a.push(this.records[b].recid);return a},search:function(a,b){function r(a){for(var b in c.searches)if(c.searches[b].field==a)return c.searches[b];return null}var c=this,d=[],e=this.last_multi,f=this.last_logic,g=this.last_field,h=this.last_search;if(0==arguments.length){for(var i in this.searches){var j=this.searches[i],k=$("#grid_"+this.name+"_operator_"+i).val(),l=$("#grid_"+this.name+"_field_"+i).val(),m=$("#grid_"+this.name+"_field2_"+i).val();if(""!=l&&null!=l||m!==void 0&&""!=m){var n={field:j.field,type:j.type,operator:k};"between"==k?$.extend(n,{value:[l,m]}):$.extend(n,{value:l}),d.push(n)}}d.length>0&&(e=!0,f="AND")}if(1==arguments.length&&$.isArray(a)){e=!0,f="AND";for(var o in a){var p=a[o],j=r(p.field);if(null!=j){var n=$.extend({},p);n.type===void 0&&(n.type=j.type),n.operator===void 0&&(n.operator="is","text"==n.type&&(n.operator="begins with")),d.push(n)}else console.log('ERROR: Cannot find field "'+p.field+'" when submitting a search.')}}if(2==arguments.length&&(g=a,h=b,e=!1,f="OR",""!=b))for(var i in this.searches){var j=this.searches[i];if(j.field==a&&(this.last_caption=j.caption),"all"!=a&&j.field==a){var n={field:j.field,type:j.type,operator:"text"==j.type?"begins with":"is",value:b};d.push(n)}if("all"==a&&("text"==j.type||"int"==j.type&&w2utils.isInt(b)||"float"==j.type&&w2utils.isFloat(b)||"money"==j.type&&w2utils.isMoney(b)||"hex"==j.type&&w2utils.isHex(b)||"date"==j.type&&w2utils.isDate(b)||"alphaNumeric"==j.type&&w2utils.isAlphaNumeric(b))){var n={field:j.field,type:j.type,operator:"text"==j.type?"begins with":"is",value:b};d.push(n)}}var q=this.trigger({phase:"before",type:"search",target:this.name,searchData:d});q.stop!==!0&&(this.searchData=q.searchData,this.last_field=g,this.last_search=h,this.last_multi=e,this.last_logic=f,this.last_scrollTop=0,this.last_scrollLeft=0,this.last_selected=[],this.searchClose(),""!=this.url?(this.isLoaded=!1,this.page=0,this.reload()):(this.localSearch(),this.goto(0)),this.trigger($.extend(q,{phase:"after"})))},searchOpen:function(){if(this.box&&0!=this.searches.length){var a=this;this.searchOpened=!0,0==$("#w2ui-global-searches").length&&$("body").append('<div id="w2ui-global-searches" class="w2ui-reset"> <div style=""></div> </div>'),$("#w2ui-global-searches").css({left:$("#grid_"+this.name+"_search_all").offset().left+"px",top:$("#grid_"+this.name+"_search_all").offset().top+w2utils.getSize($("#grid_"+this.name+"_search_all"),"height")+"px"}).show().data("grid-name",this.name),$("#w2ui-global-searches > div").html(this.getSearchesHTML()),$("#w2ui-global-searches > div").css({"-webkit-transform":"translate3d(0px, -"+$("#w2ui-global-searches").height()+"px, 0px)","-moz-transform":"translate3d(0px, -"+$("#w2ui-global-searches").height()+"px, 0px)","-ms-transform":"translate3d(0px, -"+$("#w2ui-global-searches").height()+"px, 0px)","-o-transform":"translate3d(0px, -"+$("#w2ui-global-searches").height()+"px, 0px)"}),setTimeout(function(){$("#w2ui-global-searches > div").css({"-webkit-transition":".3s","-webkit-transform":"translate3d(0px, 0px, 0px)","-moz-transition":".3s","-moz-transform":"translate3d(0px, 0px, 0px)","-ms-transition":".3s","-ms-transform":"translate3d(0px, 0px, 0px)","-o-transition":".3s","-o-transform":"translate3d(0px, 0px, 0px)"}),"OR"==a.last_logic&&(a.searchData=[]),a.initSearches()},10),setTimeout(function(){$("#w2ui-global-searches").css({"box-shadow":"0px 2px 10px #777"})},350)}},searchClose:function(){this.box&&0!=this.searches.length&&(this.searchOpened=!1,$("#w2ui-global-searches").css("box-shadow","0px 0px 0px white"),$("#w2ui-global-searches > div").css({"-webkit-transform":"translate3d(0px, -"+$("#w2ui-global-searches").height()+"px, 0px)","-moz-transform":"translate3d(0px, -"+$("#w2ui-global-searches").height()+"px, 0px)","-ms-transform":"translate3d(0px, -"+$("#w2ui-global-searches").height()+"px, 0px)","-o-transform":"translate3d(0px, -"+$("#w2ui-global-searches").height()+"px, 0px)"}),setTimeout(function(){$("#w2ui-global-searches").hide(),$("#w2ui-global-searches > div").html("")
},300))},searchShowFields:function(a){for(var b='<table cellspacing="0" style="padding: 5px; font-size: 11px; font-family: verdana;">',c=-1;this.searches.length>c;c++){var d=this.searches[c];if(-1==c){if(!this.multiSearch)continue;d={type:"text",field:"all",caption:"All Fields"}}else if(this.searches[c].hidden===!0)continue;b+="<tr style=\"cursor: default;\" class=\"w2ui-tb-caption\"		onmouseover=\"$(this).css('background-color', '#B4D5FE'); \" 		onmouseout=\"$(this).css('background-color', '');\" 	"+(this.isIOS?"onTouchStart":"onClick")+"=\"var obj = w2ui['"+this.name+"']; "+"		if ('"+d.type+"' == 'list' || '"+d.type+"' == 'enum') {"+"			obj.last_search = '';"+"			obj.last_item = '';"+"			$('#grid_"+this.name+"_search_all').val('')"+"		}"+"		if (obj.last_search != '') { "+"			obj.search('"+d.field+"', obj.last_search); "+"		} else { "+"			obj.last_field = '"+d.field+"'; "+"			obj.last_caption = '"+d.caption+"'; "+"		}"+"		$('#grid_"+this.name+"_search_all').attr('placeholder', '"+d.caption+"');"+'		$().w2overlay();">'+'<td style="padding: 3px 3px 3px 6px"><input type="checkbox" tabIndex="-1" '+(d.field==this.last_field?"checked":"disabled")+' style="margin: 3px 2px 2px 2px"></td>'+'<td style="padding: 3px 15px 3px 3px">'+d.caption+"</td>"+"</tr>"}b+="</table>",$(a).w2overlay(b,{left:-15,top:7})},searchReset:function(){var a=this.trigger({phase:"before",type:"search",target:this.name,searchData:[]});a.stop!==!0&&(this.searchData=[],this.last_search="",this.last_logic="OR",this.last_multi&&(this.multiSearch?(this.last_field="all",this.last_caption="All Fields"):(this.last_field=this.searches[0].field,this.last_caption=this.searches[0].caption)),this.last_multi=!1,this.last_scrollTop=0,this.last_scrollLeft=0,this.last_selected=[],$("#grid_"+this.name+"_search_all").attr("placeholder",this.last_caption),$("#w2ui-global-searches *[rel=search]").val(null),this.searchClose(),$("#grid_"+this.name+"_search_all").attr("placeholder",this.last_caption),$("#w2ui-global-searches *[rel=search]").val(null),""!=this.url?(this.isLoaded=!1,this.page=0,this.reload()):(this.localSearch(),this.goto(0)),this.trigger($.extend(a,{phase:"after"})))},"goto":function(a){var b=Math.floor(this.total/this.recordsPerPage);(0!=this.total%this.recordsPerPage||0==b)&&b++,1>b&&(b=1),0>a&&(a=0),a>=b&&(a=b-1),this.last_scrollTop=0,this.last_scrollLeft=0,this.last_selected=[],this.isLoaded=!1,this.page=a,this.reload()},load:function(a,b){return a===void 0?(console.log('ERROR: You need to provide url argument when calling .load() method of "'+this.name+'" object.'),void 0):(this.isLoaded=!1,this.request("get-records",{},a,b),void 0)},reload:function(a){""!=this.url?(this.isLoaded=!1,this.request("get-records",{},null,a)):(this.isLoaded=!0,this.refresh())},reset:function(){this.page=0,this.width=null,this.height=null,this.isLoaded=!1,this.searchOpened=!1,this.searchData=[],this.last_search="",this.last_field="all",this.last_caption="All Fields",this.last_logic="OR",this.last_scrollTop=0,this.last_scrollLeft=0,this.last_selected=[],this.last_sortCount=0,null!=this.last_sortData&&(this.sortData=this.last_sortData);for(var a=0;this.records.length>a;a++)this.records[a].selected=!1,this.records[a].hidden=!1;this.refresh()},request:function(cmd,add_params,url,callBack){if(add_params===void 0&&(add_params={}),(url===void 0||""==url||null==url)&&(url=this.url),""!=url&&null!=url){var params={};params.cmd=cmd,params.name=this.name,params.limit=this.recordsPerPage,params.offset=this.page*this.recordsPerPage,params.selected=this.getSelection(),params.search=this.searchData,params["search-logic"]=this.last_logic,params.sort=0!=this.sortData.length?this.sortData:"",null!=this.recid&&(params.recid=this.recid),$.extend(params,this.postData),$.extend(params,add_params);var eventData=this.trigger({phase:"before",type:"request",target:this.name,url:url,postData:params,cmd:cmd});if(eventData.stop===!0)return"function"==typeof callBack&&callBack(),!1;"get-records"==cmd&&(this.records=[]);var obj=this;if(this.showStatus("Refreshing "),this.request_xhr)try{this.request_xhr.abort()}catch(e){}this.request_xhr=$.ajax({type:"POST",url:url+(url.indexOf("?")>-1?"&":"?")+"t="+(new Date).getTime(),data:($.param(eventData.postData,!1)+"").replace(/%5B/g,"[").replace(/%5D/g,"]"),dataType:"text",complete:function(xhr,status){obj.hideStatus(),obj.isLoaded=!0;var eventData=obj.trigger({phase:"before",target:obj.name,type:"load",data:xhr.responseText,xhr:xhr,status:status});if(eventData.stop===!0)return"function"==typeof callBack&&callBack(),!1;if(eventData.data!==void 0&&""!=eventData.data){var data="data = "+eventData.data,data=eval(data);if(data.status!==void 0&&"success"!=data.status){if(403==xhr.status)return document.location="login.html",void 0;setTimeout(function(){$().w2popup("open",{width:400,height:180,showMax:!1,title:"Error",body:'<div style="padding: 15px 5px; text-align: center;">'+data.message+"</div>",buttons:'<input type="button" value="Ok" onclick="$().w2popup(\'close\');" style="width: 60px; margin-right: 5px;">'})},300)}else if("get-records"==cmd&&$.extend(obj,data),"delete-records"==cmd)return obj.reload(),void 0}""==obj.url&&(obj.localSearch(),obj.localSort()),obj.trigger($.extend(eventData,{phase:"after"})),obj.refresh(),"function"==typeof callBack&&callBack()}}),this.trigger($.extend(eventData,{phase:"after"}))}},getChanged:function(){for(var a=[],b=!1,c=0;this.records.length>c;c++){for(var d=this.records[c],e={},f=0;this.columns.length>f;f++){var g=this.columns[f];if(!g.hidden&&"recid"!=g.field&&0!=$("#grid_"+this.name+"_edit_"+c+"_"+f).length){var h=$("#grid_"+this.name+"_edit_"+c+"_"+f).val(),i=d[g.field];i===void 0&&(i=""),h!=i&&(b=!0,e[g.field]=h)}}$.isEmptyObject(e)||a.push($.extend({},{recid:this.records[c].recid},e))}return a},doAdd:function(){var a=this.trigger({phase:"before",target:this.name,type:"add",recid:null});return a.stop===!0?!1:(this.trigger($.extend(a,{phase:"after"})),void 0)},doSave:function(){var a=this.getChanged(),b=this.trigger({phase:"before",target:this.name,type:"save",changed:a});if(b.stop===!0)return!1;if(""!=this.url)this.request("save-records",{changed:a},null,function(){this.trigger($.extend(b,{phase:"after"}))});else{for(var c in a){var d=this.get(a[c].recid);for(var e in a[c])"recid"!=e&&(d[e]=a[c][e])}$("#grid_"+this.name+" .w2ui-editable").removeClass("changed"),this.selectNone(),this.trigger($.extend(b,{phase:"after"}))}},doEdit:function(a,b,c){var d=$(b).attr("recid"),e=this.get(d);switch(e.selected||(this.selectNone(),this.select(d)),a){case"click":c.stopPropagation(),c.preventDefault();break;case"focus":$(b).addClass("active");break;case"blur":$(b).removeClass("active");var f=e[$(b).attr("field")];if(f===void 0&&(f=""),$(b).val()!=f){var g=this.trigger({phase:"before",type:"change",target:b.id,recid:d});if(g.stop===!0)return!1;$(b).addClass("changed"),this.trigger($.extend(g,{phase:"after"}))}else $(b).removeClass("changed");break;case"keyup":if($(b).data("stop")===!0){$(b).data("stop",!1);break}if(40==c.keyCode||13==c.keyCode){var h=$("#grid_"+this.name+"_edit_"+(parseInt($(b).attr("line"))+1)+"_"+$(b).attr("column"));h.length>0&&(h[0].select(),h[0].focus())}if(38==c.keyCode){var h=$("#grid_"+this.name+"_edit_"+(parseInt($(b).attr("line"))-1)+"_"+$(b).attr("column"));h.length>0&&(h[0].select(),h[0].focus())}}},doDelete:function(a){var b=this.trigger({phase:"before",target:this.name,type:"delete"});if(b.stop===!0)return!1;var c=this.getSelection();if(0!=c.length){if(""!=this.msgDelete&&!a)return $().w2popup({width:400,height:160,showMax:!1,title:"Delete Confirmation",body:'<div style="padding: 20px 5px; text-align: center;">'+this.msgDelete+"</div>",buttons:'<input type="button" value="No" onclick="$().w2popup(\'close\');" style="width: 60px; margin-right: 5px;"><input type="button" value="Yes" onclick="w2ui[\''+this.name+"'].doDelete(true); $().w2popup('close');\" style=\"width: 60px;\">"}),void 0;""!=this.url?this.request("delete-records"):this.remove.apply(this,c),this.trigger($.extend(b,{phase:"after"}))}},doClick:function(a,b){var c=this.trigger({phase:"before",target:this.name,type:"click",recid:a,event:b});if(c.stop===!0)return!1;$("#grid_"+this.name+"_check_all").removeAttr("checked"),this.searchOpened&&this.searchClose();var d=this.get(a);if(d)var e=d.selected;if((b.ctrlKey||b.shiftKey||b.metaKey)&&this.multiSelect||this.showSelectColumn?window.setTimeout("var doc = w2ui['"+this.name+"'].box.ownerDocument; if (doc.selection) doc.selection.empty(); "+"else doc.defaultView.getSelection().removeAllRanges();",10):this.selectNone(),b.shiftKey){for(var f=0,g=null,h=0;this.records.length>h;h++)this.records[h].selected&&(f++,g||(g=h));if(f>1&&this.selectNone(),1==f){var i=this.getIndex(a);if(i>g)for(var h=g;i>=h;h++)this.select(this.records[h].recid);else for(var h=i;g>=h;h++)this.select(this.records[h].recid);return this.trigger($.extend(c,{phase:"after"})),this.last_selected=this.getSelection(),void 0}}if(this.showSelectColumn&&d.selected?this.unselect(d.recid):(d&&!e||b.ctrlKey||b.metaKey)&&(d.selected===!0?this.unselect(d.recid):this.select(d.recid)),this.keyboard){var j=this,k=function(a){var b=j;if("body"==a.target.tagName.toLowerCase()){65==a.keyCode&&(a.metaKey||a.ctrlKey)&&(b.selectPage(),a.preventDefault()),8==a.keyCode&&(b.doDelete(),a.preventDefault());var c=b.getSelection();if(1==c.length){var d=c[0],e=b.getIndex(d),f=parseInt($("#grid_"+b.name+"_records").prop("scrollTop")),g=parseInt($("#grid_"+b.name+"_records").height());if(38==a.keyCode){if(e>0){for(e--;e>0&&b.records[e].hidden===!0;)e--;b.selectNone(),b.doClick(b.records[e].recid,a);var h=parseInt($("#grid_"+b.name+"_rec_"+b.records[e].recid)[0].offsetTop),i=parseInt($("#grid_"+b.name+"_rec_"+b.records[e].recid).height());f>h&&($("#grid_"+b.name+"_records").prop("scrollTop",h-.7*i),b.last_scrollTop=$("#grid_"+b.name+"_records").prop("scrollTop"))}a.preventDefault()}if(40==a.keyCode){if(b.records.length>e+1){for(e++;b.records.length>e+1&&b.records[e].hidden===!0;)e++;b.selectNone(),b.doClick(b.records[e].recid,a);var h=parseInt($("#grid_"+b.name+"_rec_"+b.records[e].recid)[0].offsetTop),i=parseInt($("#grid_"+b.name+"_rec_"+b.records[e].recid).height());h+i>g+f&&($("#grid_"+b.name+"_records").prop("scrollTop",-(g-h-i)+.7*i),b.last_scrollTop=$("#grid_"+b.name+"_records").prop("scrollTop"))}a.preventDefault()}}}};$(window).off("keydown").on("keydown",k)}this.getSelection().length>0?this.toolbar.enable("delete-selected"):this.toolbar.disable("delete-selected"),this.last_selected=this.getSelection(),this.trigger($.extend(c,{phase:"after"}))},doDblClick:function(a,b){window.getSelection&&window.getSelection().removeAllRanges();var c=this.trigger({phase:"before",target:this.name,type:"dblClick",recid:a,event:b});return c.stop===!0?!1:(this.get(a),clearTimeout(this._click_timer),this.selectNone(),this.select(a),this.last_selected=this.getSelection(),this.trigger($.extend(c,{phase:"after"})),void 0)},doExpand:function(a){var b=$("#grid_"+this.name+"_rec_"+a).attr("expanded");if("yes"!=b){var c=1+(this.show.lineNumbers?1:0)+(this.show.selectColumn?1:0),d=$("#grid_"+this.name+"_rec_"+a).hasClass("w2ui-odd")?"w2ui-odd":"w2ui-even";$("#grid_"+this.name+"_rec_"+a).after('<tr id="grid_'+this.name+"_rec_"+a+'_expaned_row" style="display: none" class="'+d+'">'+'<td class="w2ui-grid-data" colspan="'+c+'"></td>'+'<td colspan="100" class="w2ui-subgrid"><div id="grid_'+this.name+"_rec_"+a+'_expaned" style="height: auto;">&nbsp;</div></td>'+"</tr>")}var e=this.trigger({phase:"before",type:"expand",target:this.name,recid:a,expanded:"yes"==b?!0:!1,box_id:"grid_"+this.name+"_rec_"+a+"_expaned"});return e.stop===!0?($("#grid_"+this.name+"_rec_"+a+"_expaned_row").remove(),!1):("yes"==b?($("#grid_"+this.name+"_rec_"+a).attr("expanded",""),$("#grid_"+this.name+"_rec_"+a+"_expaned_row").remove(),$("#grid_"+this.name+"_cell_"+this.getIndex(a)+"_expand div").html("+")):($("#grid_"+this.name+"_rec_"+a).attr("expanded","yes"),$("#grid_"+this.name+"_cell_"+this.getIndex(a)+"_expand div").html("-"),$("#grid_"+this.name+"_rec_"+a+"_expaned_row").show()),this.trigger($.extend(e,{phase:"after"})),this.resize(),void 0)},doSort:function(a,b,c){var d=this.trigger({phase:"before",type:"sort",target:this.name,field:a,direction:b,event:c});if(d.stop===!0)return!1;if(a===void 0)return this.trigger($.extend(d,{phase:"after"})),void 0;var e=this.sortData.length;for(var f in this.sortData)if(this.sortData[f].field==a){e=f;break}if(b===void 0||null==b)if(this.sortData[e]===void 0)b="asc";else switch(this.sortData[e].direction+""){case"asc":b="desc";break;case"desc":b="";break;default:b="asc"}this.multiSort===!1&&(this.sortData=[],e=0),c.ctrlKey||c.metaKey||(this.sortData=[],e=0),this.sortData[e]===void 0&&(this.sortData[e]={}),this.sortData[e].field=a,this.sortData[e].direction=b,""==this.url&&this.localSort(),this.trigger($.extend(d,{phase:"after"})),this.reload()},resize:function(a,b){(new Date).getTime();var d=this;if(window.getSelection&&window.getSelection().removeAllRanges(),this.box&&$(this.box).data("w2name")==this.name&&(this.width=a!==void 0&&null!=a?parseInt(a):$(this.box).width(),this.height=b!==void 0&&null!=b?parseInt(b):$(this.box).height(),$(this.box).width(a).height(b),0!=this.width&&0!=this.height)){var e=this.trigger({phase:"before",type:"resize",target:this.name,width:this.width,height:this.height});if(e.stop===!0)return!1;d.resizeBoxes(),d.resizeRecords(),this.trigger($.extend(e,{phase:"after"}))}},refresh:function(){var a=this;(new Date).getTime();var c=Math.floor(this.total/this.recordsPerPage);if((0!=this.total%this.recordsPerPage||0==c)&&c++,this.page>0&&this.page>c-1&&this.goto(0),window.getSelection&&window.getSelection().removeAllRanges(),this.box){var d=this.trigger({phase:"before",target:this.name,type:"refresh"});if(d.stop===!0)return!1;this.searchOpened&&this.searchClose(),this.show.header?$("#grid_"+this.name+"_header").html(this.header+"&nbsp;").show():$("#grid_"+this.name+"_header").hide(),this.show.toolbar?($("#grid_"+this.name+"_toolbar").show(),"object"==typeof this.toolbar&&(this.toolbar.refresh(),$("#grid_"+this.name+"_search_all").val(this.last_search))):$("#grid_"+this.name+"_toolbar").hide(),0==this.searches.length&&(this.last_field="No Search Fields"),this.multiSearch||"all"!=this.last_field||(this.last_field=this.searches[0].field,this.last_caption=this.searches[0].caption);for(var e in this.searches)this.searches[e].field==this.last_field&&(this.last_caption=this.searches[e].caption);this.last_multi?$("#grid_"+this.name+"_search_all").attr("placeholder","Multi Fields"):$("#grid_"+this.name+"_search_all").attr("placeholder",this.last_caption),this._focus_when_refreshed===!0&&setTimeout(function(){var b=$("#grid_"+a.name+"_search_all");b.length>0&&b[0].focus(),setTimeout(function(){delete a._focus_when_refreshed},500)},10);var f="";if("table"==this.layout&&(f+='<div id="grid_'+this.name+'_records" class="w2ui-grid-records" style="position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px;" '+"	onscroll=\"var obj = w2ui['"+this.name+"']; obj.last_scrollTop = this.scrollTop; obj.last_scrollLeft = this.scrollLeft; "+"		$('#grid_"+this.name+"_columns')[0].scrollLeft = this.scrollLeft\">"+'<table cellpadding="0" cellspacing="0" style="table-layout: fixed;">'+this.getRecordsHTML()+"</table>"+"</div>"+'<div id="grid_'+this.name+'_columns" class="w2ui-grid-columns" style="overflow: hidden; position: absolute; left: 0px; top: 0px; right: 0px;">'+'<table cellpadding="0" cellspacing="0" style="table-layout: fixed; height: auto;">'+this.getColumnsHTML()+"</table>"+"</div>"),"div"==this.layout&&(f+='<div id="grid_'+this.name+'_body">'+this.tmpl_start+this.getColumnsHTML()+this.getRecordsHTML()+this.tmpl_end+"</div>"),$("#grid_"+this.name+"_body").html(f),$("#grid_"+this.name+"_records .w2ui-editable").each(function(b,c){var d=a.columns[$(c).attr("column")];$(c).w2field(d.editable)}),""!=this.summary?$("#grid_"+this.name+"_summary").html(this.summary).show():$("#grid_"+this.name+"_summary").hide(),this.show.footer){var g=this.getFooterHTML(),h=this.page*this.recordsPerPage+this.recordsPerPage;h>this.total&&(h=this.total);var i=this.page*this.recordsPerPage+1+"-"+h+" of "+this.total;0==this.page&&0==this.total&&(i="0-0 of 0"),$("#grid_"+this.name+"_footerR").html(i),$("#grid_"+this.name+"_footerC").html(g),$("#grid_"+this.name+"_footer").show()}else $("#grid_"+this.name+"_footer").hide();if(this.last_selected.length>0)for(var e in this.last_selected)null!=this.get(this.last_selected[e])&&this.select(this.get(this.last_selected[e]).recid);this.searchData.length>0?$("#grid_"+this.name+"_searchClear").show():$("#grid_"+this.name+"_searchClear").hide(),$("#grid_"+this.name+"_check_all").attr("checked",!0),$("#grid_"+this.name+"_records").find(".grid_select_check[type=checkbox]").length==$("#grid_"+this.name+"_records").find(".grid_select_check[type=checkbox]:checked").length?$("#grid_"+this.name+"_check_all").attr("checked",!0):$("#grid_"+this.name+"_check_all").removeAttr("checked"),this.trigger($.extend(d,{phase:"after"})),this.resize(null,null,!0)}},render:function(a){if((new Date).getTime(),window.getSelection&&window.getSelection().removeAllRanges(),a!==void 0&&null!=a&&($(this.box).html(""),this.box=a),this.box){$("#w2ui-global-searches").remove(),null==this.last_sortData&&(this.last_sortData=this.sortData);var c=this.trigger({phase:"before",target:this.name,type:"render",box:a});if(c.stop===!0)return!1;$(this.box).data("w2name",this.name).html('<div id="grid_'+this.name+'" class="w2ui-reset w2ui-grid" style="position: absolute; overflow: hidden; '+this.style+'">'+'	<div id="grid_'+this.name+'_header" class="w2ui-grid-header" style="position: absolute; '+(this.show.header?"":"display: none;")+'"></div>'+'	<div id="grid_'+this.name+'_toolbar" class="w2ui-grid-toolbar" style="position: absolute; '+(this.show.toolbar?"":"display: none;")+'"></div>'+'	<div id="grid_'+this.name+'_body" class="w2ui-grid-body" style="position: absolute; overflow: hidden;"></div>'+'	<div id="grid_'+this.name+'_summary" class="w2ui-grid-body w2ui-grid-summary" style="position: absolute; '+(""==this._summary?"display: none;":"")+'">sum</div>'+'	<div id="grid_'+this.name+'_footer" class="w2ui-grid-footer" style="position: absolute; '+(this.show.footer?"":"display: none;")+'"></div>'+"</div>"),this.initToolbar(),null!=this.toolbar&&this.toolbar.render($("#grid_"+this.name+"_toolbar")[0]),$("#grid_"+this.name+"_footer").html('<div style="width: 100%; height: 24px;">	<div id="grid_'+this.name+'_footerL" style="float: left;"></div>'+'	<div id="grid_'+this.name+'_footerR" style="float: right;"></div>'+'	<div id="grid_'+this.name+'_footerC" style="text-align: center;"></div>'+"</div>"),this.refresh(),this.reload(),this.trigger($.extend(c,{phase:"after"}));var d=this;$(window).bind("resize",function(){w2ui[d.name].resize()}),setTimeout(function(){d.resize()},150)}},destroy:function(){var a=this.trigger({phase:"before",target:this.name,type:"destroy"});return a.stop===!0?!1:("object"==typeof this.toolbar&&this.toolbar.destroy&&this.toolbar.destroy(),$(this.box).html(""),delete w2ui[this.name],this.trigger($.extend(a,{phase:"after"})),void 0)},initToolbar:function(){if(this.toolbar.render===void 0){var a=this.toolbar.items;if(this.toolbar.items=[],this.toolbar=$().w2toolbar($.extend(!0,{},this.toolbar,{name:this.name+"_toolbar",owner:this})),this.show.toolbarReload&&this.toolbar.items.push({type:"button",id:"refresh",img:"icon-reload",hint:"Reload data in the list"}),this.show.toolbarColumns){var b='<table cellspacing="0" style="padding: 5px 0px;">';for(var c in this.columns)b+='<tr style="cursor: default;" 	onmouseover="$(this).addClass(\'w2ui-selected\');" onmouseout="$(this).removeClass(\'w2ui-selected\');"><td style=\'padding: 3px 3px 3px 6px\'>	<input id="grid_'+this.name+"_column_"+c+'_check" type="checkbox" style="margin: 3px 2px 2px 2px" tabIndex="-1"'+"	onclick=\"var obj = w2ui['"+this.name+"']; "+"			  var col = obj.columns['"+c+"']; "+"			  if (this.checked) {  "+"				delete col.gridMinWidth; "+"				delete col.hidden; "+"			  } else { "+"				delete col.gridMinWidth; "+"				col.hidden = true; "+"			  } "+'			  obj.refresh(); event.stopPropagation(); ">'+"</td>"+'<td style=\'padding: 3px 10px 3px 3px\'><label style="display: block;" for="grid_'+this.name+"_column_"+c+'_check">'+(""==this.columns[c].caption?"- column "+(c+1)+" -":this.columns[c].caption)+"</label></td>"+"</tr>";b+="</table>",this.toolbar.items.push({type:"drop",id:"select-columns",img:"icon-columns",hint:"Show/hide columns",arrow:!1,html:b})}if((this.show.toolbarReload||this.show.toolbarColumn)&&this.toolbar.items.push({type:"break",id:"break0"}),this.show.toolbarSearch){var d='<table cellpadding="0" cellspacing="0" style="margin-top: -2px"><tr>	<td>		<div class="w2ui-icon icon-search-down w2ui-search-down" title="Select Search Field" '+(this.isIOS?"onTouchStart":"onClick")+"=\"var obj = w2ui['"+this.name+"']; obj.searchShowFields(this);\"></div>"+"	</td>"+"	<td>"+'		<input id="grid_'+this.name+'_search_all" class="w2ui-search-all" '+'			placeholder="'+this.last_caption+'" value="'+this.last_search+'"'+"			onkeyup=\"if (event.keyCode == 13) w2ui['"+this.name+"'].search(w2ui['"+this.name+"'].last_field, this.value); "+"					  w2ui['"+this.name+"']._focus_when_refreshed = true;\">"+"	</td>"+"	<td>"+'		<div title="Clear Search" class="w2ui-search-clear" id="grid_'+this.name+'_searchClear"  '+"			 onclick=\"var obj = w2ui['"+this.name+"']; obj.searchReset();\" "+"		>&nbsp;&nbsp;</div>"+"	</td>"+"</tr></table>";this.toolbar.items.push({type:"html",id:"search",html:d}),this.multiSearch&&this.searches.length>0&&this.toolbar.items.push({type:"button",id:"search-advanced",caption:"Search...",hint:"Open Search Fields"})}(this.show.toolbarAdd||this.show.toolbarDelete||this.show.toolbarSave)&&this.toolbar.items.push({type:"break",id:"break1"}),this.show.toolbarAdd&&this.toolbar.items.push({type:"button",id:"add",caption:"Add New",hint:"Add new record",img:"icon-add"}),this.show.toolbarDelete&&this.toolbar.items.push({type:"button",id:"delete-selected",caption:"Delete",hint:"Delete selected records",img:"icon-delete",disabled:!0}),this.show.toolbarSave&&((this.show.toolbarAdd||this.show.toolbarDelete)&&this.toolbar.items.push({type:"break",id:"break2"}),this.toolbar.items.push({type:"button",id:"save-changed",caption:"Save",hint:"Save changed records",img:"icon-save"}));for(var e in a)this.toolbar.items.push(a[e]);var f=this;this.toolbar.on("click",function(a,b){switch(a){case"refresh":f.reload();break;case"select-columns":for(var c in f.columns)f.columns[c].hidden?$("#grid_"+f.name+"_column_"+c+"_check").removeAttr("checked"):$("#grid_"+f.name+"_column_"+c+"_check").attr("checked",!0);for(var c in f.columns)f.columns[c].sizeOriginal!==void 0&&(f.columns[c].size=f.columns[c].sizeOriginal);f.initResize(),f.resize();break;case"add":f.doAdd();break;case"search-advanced":f.searchOpened||f.searchOpen();break;case"add-new":f.doAdd();break;case"delete-selected":f.doDelete();break;case"save-changed":f.doSave();break;default:"choice-"==a.substr(0,7)&&"object"!=typeof b&&(f.toolbar.set(a,{caption:f.toolbar.get(a).prepend+b}),"function"==typeof f.toolbar.get(a).param&&f.toolbar.get(a).param(a,b),"function"==typeof f.toolbar.get(a).onClick&&f.toolbar.get(a).onClick(a,b))}})}},initSearches:function(){function i(b){for(var c in a.searchData)if(a.searchData[c].field==b)return a.searchData[c];return null}var a=this;for(var b in this.searches){var c=this.searches[b],d=i(c.field);switch(c.type){case"alphaNumeric":case"text":$("#grid_"+this.name+"_operator_"+b).val("begins with");break;case"int":case"float":case"hex":case"money":case"date":$("#grid_"+this.name+"_field_"+b).w2field(c.type),$("#grid_"+this.name+"_field2_"+b).w2field(c.type);break;case"list":var e='<option value="">--</option>';for(var f in c.items)if($.isPlainObject(c.items[f])){var g=c.items[f].id,h=c.items[f].text;g===void 0&&c.items[f].value!==void 0&&(g=c.items[f].value),h===void 0&&c.items[f].caption!==void 0&&(h=c.items[f].caption),null==g&&(g=""),e+='<option value="'+g+'">'+h+"</option>"}else e+='<option value="'+c.items[f]+'">'+c.items[f]+"</option>";$("#grid_"+this.name+"_field_"+b).html(e)}null!=d&&($("#grid_"+this.name+"_operator_"+b).val(d.operator).trigger("change"),$.isArray(d.value)?($("#grid_"+this.name+"_field_"+b).val(d.value[0]).trigger("change"),$("#grid_"+this.name+"_field2_"+b).val(d.value[1]).trigger("change")):"udefined"!=typeof d.value&&$("#grid_"+this.name+"_field_"+b).val(d.value).trigger("change"))}$("#w2ui-global-searches *[rel=search]").on("keypress",function(b){13==b.keyCode&&a.search()})},initResize:function(){var a=this;$("#grid_"+this.name+" .w2ui-resizer").off("mousedown").off("click").each(function(a,b){var c=$(b).parent();$(b).css({height:c.height(),"margin-top":"-"+c.height()+"px","margin-left":c.width()-6+"px"})}).on("mousedown",function(b){b||(b=window.event),window.addEventListener||window.document.attachEvent("onselectstart",function(){return!1}),a.resizing=!0,a.tmp_x=b.screenX,a.tmp_y=b.screenY,a.tmp_col=$(this).attr("name"),b.stopPropagation(),b.preventDefault();for(var c in a.columns)a.columns[c].sizeOriginal===void 0&&(a.columns[c].sizeOriginal=a.columns[c].size),a.columns[c].size=a.columns[c].sizeCalculated;var d=function(b){1==a.resizing&&(b||(b=window.event),a.tmp_div_x=b.screenX-a.tmp_x,a.tmp_div_y=b.screenY-a.tmp_y,a.columns[a.tmp_col].size=parseInt(a.columns[a.tmp_col].size)+a.tmp_div_x+"px",a.resizeRecords(),a.tmp_x=b.screenX,a.tmp_y=b.screenY)},e=function(){delete a.resizing,$(window).off("mousemove",d),$(window).off("mouseup",e),a.resizeRecords()};$(window).on("mousemove",d),$(window).on("mouseup",e)}).on("click",function(a){a.stopPropagation(),a.preventDefault})},resizeBoxes:function(){var a=$("#grid_"+this.name),b=$("#grid_"+this.name+"_header"),c=$("#grid_"+this.name+"_toolbar"),d=$("#grid_"+this.name+"_summary"),e=$("#grid_"+this.name+"_footer"),f=$("#grid_"+this.name+"_body");$("#grid_"+this.name+"_columns"),$("#grid_"+this.name+"_records"),a.width(this.width).height(this.height),this.show.header&&b.css({top:"0px",left:"0px",right:"0px"}),this.show.toolbar&&c.css({top:0+(this.show.header?w2utils.getSize(b,"height"):0)+"px",left:"0px",right:"0px"}),this.show.footer&&e.css({bottom:"0px",left:"0px",right:"0px"}),""!=this.summary&&d.css({bottom:0+(this.show.footer?w2utils.getSize(e,"height"):0)+"px",left:"0px",right:"0px"}),f.css({top:0+(this.show.header?w2utils.getSize(b,"height"):0)+(this.show.toolbar?w2utils.getSize(c,"height"):0)+"px",bottom:0+(this.show.footer?w2utils.getSize(e,"height"):0)+(""!=this.summary?w2utils.getSize(d,"height"):0)+"px",left:"0px",right:"0px"})},resizeRecords:function(){$(".grid_"+this.name+"_empty_record").remove();var b=$(this.box),c=$("#grid_"+this.name),d=$("#grid_"+this.name+"_header"),e=$("#grid_"+this.name+"_toolbar"),f=$("#grid_"+this.name+"_summary"),g=$("#grid_"+this.name+"_footer"),h=$("#grid_"+this.name+"_body"),i=$("#grid_"+this.name+"_columns"),j=$("#grid_"+this.name+"_records");if(this.fixedBody){var k=c.height()-(this.show.header?w2utils.getSize(d,"height"):0)-(this.show.toolbar?w2utils.getSize(e,"height"):0)-("none"!=f.css("display")?w2utils.getSize(f,"height"):0)-(this.show.footer?w2utils.getSize(g,"height"):0);h.height(k)}else{var k=$("#grid_"+this.name+"_records > table:first-child").height()+i.height();this.height=k+w2utils.getSize(c,"+height")+(this.show.header?w2utils.getSize(d,"height"):0)+(this.show.toolbar?w2utils.getSize(e,"height"):0)+("none"!=f.css("display")?w2utils.getSize(f,"height"):0)+(this.show.footer?w2utils.getSize(g,"height"):0),c.height(this.height),h.height(k),b.height(w2utils.getSize(c,"height"))}if(h.height()-i.height()<$(j).find(":first-child").height())var l=!0;else l=!1;if(h.width()<$(j).find(":first-child").width())var m=!0;else m=!1;if(m||l?(j.css({top:(this.columnGroups.length>0?1:0)+w2utils.getSize(i,"height")+"px","-webkit-overflow-scrolling":"touch","overflow-x":m?"auto":"hidden","overflow-y":l?"auto":"hidden"}),$("#grid_"+this.name+"_cell_header_last").show()):(j.css({top:(this.columnGroups.length>0?1:0)+w2utils.getSize(i,"height")+"px",overflow:"hidden"}),j.length>0&&(this.last_scrollTop=0,this.last_scrollLeft=0),$("#grid_"+this.name+"_cell_header_last").hide()),this.show.emptyRecords&&!l){var n=0;if(""==this.url)for(var o=this.page*this.recordsPerPage,p=0;this.records.length>p;p++)if(this.records[p].hidden!==!0&&this.records[p].summary!==!0&&(o--,0>o)){n=p;break}for(var q=0,r=n;this.records.length>r;r++)this.records[r].hidden!==!0&&this.records[r].summary!==!0&&q++;for(var s="",t=q;100>t;t++){s+='<tr class="grid_'+this.name+"_empty_record "+(t%2?"w2ui-even":"w2ui-odd")+'">',this.show.lineNumbers&&(s+='<td class="w2ui-number"><div style="width: 24px;"></div></td>'),this.show.selectColumn&&(s+='<td class="w2ui-grid-data"><div style="width: 23px;"></div></td>'),this.show.expandColumn&&(s+='<td class="w2ui-grid-data"><div style="width: 23px;"></div></td>');for(var u=0;;){var v=this.columns[u];if(v.hidden){if(u++,this.columns[u]===void 0)break}else if(s+='<td class="w2ui-grid-data" '+(t==this.records.length?'id="grid_'+this.name+"_cell_"+t+"_"+u+'"':"")+(v.attr!==void 0?v.attr:"")+"><div></div></td>",u++,this.columns[u]===void 0)break}s+="</tr>"}$("#grid_"+this.name+"_records > table").append(s)}if(h.length>0){for(var w=parseInt(h.width())-(l?(navigator.userAgent+"").indexOf("AppleWebKit")>0?16:17:0)-(this.show.lineNumbers?25:0)-(this.show.selectColumn?25:0)-(this.show.expandColumn?25:0),x=w,y=0,z=!1,A=0;this.columns.length>A;A++){var v=this.columns[A];v.gridMinWidth!==void 0&&(v.gridMinWidth>x&&v.hidden!==!0&&(v.hidden=!0,z=!0),x>v.gridMinWidth&&v.hidden===!0&&(v.hidden=!1,z=!0))}if(z===!0)return this.refresh(),void 0;for(var A=0;this.columns.length>A;A++){var v=this.columns[A];v.hidden||("px"==(v.size+"").substr((v.size+"").length-2).toLowerCase()?(w-=parseFloat(v.size)+1,this.columns[A].sizeCalculated=v.size):(y+=parseFloat(v.size),delete v.sizeCorrected))}if(100!=y)for(var A=0;this.columns.length>A;A++){var v=this.columns[A];v.hidden||"px"!=(v.size+"").substr((v.size+"").length-2).toLowerCase()&&(v.sizeCorrected=Math.round(100*100*parseFloat(v.size)/y)/100+"%")}for(var A=0;this.columns.length>A;A++){var v=this.columns[A];v.hidden||"px"!=(v.size+"").substr((v.size+"").length-2).toLowerCase()&&(this.columns[A].sizeCalculated=this.columns[A].sizeCorrected!==void 0?Math.round(w*parseFloat(v.sizeCorrected)/100-1)+"px":Math.round(w*parseFloat(v.size)/100-1)+"px")}}for(var B=1,C=null,A=0;this.columns.length>A;A++){var v=this.columns[A];v.min===void 0&&(v.min=15),parseInt(v.sizeCalculated)<parseInt(v.min)&&(v.sizeCalculated=v.min+"px"),parseInt(v.sizeCalculated)>parseInt(v.max)&&(v.sizeCalculated=v.max+"px"),v.hidden||(B+=parseFloat(v.sizeCalculated)+1,C=v)}var D=parseInt(x)-parseInt(B)+1;D>0&&(C.sizeCalculated=parseInt(C.sizeCalculated)+D+"px",parseInt(C.sizeCalculated)<parseInt(C.min)&&(C.sizeCalculated=C.min+"px"),parseInt(C.sizeCalculated)>parseInt(C.max)&&(C.sizeCalculated=C.max+"px"));for(var A=0;this.columns.length>A;A++){var v=this.columns[A];if(!v.hidden){var E=$("#grid_"+this.name+"_cell_header_"+A+" > div:first-child");E.width(v.sizeCalculated),"columnGroup"==E.attr("name")&&E.find("div").css("padding","13px 3px");var n=0;if(""==this.url)for(var o=this.page*this.recordsPerPage,p=0;this.records.length>p;p++)if((!this.records[p]||!this.records[p].hidden)&&(o--,0>o)){n=p;break}for(var u=n;1e3>u;u++)if(!this.records[u]||!this.records[u].hidden){var F=$("#grid_"+this.name+"_cell_"+u+"_"+A+" > div:first-child");if(0==F.length)break;F.width(v.sizeCalculated)}}}this.initResize();var i=$("#grid_"+this.name+"_columns"),j=$("#grid_"+this.name+"_records");""!=this.last_scrollTop&&j.length>0&&(i.prop("scrollLeft",this.last_scrollLeft),j.prop("scrollTop",this.last_scrollTop),j.prop("scrollLeft",this.last_scrollLeft))},getSearchesHTML:function(){for(var a='<table cellspacing="0">',b=!1,c=0;this.searches.length>c;c++){var d=this.searches[c];
if(!d.hidden){var e="";if(0==b&&(e='<input type="button" value="X" onclick="obj = w2ui[\''+this.name+"']; if (obj) { obj.searchClose(); }\">",b=!0),d.inTag===void 0&&(d.inTag=""),d.outTag===void 0&&(d.outTag=""),d.type===void 0&&(d.type="text"),"text"==d.type)var f='<select id="grid_'+this.name+"_operator_"+c+'">'+'	<option value="is">is</option>'+'	<option value="begins with">begins with</option>'+'	<option value="contains">contains</option>'+'	<option value="ends with">ends with</option>'+"</select>";if("int"==d.type||"float"==d.type||"date"==d.type)var f='<select id="grid_'+this.name+"_operator_"+c+'" onchange="var el = $(\'#grid_'+this.name+"_range_"+c+"'); "+"					if ($(this).val() == 'is') el.hide(); else el.show();\">"+'	<option value="is">is</option>'+'	<option value="between">between</option>'+"</select>";if("list"==d.type)var f='is <input type="hidden" value="is" id="grid_'+this.name+"_operator_"+c+'">';switch(a+='<tr>	<td width="20px" style="padding-right: 20px">'+e+"</td>"+'	<td class="caption" style="border-right1: 0px">'+d.caption+"</td>"+'	<td class="caption" style="text-align: left; padding: 0px 10px;">'+f+"</td>"+'	<td class="value">',d.type){case"alphaNumeric":case"text":a+='<input rel="search" type="text" size="40" id="grid_'+this.name+"_field_"+c+'" name="'+d.field+'" '+d.inTag+">";break;case"int":case"float":case"hex":case"money":case"date":a+='<input rel="search" type="text" size="12" id="grid_'+this.name+"_field_"+c+'" name="'+d.field+'" '+d.inTag+">"+'<span id="grid_'+this.name+"_range_"+c+'" style="display: none">'+'&nbsp;-&nbsp;&nbsp;<input rel="search" type="text" size="12" id="grid_'+this.name+"_field2_"+c+'" name="'+d.field+'" '+d.inTag+">"+"</span>";break;case"list":a+='<select rel="search" id="grid_'+this.name+"_field_"+c+'" name="'+d.field+'" '+d.inTag+"></select>"}a+=d.outTag+"	</td>"+"</tr>"}}return a+='<tr>	<td colspan="4" class="caption" style="border-right: 0px; padding: 20px 0px 5px 0px !important; text-align: center;">		<input type="button" onclick="obj = w2ui[\''+this.name+'\']; if (obj) { obj.searchReset(); }" style="width: 60px; margin: 0px 2px;" value="Reset">'+'		<input type="button" onclick="obj = w2ui[\''+this.name+'\']; if (obj) { obj.search(); }" style="width: 60px; margin: 0px 2px;" value="Search">'+"	</td>"+"</tr></table>"},getColumnsHTML:function(){var a="";switch(this.layout){case"table":if(this.show.columnHeaders){if(this.columnGroups.length>0){""!=this.columnGroups[this.columnGroups.length-1].caption&&this.columnGroups.push({caption:""}),a+="<tr>",this.show.lineNumbers&&(a+='<td id="grid_'+this.name+'_cell_header_number" class="w2ui-head">'+'	<div style="cursor: default; overflow: hidden; width: 24px; text-align: center;">&nbsp;</div>'+"</td>"),this.show.selectColumn&&(a+='<td id="grid_'+this.name+'_cell_header_select" class="w2ui-head">'+'	<div style="cursor: default; overflow: hidden; width: 23px; text-align: center;">&nbsp;</div>'+"</td>"),this.show.expandColumn&&(a+='<td id="grid_'+this.name+'_cell_header_expand" class="w2ui-head">'+'<div style="cursor: default; overflow: hidden; width: 23px;">&nbsp;</div></td>');for(var b=0,c=0;this.columnGroups.length>c;c++){var d=this.columnGroups[c],e=this.columns[b];if((d.span===void 0||d.span!=parseInt(d.span))&&(d.span=1),d.colspan!==void 0&&(d.span=d.colspan),d.master===!0){var f="";for(var g in this.sortData)this.sortData[g].field==e.field&&("asc"==this.sortData[g].direction&&(f="w2ui-sort-down"),"desc"==this.sortData[g].direction&&(f="w2ui-sort-up"));var h="";1==e.resizable&&(h='<div class="w2ui-resizer" name="'+b+'" style="position: absolute; width: 6px; height: 12px; '+'		background-color: #e4e4e4; cursor: col-resize; padding: 0px; margin: 0px;"></div>'),a+='<td id="grid_'+this.name+"_cell_header_"+b+'" class="w2ui-head" rowspan="2"'+(e.sortable?"onclick=\"w2ui['"+this.name+"'].doSort('"+e.field+"', null, event);\"":"")+'		style="height: auto !important; '+(b==this.columns.length-1?"border-right: 1px solid transparent;":"")+'">'+'<div name="columnGroup"><div class="'+f+'" style="height: auto !important; text-align: center; cursor: default; width: 100%; overflow: hidden;">'+(""==e.caption?"&nbsp;":e.caption)+"</div></div>"+h+"</td>"}else a+='<td id="grid_'+this.name+"_cell_group_header_"+b+'" class="w2ui-head" '+'		colspan="'+(d.span+(c==this.columnGroups.length-1?1:0))+'" '+'		style="height: auto !important; text-align: center; '+(c==this.columns.length-1?"border-right: 1px solid transparent;":"")+'">'+'<div><div style="height: auto !important; cursor: default; width: 100% !important; overflow: hidden;">'+(""==d.caption?"&nbsp;":d.caption)+"</div></div>"+"</td>";b+=d.span}a+="</tr>"}a+="<tr>",this.show.lineNumbers&&(a+='<td id="grid_'+this.name+'_cell_header_number" class="w2ui-head">'+'	<div style="cursor: default; overflow: hidden; width: 24px; text-align: center;">#</div>'+"</td>"),this.show.selectColumn&&(a+='<td id="grid_'+this.name+'_cell_header_select" class="w2ui-head" onclick="event.stopPropagation();">'+'<div style="cursor: default; text-align: center; overflow: hidden; width: 23px; padding: 0px; margin: 0px;">'+'	<input type="checkbox" id="grid_'+this.name+'_check_all" tabIndex="-1"'+"		onclick=\"if (this.checked) w2ui['"+this.name+"'].selectPage(); "+"				 else w2ui['"+this.name+"'].selectNone(); event.stopPropagation();\" "+'		style="display: inline-block; margin: 6px 5px; padding: 0px;">'+"</div>"+"</td>"),this.show.expandColumn&&(a+='<td id="grid_'+this.name+'_cell_header_expand" class="w2ui-head">'+'<div style="cursor: default; overflow: hidden; width: 23px;">&nbsp;</div></td>');for(var b=0,i=0,c=0;this.columns.length>c;c++){var e=this.columns[c],d={};if(c==i&&(i+=this.columnGroups[b]!==void 0?parseInt(this.columnGroups[b].span):0,b++),this.columnGroups[b-1]!==void 0)var d=this.columnGroups[b-1];if(!e.hidden){var f="";for(var g in this.sortData)this.sortData[g].field==e.field&&("asc"==this.sortData[g].direction&&(f="w2ui-sort-down"),"desc"==this.sortData[g].direction&&(f="w2ui-sort-up"));if(d.master!==!0){var h="";1==e.resizable&&(h='<div class="w2ui-resizer" name="'+c+'" style="position: absolute; width: 6px; height: 12px; '+'		background-color: #e4e4e4; cursor: col-resize; padding: 0px; margin: 0px;"></div>'),a+='<td id="grid_'+this.name+"_cell_header_"+c+'" class="w2ui-head" '+(e.sortable?"onclick=\"w2ui['"+this.name+"'].doSort('"+e.field+"', null, event);\"":"")+'		style="height: auto !important; '+(c==this.columns.length-1?"border-right: 1px solid transparent;":"")+'">'+'<div><div class="'+f+'" style="height: auto !important; cursor: default; width: 100%; overflow: hidden;">'+e.caption+"</div></div>"+h+"</td>"}}}a+='<td id="grid_'+this.name+'_cell_header_last" class="w2ui-head" style="border-right: 0px; display: none;">'+'	<div style="width: 2000px; overflow: hidden;">&nbsp;</div></td>',a+="</tr>"}break;case"div":}return a},getRecordsHTML:function(){var a="",b="",c=0;switch(this.layout){case"table":if(0==this.records.length&&this.isLoaded&&!this.show.emptyRecords)a+='<tr><td colspan=100 style="padding: 10px; border: 0px;">'+this.msgNoData+"</div>";else{var d=0;if(""==this.url)for(var e=this.page*this.recordsPerPage,f=0;this.records.length>f;f++)if((!this.records[f]||!this.records[f].hidden)&&(e--,0>e)){d=f;break}for(var g=d,h=0,i=0;this.recordsPerPage>i&&this.records.length>g;g++){var j=this.records[g];if(j&&j.hidden!==!0){var k="";i++;var l="";j.style!==void 0&&(l+=j.style),k+=j.selected?'<tr id="grid_'+this.name+"_rec_"+j.recid+'" recid="'+j.recid+'" line="'+g+'" class="w2ui-selected" '+(this.isIOS?"    onclick 	 = \"w2ui['"+this.name+"'].doDblClick('"+j.recid+"', event);\" ":"    onclick     = \"var obj = w2ui['"+this.name+"']; var evnt = event; "+"					clearTimeout(obj._click_timer); "+"					obj._click_timer = setTimeout(function () { obj.doClick('"+j.recid+"', evnt); }, 1);\""+"    ondblclick  = \"w2ui['"+this.name+"'].doDblClick('"+j.recid+"', event);\" ")+(""!=l?'custom_style="'+l+'"':"")+">":'<tr id="grid_'+this.name+"_rec_"+j.recid+'" recid="'+j.recid+'" line="'+g+'" class="'+(0==h%2?"w2ui-odd":"w2ui-even")+'" '+(this.isIOS?"    onclick  	 = \"w2ui['"+this.name+"'].doDblClick('"+j.recid+"', event);\" ":"    onclick     = \"var obj = w2ui['"+this.name+"']; var evnt = event; "+"					clearTimeout(obj._click_timer); "+"					obj._click_timer = setTimeout(function () { obj.doClick('"+j.recid+"', evnt); }, 1);\""+"    ondblclick  = \"w2ui['"+this.name+"'].doDblClick('"+j.recid+"', event);\" ")+(""!=l?'custom_style="'+l+'" style="'+l+'"':"")+">",parseInt(this.page)*parseInt(this.recordsPerPage)+parseInt(g+1),this.show.lineNumbers&&(k+='<td id="grid_'+this.name+"_cell_"+g+'_number" class="w2ui-number">'+'	<div style="width: 24px; cursor: default; overflow: hidden;">'+(d+i)+"</div>"+"</td>"),this.show.selectColumn&&(k+='<td id="grid_'+this.name+"_cell_"+g+'_select" class="w2ui-grid-data" onclick="event.stopPropagation();">'+'<div style="cursor: default; text-align: center; overflow: hidden; width: 23px; padding: 0px; margin: 0px;">'+'	<input id="grid_'+this.name+"_cell_"+g+'_select_check" class="grid_select_check" type="checkbox" tabIndex="-1"'+'		style="display: inline-block; margin: 6px 5px; padding: 0px;" '+(j.selected?'checked="checked"':"")+"		onclick=\"var obj = w2ui['"+this.name+"']; if (!obj.multiSelect) { obj.selectNone(); }"+"			if (this.checked) obj.select('"+j.recid+"'); else obj.unselect('"+j.recid+"'); "+'			event.stopPropagation();">'+"</div>"+"</td>"),this.show.expandColumn&&(k+='<td id="grid_'+this.name+"_cell_"+g+'_expand" class="w2ui-grid-data">'+'	<div ondblclick="event.stopPropagation()" '+"		 onclick=\"w2ui['"+this.name+"'].doExpand("+j.recid+', event); event.stopPropagation();" '+'		 style="width: 23px; cursor: pointer; text-align: center; overflow: hidden; font-weight: bold;"> + </div>'+"</td>");for(var n=0;;){var o=this.columns[n];if(o.hidden){if(n++,this.columns[n]===void 0)break}else{var p="";if((o.field+"").indexOf(".")>-1){var q=(o.field+"").split(".");p=j[q[0]],"object"==typeof p&&null!=p&&(p=p[q[1]])}else p=j[o.field];if(o.render!==void 0&&("function"==typeof o.render&&(p=o.render.call(this,this.records[g],g)),"object"==typeof o.render&&(p=o.render[this.records[g][o.field]])),(null==p||p===void 0)&&(p=""),"string"==typeof o.render)switch(o.render.toLowerCase()){case"url":var r=p.indexOf("/",8);p='<a href="'+p+'" target="_blank">'+p.substr(0,r)+"</a>";break;case"repeat":g>0&&this.records[g][o.field]==this.records[g-1][o.field]&&""!=this.records[g][o.field]&&(p="-- // --")}if(k+='<td class="w2ui-grid-data" valign="top" id="grid_'+this.name+"_cell_"+g+"_"+n+'" '+'	style="cursor: default; padding: 0px; margin: 0px; '+(o.style!==void 0?o.style:"")+'" '+(o.attr!==void 0?o.attr:"")+">",this.fixedRecord)if($.isPlainObject(o.editable)){var s=o.editable;"enum"==s.type&&console.log("ERROR: Grid's inline editing does not support enum field type."),s.inTag===void 0&&(s.inTag=""),s.outTag===void 0&&(s.outTag=""),s.style===void 0&&(s.style=""),s.items===void 0&&(s.items=[]),k+=void 0!==j.editable&&j.editable!==!0||"enum"==s.type?'<div style="width: 100%; overflow: hidden;">'+p+"</div>":'<div style="width: 100%; overflow: hidden; margin: 0px; padding: 0px;"><input id="grid_'+this.name+"_edit_"+g+"_"+n+'" value="'+p+'" type="text" class="w2ui-editable" style="'+s.style+'" '+'	field="'+o.field+'" recid="'+j.recid+'" line="'+g+'" column="'+n+'" '+"	onclick = \"w2ui['"+this.name+"'].doEdit('click', this, event);\" "+"	onkeyup = \"w2ui['"+this.name+"'].doEdit('keyup', this, event);\" "+"	onfocus = \"w2ui['"+this.name+"'].doEdit('focus', this, event);\" "+"	onblur  = \"w2ui['"+this.name+"'].doEdit('blur', this, event);\" "+'	ondblclick = "event.stopPropagation(); this.select();" '+s.inTag+" >"+s.outTag+"</div>"}else k+='<div style="width: 100%; overflow: hidden;" title="'+(p+"").replace(/"/g,"''")+'">'+p+"</div>";else k+='<div style="width: 100%; height: auto; overflow: visible;">'+p+"</div>";if(k+="</td>",n++,this.columns[n]===void 0)break}}k+="</tr>",j.summary===!0?(b+=c%2?(k+"").replace("w2ui-odd","w2ui-even"):(k+"").replace("w2ui-even","w2ui-odd"),c++):a+=k,h++}}}}return this.summary=""!=b?'<table cellpadding="0" cellspacing="0" style="table-layout: fixed;">'+b+"</table>":"",a},getFooterHTML:function(){var a=Math.floor(this.total/this.recordsPerPage);(0!=this.total%this.recordsPerPage||0==a)&&a++,1>a&&(a=1);var b="<style> 	a.w2btn { display: inline-block; border-radius: 3px; cursor: pointer; font-size: 11px; line-height: 16px; padding: 0px 5px; width: 30px; height: 18px;} 	a.w2btn:hover { background-color: #AEC8FF; } </style>";return b+='<div style="width: 110px; margin: 0 auto; padding: 0px; text-align: center" class="w2ui-footer-nav">		<a class="w2btn" style="float: left;"   		onclick="w2ui[\''+this.name+"'].goto(w2ui['"+this.name+"'].page - 1)\" "+(0==this.page?"disabled":"")+"		> << </a>"+'		<input type="text" value="'+(this.page+1)+'" '+'			onclick="this.select();" style="width: 40px; padding: 1px 2px 2px 2px; text-align: center;" '+'			onkeyup="if (event.keyCode != 13) return;  '+"					  if (this.value < 1) this.value = 1; "+"					  w2ui['"+this.name+"'].goto(parseInt(this.value-1)); \"> "+'		<a class="w2btn" style="float: right;" '+"  		onclick=\"w2ui['"+this.name+"'].goto(w2ui['"+this.name+"'].page + 1)\" "+(this.page==a-1||0==a?"disabled":"")+"		> >> </a>"+"</div>"},showStatus:function(){var b=this;$("#grid_"+this.name).append('<div id="grid_'+this.name+'_lock" class="w2ui-grid-lock" style="position: absolute; display: none;"></div>'+'<div id="grid_'+this.name+'_status" class="w2ui-grid-status" style="position: absolute; display: none;"></div>'),setTimeout(function(){var a=$("#grid_"+b.name+"_lock"),c=$("#grid_"+b.name+"_status");c.data("old_opacity",c.css("opacity")).css("opacity","0").show(),a.data("old_opacity",a.css("opacity")).css("opacity","0").show(),setTimeout(function(){var d=($(b.box).width()-w2utils.getSize(c,"width"))/2,e=(.9*$(b.box).height()-w2utils.getSize(c,"height"))/2;a.css({opacity:a.data("old_opacity"),left:"0px",top:"0px",width:"100%",height:"100%"}),c.html("Refreshing...").css({opacity:c.data("old_opacity"),left:d+"px",top:e+"px"})},10)},10)},hideStatus:function(){var a=this;setTimeout(function(){$("#grid_"+a.name+"_lock").remove(),$("#grid_"+a.name+"_status").remove()},25)}},$.extend(w2grid.prototype,$.w2event)}(),function(){var a=function(a){this.box=null,this.name=null,this.panels=[],this.padding=1,this.spacer=4,this.style="",this.css="",this.width=null,this.height=null,this.onShow=null,this.onHide=null,this.onResizing=null,this.onRender=null,this.onRefresh=null,this.onResize=null,this.onDestroy=null,$.extend(!0,this,a)};$.fn.w2layout=function(b){if("object"==typeof b||!b){if(!b||b.name===void 0)return $.error('The parameter "name" is required but not supplied in $().w2layout().'),void 0;if(w2ui[b.name]!==void 0)return $.error('The parameter "name" is not unique. There are other objects already created with the same name (obj: '+b.name+")."),void 0;var c=b.panels,d=new a(b);$.extend(d,{handlers:[],panels:[]});for(var e in c)d.panels[e]=$.extend({},a.prototype.panel,c[e]);return $(this).length>0&&($(this).data("w2name",d.name),d.render($(this)[0])),w2ui[d.name]=d,d}if($(this).data("w2name")!==void 0){var f=w2ui[$(this).data("w2name")];return f[b].apply(f,Array.prototype.slice.call(arguments,1)),this}$.error("Method "+b+" does not exist on jQuery.w2layout")},a.prototype={panel:{type:null,size:100,minSize:20,hidden:!1,resizable:!1,overflow:"auto",style:"",content:"",width:null,height:null,onRefresh:null,onShow:null,onHide:null},add:function(a){$.isArray(a)||(a=[a]);for(var b in a){var c=$.extend({},c,a[b]);this.panels.push(c),this.refresh(c.type)}},remove:function(){var b=0;for(var c in arguments){var d=this.getIndex(arguments[c]);null!=d&&"main"!=this.panels[d].type&&(b++,this.panels.splice(d,1),this.resize())}return b},content:function(a,b,c){var d=this,e=this.get(a);if(null==e)return!1;if($("#layout_"+this.name+"_panel2_"+e.type).length>0)return!1;if($("#layout_"+this.name+"_panel_"+e.type).scrollTop(0),null==b||b===void 0)return e.content;if(""==e.content)e.content=b,e.hidden||this.refresh(a);else if(e.content=b,!e.hidden)if(null!=c&&""!=c&&c!==void 0)if("slide"==(c+"").substr(0,5)){var f="layout_"+this.name+"_panel_"+e.type,g=$("#"+f),h=g.html(),i=g[0].style.cssText;g.attr("id","layout_"+this.name+"_panel_"+e.type+"_trans"),g.html('<div id="'+f+'_old"></div><div id="'+f+'"></div>'),g.find("#"+f)[0].style.cssText=g[0].style.cssText+"; left: 0px !important; top: 0px !important; "+"-webkit-transition: 0s; -moz-transition: 0s; -ms-transition: 0s; -o-transition: 0s;",g.find("#"+f+"_old")[0].style.cssText=g[0].style.cssText+"; left: 0px !important; top: 0px !important; "+"-webkit-transition: 0s; -moz-transition: 0s; -ms-transition: 0s; -o-transition: 0s;",g[0].style.cssText+="border: 0px; margin: 0px; padding: 0px; outline: 0px; overflow: hidden;","object"==typeof b?(b.box=g.find("#"+f)[0],b.render()):g.find("#"+f).html(b),g.find("#"+f+"_old").html(h);var d=this;w2utils.transition(g.find("#"+f+"_old")[0],g.find("#"+f)[0],c,function(){var a=$("#layout_"+d.name+"_panel_"+e.type+"_trans");a.length>0&&(a[0].style.cssText=i,a.attr("id","layout_"+d.name+"_panel_"+e.type).html(a.find("#"+f).html())),window.navigator.userAgent.indexOf("MSIE")&&setTimeout(function(){d.resize()},100)})}else{$("#layout_"+this.name+"_panel_"+e.type).before('<div id="layout_'+this.name+"_panel2_"+e.type+'">'+b+"</div>"),$("#layout_"+this.name+"_panel2_"+e.type)[0].style.cssText=$("#layout_"+this.name+"_panel_"+e.type)[0].style.cssText,"object"==typeof b&&b.render($("#layout_"+this.name+"_panel2_"+e.type)[0]);var j=$("#layout_"+this.name+"_panel2_"+e.type)[0],k=$("#layout_"+this.name+"_panel_"+e.type)[0],d=this;w2utils.transition(k,j,c,function(){$("#layout_"+d.name+"_panel_"+e.type).remove(),$("#layout_"+d.name+"_panel2_"+e.type).attr("id","layout_"+d.name+"_panel_"+e.type),e.content=b,window.navigator.userAgent.indexOf("MSIE")&&setTimeout(function(){d.resize()},100)})}else e.hidden||this.refresh(a);window.navigator.userAgent.indexOf("MSIE")&&setTimeout(function(){d.resize()},100)},load:function(a,b,c,d){var e=this;$.get(b,function(b,f,g){e.content(a,g.responseText,c),d&&d(),window.navigator.userAgent.indexOf("MSIE")&&setTimeout(function(){e.resize()},100)})},show:function(a,b){var c=this.trigger({phase:"before",type:"show",target:a,panel:this.get(a),immediate:b});if(c.stop===!0)return!1;var d=this.get(a);if(null==d)return!1;if(d.hidden=!1,b===!0)$("#layout_"+this.name+" #layout_"+this.name+"_panel_"+a).css({opacity:"1"}),d.resizabled&&$("#layout_"+this.name+" #layout_"+this.name+"_splitter_"+a).show(),this.trigger($.extend(c,{phase:"after"})),this.resize();else{var e=this;d.resizabled&&$("#layout_"+e.name+" #layout_"+e.name+"_splitter_"+a).show(),$("#layout_"+e.name+" #layout_"+e.name+"_panel_"+a).css({opacity:"0"}),$("#layout_"+this.name+" .w2ui-panel").css({"-webkit-transition":".2s","-moz-transition":".2s","-ms-transition":".2s","-o-transition":".2s"}),setTimeout(function(){e.resize()},1),setTimeout(function(){$("#layout_"+e.name+" #layout_"+e.name+"_panel_"+a).css({opacity:"1"})},250),setTimeout(function(){$("#layout_"+e.name+" .w2ui-panel").css({"-webkit-transition":"0s","-moz-transition":"0s","-ms-transition":"0s","-o-transition":"0s"}),e.trigger($.extend(c,{phase:"after"})),e.resize()},500)}},hide:function(a,b){var c=this.trigger({phase:"before",type:"hide",target:a,panel:this.get(a),immediate:b});if(c.stop===!0)return!1;var d=this.get(a);if(null==d)return!1;if(d.hidden=!0,b===!0)$("#layout_"+this.name+" #layout_"+this.name+"_panel_"+a).css({opacity:"0"}),$("#layout_"+this.name+" #layout_"+this.name+"_splitter_"+a).hide(),this.trigger($.extend(c,{phase:"after"})),this.resize();else{var e=this;$("#layout_"+e.name+" #layout_"+e.name+"_splitter_"+a).hide(),$("#layout_"+this.name+" .w2ui-panel").css({"-webkit-transition":".2s","-moz-transition":".2s","-ms-transition":".2s","-o-transition":".2s"}),$("#layout_"+this.name+" #layout_"+this.name+"_panel_"+a).css({opacity:"0"}),setTimeout(function(){e.resize()},1),setTimeout(function(){$("#layout_"+e.name+" .w2ui-panel").css({"-webkit-transition":"0s","-moz-transition":"0s","-ms-transition":"0s","-o-transition":"0s"}),e.trigger($.extend(c,{phase:"after"})),e.resize()},500)}},toggle:function(a,b){var c=this.get(a);return null==c?!1:(c.hidden?this.show(a,b):this.hide(a,b),void 0)},set:function(a,b){var c=this.getIndex(a);return null==c?!1:($.extend(this.panels[c],b),this.refresh(a),!0)},get:function(a){var b=null;for(var c in this.panels)if(this.panels[c].type==a){b=this.panels[c];break}return b},getIndex:function(a){var b=null;for(var c in this.panels)if(this.panels[c].type==a){b=c;break}return b},render:function(b){window.getSelection&&window.getSelection().removeAllRanges();var c=this.trigger({phase:"before",type:"render",target:this.name,box:b});if(c.stop===!0)return!1;if(b!==void 0&&null!=b&&($(this.box).html(""),this.box=b),this.box){null==this.get("main")&&this.panels.push($.extend({},a.prototype.panel,{type:"main"})),null==this.get("css")&&this.panels.push($.extend({},a.prototype.panel,{type:"css"}));var d='<div id="layout_'+this.name+'" class="w2ui-layout" style="position: absolute; overflow: hidden; '+this.style+'"></div>';$(this.box).html(d);var e=["top","left","main","preview","right","bottom"];for(var f in e){var d='<div id="layout_'+this.name+"_panel_"+e[f]+'" class="w2ui-panel"'+'	style="position: absolute; z-index: 120; display: none;">'+"</div>"+'<div id="layout_'+this.name+"_splitter_"+e[f]+'" class="w2ui-splitter"'+'	style="position: absolute; z-index: 121; display: none;">'+"</div>";$("#layout_"+this.name).append(d)}$("#layout_"+this.name).append('<style id="layout_'+this.name+'_panel_css" style="position: absolute; top: 10000px;">'+this.css+"</style>"),this.trigger($.extend(c,{phase:"after"})),this.refresh(),this.initEvents()}},refresh:function(a){window.getSelection&&window.getSelection().removeAllRanges(),a===void 0&&(a=null);var b=this.trigger({phase:"before",type:"refresh",target:a!==void 0?a:this.name,panel:this.get(a)});if(b.stop===!0)return!1;if(null!=a&&a!==void 0){var c=this.get(a);if(null==c)return!1;var d=$("#layout_"+this.name+" #layout_"+this.name+"_panel_"+a).css({display:c.hidden?"none":"block",overflow:c.overflow});d.length>0&&(d[0].style.cssText+=c.style),"object"==typeof c.content&&c.content.render?c.content.render($("#layout_"+this.name+" #layout_"+this.name+"_panel_"+c.type)[0]):$("#layout_"+this.name+" #layout_"+this.name+"_panel_"+c.type).html(c.content)}else{if(0>=$("#layout_"+this.name+" #layout_"+this.name+"_panel_main").length)return this.render(),void 0;this.resize();for(var c in this.panels)this.refresh(this.panels[c].type)}return this.trigger($.extend(b,{phase:"after"})),!0},resize:function(a,b){if(window.getSelection&&window.getSelection().removeAllRanges(),this.box){var c=this.trigger({phase:"before",type:"resize",target:this.name,width:a,height:b});if(c.stop===!0)return!1;this.width=parseInt($(this.box).width()),this.height=parseInt($(this.box).height()),a!==void 0&&null!=a&&(this.width=parseInt(a)),b!==void 0&&null!=b&&(this.height=parseInt(b)),$("#layout_"+this.name).css({width:this.width+"px",height:this.height+"px"});var d=this,e=this.get("main"),f=this.get("preview"),g=this.get("left"),h=this.get("right"),i=this.get("top"),j=this.get("bottom"),l=null!=f&&1!=f.hidden?!0:!1,m=null!=g&&1!=g.hidden?!0:!1,n=null!=h&&1!=h.hidden?!0:!1,o=null!=i&&1!=i.hidden?!0:!1,p=null!=j&&1!=j.hidden?!0:!1;if(i&&"%"==(i.size+"").substr((i.size+"").length-1)&&(i.size=this.height*parseInt(i.size)/100),g&&"%"==(g.size+"").substr((g.size+"").length-1)&&(g.size=this.height*parseInt(g.size)/100),h&&"%"==(h.size+"").substr((h.size+"").length-1)&&(h.size=this.height*parseInt(h.size)/100),j&&"%"==(j.size+"").substr((j.size+"").length-1)&&(j.size=this.height*parseInt(j.size)/100),f&&"%"==(f.size+"").substr((f.size+"").length-1)&&(f.size=(this.height-(i&&!i.hidden?i.size:0)-(j&&!j.hidden?j.size:0))*parseInt(f.size)/100),i&&(i.size=parseInt(i.size)),g&&(g.size=parseInt(g.size)),f&&(f.size=parseInt(f.size)),h&&(h.size=parseInt(h.size)),j&&(j.size=parseInt(j.size)),null!=i&&1!=i.hidden){var q=0,r=0,s=this.width,t=i.size;$("#layout_"+this.name+" #layout_"+this.name+"_panel_top").css({display:"block",left:q+"px",top:r+"px",width:s+"px",height:t+"px"}).show(),i.width=s,i.height=t,i.resizable&&(r=i.size,t=this.spacer,$("#layout_"+this.name+" #layout_"+this.name+"_splitter_top").show().css({display:"block",left:q+"px",top:r+"px",width:s+"px",height:t+"px",cursor:"ns-resize"}).bind("mousedown",function(a){return w2ui[d.name].startResize("top",a),!1}))}else $("#layout_"+this.name+" #layout_"+this.name+"_panel_top").hide();if(null!=g&&1!=g.hidden){var q=0,r=0+(o?i.size+(i.resizable?this.spacer:this.padding):0),s=g.size,t=this.height-(o?i.size+(i.resizable?this.spacer:this.padding):0)-(p?j.size+(j.resizable?this.spacer:this.padding):0),u=$("#layout_"+this.name+" #layout_"+this.name+"_panel_left");window.navigator.userAgent.indexOf("MSIE")>0&&u.length>0&&u[0].clientHeight<u[0].scrollHeight&&(s+=17),$("#layout_"+this.name+" #layout_"+this.name+"_panel_left").css({display:"block",left:q+"px",top:r+"px",width:s+"px",height:t+"px"}).show(),g.width=s,g.height=t,g.resizable&&(q=g.size,s=this.spacer,$("#layout_"+this.name+" #layout_"+this.name+"_splitter_left").show().css({display:"block",left:q+"px",top:r+"px",width:s+"px",height:t+"px",cursor:"ew-resize"}).bind("mousedown",function(a){return w2ui[d.name].startResize("left",a),!1}))}else $("#layout_"+this.name+" #layout_"+this.name+"_panel_left").hide(),$("#layout_"+this.name+" #layout_"+this.name+"_splitter_left").hide();if(null!=h&&1!=h.hidden){var q=this.width-h.size,r=0+(o?i.size+(i.resizable?this.spacer:this.padding):0),s=h.size,t=this.height-(o?i.size+(i.resizable?this.spacer:this.padding):0)-(p?j.size+(j.resizable?this.spacer:this.padding):0);$("#layout_"+this.name+" #layout_"+this.name+"_panel_right").css({display:"block",left:q+"px",top:r+"px",width:s+"px",height:t+"px"}).show(),h.width=s,h.height=t,h.resizable&&(q-=this.spacer,s=this.spacer,$("#layout_"+this.name+" #layout_"+this.name+"_splitter_right").show().css({display:"block",left:q+"px",top:r+"px",width:s+"px",height:t+"px",cursor:"ew-resize"}).bind("mousedown",function(a){return w2ui[d.name].startResize("right",a),!1}))}else $("#layout_"+this.name+" #layout_"+this.name+"_panel_right").hide();if(null!=j&&1!=j.hidden){var q=0,r=this.height-j.size,s=this.width,t=j.size;$("#layout_"+this.name+" #layout_"+this.name+"_panel_bottom").css({display:"block",left:q+"px",top:r+"px",width:s+"px",height:t+"px"}).show(),j.width=s,j.height=t,j.resizable&&(r-=this.spacer,t=this.spacer,$("#layout_"+this.name+" #layout_"+this.name+"_splitter_bottom").show().css({display:"block",left:q+"px",top:r+"px",width:s+"px",height:t+"px",cursor:"ns-resize"}).bind("mousedown",function(a){return w2ui[d.name].startResize("bottom",a),!1}))}else $("#layout_"+this.name+" #layout_"+this.name+"_panel_bottom").hide();var q=0+(m?g.size+(g.resizable?this.spacer:this.padding):0),r=0+(o?i.size+(i.resizable?this.spacer:this.padding):0),s=this.width-(m?g.size+(g.resizable?this.spacer:this.padding):0)-(n?h.size+(h.resizable?this.spacer:this.padding):0),t=this.height-(o?i.size+(i.resizable?this.spacer:this.padding):0)-(p?j.size+(j.resizable?this.spacer:this.padding):0)-(l?f.size+(f.resizable?this.spacer:this.padding):0),u=$("#layout_"+this.name+" #layout_"+this.name+"_panel_main");if(window.navigator.userAgent.indexOf("MSIE")>0&&u.length>0&&u[0].clientHeight<u[0].scrollHeight&&(s+=17),$("#layout_"+this.name+" #layout_"+this.name+"_panel_main").css({display:"block",left:q+"px",top:r+"px",width:s+"px",height:t+"px"}),e.width=s,e.height=t,null!=f&&1!=f.hidden){var q=0+(m?g.size+(g.resizable?this.spacer:this.padding):0),r=this.height-(p?j.size+(j.resizable?this.spacer:this.padding):0)-f.size,s=this.width-(m?g.size+(g.resizable?this.spacer:this.padding):0)-(n?h.size+(h.resizable?this.spacer:this.padding):0),t=f.size,u=$("#layout_"+this.name+" #layout_"+this.name+"_panel_preview");window.navigator.userAgent.indexOf("MSIE")>0&&u.length>0&&u[0].clientHeight<u[0].scrollHeight&&(s+=17),$("#layout_"+this.name+" #layout_"+this.name+"_panel_preview").css({display:"block",left:q+"px",top:r+"px",width:s+"px",height:t+"px"}).show(),f.width=s,f.height=t,f.resizable&&(r-=this.spacer,t=this.spacer,$("#layout_"+this.name+" #layout_"+this.name+"_splitter_preview").show().css({display:"block",left:q+"px",top:r+"px",width:s+"px",height:t+"px",cursor:"ns-resize"}).bind("mousedown",function(a){return w2ui[d.name].startResize("preview",a),!1}))}else $("#layout_"+this.name+" #layout_"+this.name+"_panel_preview").hide();for(var v in this.panels){var w=this.panels[v];"object"==typeof w.content&&w.content.resize&&w.content.resize()}var d=this;clearTimeout(this._resize_timer),this._resize_timer=setTimeout(function(){for(var a in w2ui)"function"==typeof w2ui[a].resize&&w2ui[a].panels===void 0&&w2ui[a].resize()},200),this.trigger($.extend(c,{phase:"after"}))}},destroy:function(){var a=this.trigger({phase:"before",type:"destroy",target:this.name});return a.stop===!0?!1:($(this.box).html(""),delete w2ui[this.name],this.trigger($.extend(a,{phase:"after"})),void 0)},initEvents:function(){var a=this;$(window).on("resize",function(){w2ui[a.name].resize()}),$(window).on("mousemove",function(b){w2ui[a.name].doResize(b)}),$(window).on("mouseup",function(b){w2ui[a.name].stopResize(b)})},startResize:function(a,b){this.box&&(b||(b=window.event),window.addEventListener||window.document.attachEvent("onselectstart",function(){return!1}),this.tmp_resizing=a,this.tmp_x=b.screenX,this.tmp_y=b.screenY,("left"==a||"right"==a)&&(this.tmp_value=parseInt($("#layout_"+this.name+"_splitter_"+a)[0].style.left)),("top"==a||"preview"==a||"bottom"==a)&&(this.tmp_value=parseInt($("#layout_"+this.name+"_splitter_"+a)[0].style.top)))},doResize:function(a){if(this.box&&(a||(a=window.event),void 0!==this.tmp_resizing)){var b=this.get(this.tmp_resizing),c=this.trigger({phase:"before",type:"resizing",target:this.tmp_resizing,object:b,event:a});if(c.stop===!0)return!1;var d=$("#layout_"+this.name+"_splitter_"+this.tmp_resizing);switch(d.hasClass("active")||d.addClass("active"),this.tmp_div_x=a.screenX-this.tmp_x,this.tmp_div_y=a.screenY-this.tmp_y,"left"==this.tmp_resizing&&this.get("left").minSize-this.tmp_div_x>this.get("left").width&&(this.tmp_div_x=this.get("left").minSize-this.get("left").width),"left"==this.tmp_resizing&&this.get("main").minSize+this.tmp_div_x>this.get("main").width&&(this.tmp_div_x=this.get("main").width-this.get("main").minSize),"right"==this.tmp_resizing&&this.get("right").minSize+this.tmp_div_x>this.get("right").width&&(this.tmp_div_x=this.get("right").width-this.get("right").minSize),"right"==this.tmp_resizing&&this.get("main").minSize-this.tmp_div_x>this.get("main").width&&(this.tmp_div_x=this.get("main").minSize-this.get("main").width),"top"==this.tmp_resizing&&this.get("top").minSize-this.tmp_div_y>this.get("top").height&&(this.tmp_div_y=this.get("top").minSize-this.get("top").height),"top"==this.tmp_resizing&&this.get("main").minSize+this.tmp_div_y>this.get("main").height&&(this.tmp_div_y=this.get("main").height-this.get("main").minSize),"bottom"==this.tmp_resizing&&this.get("bottom").minSize+this.tmp_div_y>this.get("bottom").height&&(this.tmp_div_y=this.get("bottom").height-this.get("bottom").minSize),"bottom"==this.tmp_resizing&&this.get("main").minSize-this.tmp_div_y>this.get("main").height&&(this.tmp_div_y=this.get("main").minSize-this.get("main").height),"preview"==this.tmp_resizing&&this.get("preview").minSize+this.tmp_div_y>this.get("preview").height&&(this.tmp_div_y=this.get("preview").height-this.get("preview").minSize),"preview"==this.tmp_resizing&&this.get("main").minSize-this.tmp_div_y>this.get("main").height&&(this.tmp_div_y=this.get("main").minSize-this.get("main").height),this.tmp_resizing){case"top":case"preview":case"bottom":this.tmp_div_x=0,d.length>0&&(d[0].style.top=this.tmp_value+this.tmp_div_y+"px");
break;case"left":case"right":this.tmp_div_y=0,d.length>0&&(d[0].style.left=this.tmp_value+this.tmp_div_x+"px")}this.trigger($.extend(c,{phase:"after"}))}},stopResize:function(a){if(this.box&&(a||(a=window.event),window.addEventListener||window.document.attachEvent("onselectstart",function(){return!1}),void 0!==this.tmp_resizing)){var b=this.get(this.tmp_resizing);switch(this.tmp_resizing){case"top":b.size=parseInt(b.size)+this.tmp_div_y;break;case"preview":case"bottom":b.size=parseInt(b.size)-this.tmp_div_y;break;case"left":b.size=parseInt(b.size)+this.tmp_div_x;break;case"right":b.size=parseInt(b.size)-this.tmp_div_x}this.resize(),$("#layout_"+this.name+"_splitter_"+this.tmp_resizing).removeClass("active"),delete this.tmp_resizing}}},$.extend(a.prototype,$.w2event)}(),function(){$.fn.w2popup=function(a,b){a===void 0&&(b={},a="open"),$.isPlainObject(a)&&(b=a,a="open"),b===void 0&&(b={});var c={};return $(this).length>0&&($(this).find("div[rel=title]").length>0&&(c.title=$(this).find("div[rel=title]").html()),$(this).find("div[rel=body]").length>0&&(c.body=$(this).find("div[rel=body]").html()),$(this).find("div[rel=buttons]").length>0&&(c.buttons=$(this).find("div[rel=buttons]").html()),0!=parseInt($(this).css("width"))&&(c.width=parseInt($(this).css("width"))),0!=parseInt($(this).css("height"))&&(c.height=parseInt($(this).css("height"))),"undefined"!=$(this).css("overflow")+""&&(c.overflow=$(this).css("overflow"))),window.w2popup[a]($.extend({},c,b))},window.w2popup={defaults:{title:"",body:"",buttons:"",overflow:"auto",color:"#000",opacity:.4,speed:.3,modal:!1,width:500,height:300,showClose:!0,showMax:!1,transition:null,onUnlock:null,onOpen:null,onChange:null,onBeforeClose:null,onClose:null,onMax:null},open:function(a){var b=$("#w2ui-popup").data("options"),a=$.extend({},this.defaults,{body:"",renderTime:0,onOpen:null,onChange:null,onBeforeClose:null,onClose:null},b,a);if(void 0==window.innerHeight){var c=document.documentElement.offsetWidth,d=document.documentElement.offsetHeight;"IE7"==w2utils.engine&&(c+=21,d+=4)}else var c=window.innerWidth,d=window.innerHeight;parseInt(c)-10<parseInt(a.width)&&(a.width=parseInt(c)-10),parseInt(d)-10<parseInt(a.height)&&(a.height=parseInt(d)-10);var e=.8*((parseInt(d)-parseInt(a.height))/2),f=(parseInt(c)-parseInt(a.width))/2;if(0==$("#w2ui-popup").length){window.w2popup.lock($.extend({},a,{onMouseDown:a.modal?function(){$("#w2ui-lock").css({"-webkit-transition":".1s","-moz-transition":".1s","-ms-transition":".1s","-o-transition":".1s",opacity:"0.6"}),window.getSelection&&window.getSelection().removeAllRanges()}:null,onMouseUp:a.modal?function(){setTimeout(function(){$("#w2ui-lock").css({"-webkit-transition":".1s","-moz-transition":".1s","-ms-transition":".1s","-o-transition":".1s",opacity:a.opacity})},100),window.getSelection&&window.getSelection().removeAllRanges()}:function(){$().w2popup("close")},onClick:function(a){a.stopPropagation()}}));var g='<div id="w2ui-popup" class="w2ui-popup" style="position: '+("IE5"==w2utils.engine?"absolute":"fixed")+";"+"z-Index: 1200; width: "+parseInt(a.width)+"px; height: "+parseInt(a.height)+"px; opacity: 0; "+"-webkit-transform: scale(0.8); -moz-transform: scale(0.8); -ms-transform: scale(0.8); -o-transform: scale(0.8); "+"left: "+f+"px; top: "+e+'px;">';""!=a.title&&(g+='<div class="w2ui-msg-title">'+(a.showClose?'<div class="w2ui-msg-button w2ui-msg-close" onclick="$().w2popup(\'close\'); event.stopPropagation();">Close</div>':"")+(a.showMax?'<div class="w2ui-msg-button w2ui-msg-max" onclick="$().w2popup(\'max\')">Max</div>':"")+a.title+"</div>"),g+='<div class="w2ui-box1" style="'+(""==a.title?"top: 0px !important;":"")+(""==a.buttons?"bottom: 0px !important;":"")+'">',g+='<div class="w2ui-msg-body'+(""!=!a.title?" w2ui-msg-no-title":"")+(""!=!a.buttons?" w2ui-msg-no-buttons":"")+'" style="overflow: '+a.overflow+'">'+a.body+"</div>",g+="</div>",g+='<div class="w2ui-box2" style="'+(""==a.title?"top: 0px !important;":"")+(""==a.buttons?"bottom: 0px !important;":"")+'">',g+='<div class="w2ui-msg-body'+(""!=!a.title?" w2ui-msg-no-title":"")+(""!=!a.buttons?" w2ui-msg-no-buttons":"")+'" style="overflow: '+a.overflow+'"></div>',g+="</div>",""!=a.buttons&&(g+='<div class="w2ui-msg-buttons">'+a.buttons+"</div>"),g+="</div>",$("body").append(g),setTimeout(function(){$("#w2ui-popup .w2ui-box2").hide(),$("#w2ui-popup").css({"-webkit-transition":a.speed+"s opacity, "+a.speed+"s -webkit-transform","-webkit-transform":"scale(1)","-moz-transition":a.speed+"s opacity, "+a.speed+"s -moz-transform","-moz-transform":"scale(1)","-ms-transition":a.speed+"s opacity, "+a.speed+"s -ms-transform","-ms-transform":"scale(1)","-o-transition":a.speed+"s opacity, "+a.speed+"s -o-transform","-o-transform":"scale(1)",opacity:"1"})},1),setTimeout(function(){$("#w2ui-popup").css({"-webkit-transform":"","-moz-transform":"","-ms-transform":"","-o-transform":""}),"function"==typeof a.onOpen&&setTimeout(function(){a.onOpen()},1)},1e3*a.speed)}else{(b===void 0||b.width!=a.width||b.height!=a.height)&&($("#w2ui-panel").remove(),window.w2popup.resize(a.width,a.height)),$("#w2ui-popup .w2ui-box2 > .w2ui-msg-body").html(a.body).css("overflow",a.overflow),$("#w2ui-popup .w2ui-msg-buttons").html(a.buttons),$("#w2ui-popup .w2ui-msg-title").html((a.showClose?'<div class="w2ui-msg-button w2ui-msg-close" onclick="$().w2popup(\'close\')">Close</div>':"")+(a.showMax?'<div class="w2ui-msg-button w2ui-msg-max" onclick="$().w2popup(\'max\')">Max</div>':"")+a.title);var h=$("#w2ui-popup .w2ui-box1")[0],i=$("#w2ui-popup .w2ui-box2")[0];w2utils.transition(h,i,a.transition),i.className="w2ui-box1",h.className="w2ui-box2",$(i).addClass("w2ui-current-box"),$("#w2ui-popup").data("prev-size",null),setTimeout(function(){"function"==typeof a.onChange&&a.onChange()},1)}return $("#w2ui-popup").data("options",a),this.initMove(),this},close:function(a){var a=$.extend({},$("#w2ui-popup").data("options"),a);("function"!=typeof a.onBeforeClose||a.onBeforeClose()!==!1)&&($("#w2ui-popup, #w2ui-panel").css({"-webkit-transition":a.speed+"s opacity, "+a.speed+"s -webkit-transform","-webkit-transform":"scale(0.9)","-moz-transition":a.speed+"s opacity, "+a.speed+"s -moz-transform","-moz-transform":"scale(0.9)","-ms-transition":a.speed+"s opacity, "+a.speed+"s -ms-transform","-ms-transform":"scale(0.9)","-o-transition":a.speed+"s opacity, "+a.speed+"s -o-transform","-o-transform":"scale(0.9)",opacity:"0"}),window.w2popup.unlock({opacity:0,onFinish:a.onFinish?a.onFinish:null}),setTimeout(function(){$("#w2ui-popup").remove(),$("#w2ui-panel").remove()},1e3*a.speed),"function"==typeof a.onClose&&a.onClose())},max:function(){var a=$("#w2ui-popup").data("options");if($("#w2ui-panel").remove(),$("#w2ui-popup").data("prev-size")){var b=($("#w2ui-popup").data("prev-size")+"").split(":");$("#w2ui-popup").data("prev-size",null),window.w2popup.resize(b[0],b[1],function(){"function"==typeof a.onMax&&a.onMax()})}else $("#w2ui-popup").data("prev-size",$("#w2ui-popup").css("width")+":"+$("#w2ui-popup").css("height")),window.w2popup.resize(1e4,1e4,function(){"function"==typeof a.onMax&&a.onMax()})},get:function(){return $("#w2ui-popup").data("options")},clear:function(){$("#w2ui-popup .w2ui-msg-title").html(""),$("#w2ui-popup .w2ui-msg-body").html(""),$("#w2ui-popup .w2ui-msg-buttons").html("")},reset:function(){window.w2popup.open(window.w2popup.defaults)},load:function(a){function f(b,c){if($("body").append('<div id="w2ui-tmp" style="display: none">'+b+"</div>"),c!==void 0&&$("#w2ui-tmp #"+c).length>0?$("#w2ui-tmp #"+c).w2popup(a):$("#w2ui-tmp > div").w2popup(a),$("#w2ui-tmp > style").length>0){var d=$("<div>").append($("#w2ui-tmp > style").clone()).html();0==$("#w2ui-screenPopup #div-style").length&&$("#w2ui-screenPopup").append('<div id="div-style" style="position: absolute; left: -100; width: 1px"></div>'),$("#w2ui-screenPopup #div-style").html(d)}$("#w2ui-tmp").remove()}if("undefined"==a.url+"")return $.error("The url parameter is empty."),void 0;var b=(a.url+"").split("#"),c=b[0],d=b[1];"undefined"==a+""&&(a={});var e=$("#w2ui-popup").data(c);e!==void 0?f(e,d):$.post(c,function(a,b,e){f(e.responseText,d),$("#w2ui-popup").data(c,e.responseText)})},message:function(a){if($().w2tag(),10>parseInt(a.width)&&(a.width=10),10>parseInt(a.height)&&(a.height=10),a.hideOnClick===void 0&&(a.hideOnClick=!0),0==$("#w2ui-popup .w2ui-popup-message").length){var b=parseInt($("#w2ui-popup").width());$("#w2ui-popup .w2ui-box1 .w2ui-msg-body").append('<div class="w2ui-popup-message" style="position: absolute; top: 0px; display: none; '+(a.width!==void 0?"width: "+a.width+"px; left: "+(b-a.width)/2+"px;":"left: 10px; right: 10px;")+(a.height!==void 0?"height: "+a.height+"px;":"bottom: 6px;")+'-webkit-transition: .3s; -moz-transition: .3s; -ms-transition: .3s; -o-transition: .3s;"'+(a.hideOnClick===!0?"onclick=\"$().w2popup('message');\"":"")+">"+"</div>"),$("#w2ui-popup .w2ui-box1 .w2ui-msg-body").prop("scrollTop",0)}else a.width===void 0&&(a.width=w2utils.getSize($("#w2ui-popup .w2ui-popup-message"),"width")),a.height===void 0&&(a.height=w2utils.getSize($("#w2ui-popup .w2ui-popup-message"),"height"));var c=$("#w2ui-popup .w2ui-popup-message").css("display");$("#w2ui-popup .w2ui-popup-message").css({"-webkit-transform":"none"==c?"translateY(-"+a.height+"px)":"translateY(0px)","-moz-transform":"none"==c?"translateY(-"+a.height+"px)":"translateY(0px)","-ms-transform":"none"==c?"translateY(-"+a.height+"px)":"translateY(0px)","-o-transform":"none"==c?"translateY(-"+a.height+"px)":"translateY(0px)"}),"none"==c?($("#w2ui-popup .w2ui-popup-message").show().html(a.html),$("#w2ui-popup .w2ui-msg-buttons").fadeOut("slow"),"function"==typeof a.onOpen&&a.onOpen()):$("#w2ui-popup .w2ui-msg-buttons").fadeIn("slow"),setTimeout(function(){$("#w2ui-popup .w2ui-popup-message").css({"-webkit-transform":"none"==c?"translateY(0px)":"translateY(-"+a.height+"px)","-moz-transform":"none"==c?"translateY(0px)":"translateY(-"+a.height+"px)","-ms-transform":"none"==c?"translateY(0px)":"translateY(-"+a.height+"px)","-o-transform":"none"==c?"translateY(0px)":"translateY(-"+a.height+"px)"})},1),setTimeout(function(){"none"!=c&&($("#w2ui-popup .w2ui-popup-message").remove(),"function"==typeof a.onClose&&a.onClose())},300)},lock:function(a){if($("#w2ui-lock").length>0)return!1;var a=$.extend({},{onUnlock:null,onMouseDown:null,onMouseUp:null},a);return $("body").append('<div id="w2ui-lock" onmousewheel="event.stopPropagation(); event.preventDefault()"	style="position: '+("IE5"==w2utils.engine?"absolute":"fixed")+"; z-Index: 1199; left: 0px; top: 0px; "+"		   padding: 0px; margin: 0px; background-color: "+a.color+'; width: 100%; height: 100%; opacity: 0;"></div>'),setTimeout(function(){$("#w2ui-lock").css({"-webkit-transition":a.speed+"s opacity","-moz-transition":a.speed+"s opacity","-ms-transition":a.speed+"s opacity","-o-transition":a.speed+"s opacity",opacity:a.opacity}),$("body, body *").css({})},1),"function"==typeof a.onMouseDown&&$("#w2ui-lock").bind("mousedown",a.onMouseDown),"function"==typeof a.onMouseUp&&$("#w2ui-lock").bind("mouseup",a.onMouseUp),!0},unlock:function(a){if(0==$("#w2ui-lock").length)return!1;var a=$.extend({},$("#w2ui-popup").data("options"),a);return $("#w2ui-lock").css({"-webkit-transition":a.speed+"s opacity","-moz-transition":a.speed+"s opacity","-ms-transition":a.speed+"s opacity","-o-transition":a.speed+"s opacity",opacity:a.opacity}),$("body, body *").css({}),setTimeout(function(){$("#w2ui-lock").remove(),"function"==typeof a.onUnlock&&a.onUnlock()},1e3*a.speed),!0},initMove:function(){var a=this;$("#w2ui-popup .w2ui-msg-title").on("mousedown",function(){a.startMove.apply(a,arguments)}).on("mousemove",function(){a.doMove.apply(a,arguments)}).on("mouseup",function(){a.stopMove.apply(a,arguments)}),$("#w2ui-popup .w2ui-msg-body").on("mousemove",function(){a.doMove.apply(a,arguments)}).on("mouseup",function(){a.stopMove.apply(a,arguments)}),$("#w2ui-lock").on("mousemove",function(){a.doMove.apply(a,arguments)}).on("mouseup",function(){a.stopMove.apply(a,arguments)})},resize:function(a,b,c){var d=$("#w2ui-popup").data("options");parseInt($(window).width())-10<parseInt(a)&&(a=parseInt($(window).width())-10),parseInt($(window).height())-10<parseInt(b)&&(b=parseInt($(window).height())-10);var e=.8*((parseInt($(window).height())-parseInt(b))/2),f=(parseInt($(window).width())-parseInt(a))/2;$("#w2ui-popup").css({"-webkit-transition":d.speed+"s width, "+d.speed+"s height, "+d.speed+"s left, "+d.speed+"s top","-moz-transition":d.speed+"s width, "+d.speed+"s height, "+d.speed+"s left, "+d.speed+"s top","-ms-transition":d.speed+"s width, "+d.speed+"s height, "+d.speed+"s left, "+d.speed+"s top","-o-transition":d.speed+"s width, "+d.speed+"s height, "+d.speed+"s left, "+d.speed+"s top",top:e,left:f,width:a,height:b}),"function"==typeof c&&setTimeout(function(){c()},1e3*d.speed)},startMove:function(a){a||(a=window.event),window.addEventListener||window.document.attachEvent("onselectstart",function(){return!1}),this.resizing=!0,this.tmp_x=a.screenX,this.tmp_y=a.screenY,a.stopPropagation(),a.preventDefault()},doMove:function(a){1==this.resizing&&(a||(a=window.event),this.tmp_div_x=a.screenX-this.tmp_x,this.tmp_div_y=a.screenY-this.tmp_y,$("#w2ui-popup").css({"-webkit-transition":"none","-webkit-transform":"translate3d("+this.tmp_div_x+"px, "+this.tmp_div_y+"px, 0px)","-moz-transition":"none","-moz-transform":"translate("+this.tmp_div_x+"px, "+this.tmp_div_y+"px)","-ms-transition":"none","-ms-transform":"translate("+this.tmp_div_x+"px, "+this.tmp_div_y+"px)","-o-transition":"none","-o-transform":"translate("+this.tmp_div_x+"px, "+this.tmp_div_y+"px)"}),$("#w2ui-panel").css({"-webkit-transition":"none","-webkit-transform":"translate3d("+this.tmp_div_x+"px, "+this.tmp_div_y+"px, 0px)","-moz-transition":"none","-moz-transform":"translate("+this.tmp_div_x+"px, "+this.tmp_div_y+"px)","-ms-transition":"none","-ms-transform":"translate("+this.tmp_div_x+"px, "+this.tmp_div_y+"px","-o-transition":"none","-o-transform":"translate("+this.tmp_div_x+"px, "+this.tmp_div_y+"px)"}))},stopMove:function(a){1==this.resizing&&(a||(a=window.event),this.tmp_div_x=a.screenX-this.tmp_x,this.tmp_div_y=a.screenY-this.tmp_y,$("#w2ui-popup").css({"-webkit-transition":"none","-webkit-transform":"translate3d(0px, 0px, 0px)","-moz-transition":"none","-moz-transform":"translate(0px, 0px)","-ms-transition":"none","-ms-transform":"translate(0px, 0px)","-o-transition":"none","-o-transform":"translate(0px, 0px)",left:parseInt($("#w2ui-popup").css("left"))+parseInt(this.tmp_div_x)+"px",top:parseInt($("#w2ui-popup").css("top"))+parseInt(this.tmp_div_y)+"px"}),$("#w2ui-panel").css({"-webkit-transition":"none","-webkit-transform":"translate3d(0px, 0px, 0px)","-moz-transition":"none","-moz-transform":"translate(0px, 0px)","-ms-transition":"none","-ms-transform":"translate(0px, 0px)","-o-transition":"none","-o-transform":"translate(0px, 0px)",left:parseInt($("#w2ui-panel").css("left"))+parseInt(this.tmp_div_x)+"px",top:parseInt($("#w2ui-panel").css("top"))+parseInt(this.tmp_div_y)+"px"}),delete this.resizing)}},window.w2alert=function(a,b){b===void 0&&(b="Notification"),$().w2popup({width:350,height:160,title:b,body:'<div style="padding: 12px; padding-right: 24px; text-align: center">'+a+"</div>",buttons:'<input type="button" value="Ok" style="width: 60px" onclick="$().w2popup(\'close\');">'}),$("#w2ui-screenPopup #btnYes").on("click",function(){$().w2popup("close"),"function"==typeof callBack&&callBack()})},window.w2confirm=function(a,b,c){(c===void 0||"function"==typeof b)&&(c=b,b="Confirmation"),b===void 0&&(b="Confirmation"),$().w2popup({width:350,height:160,title:b,body:'<div style="padding: 12px; padding-right: 24px; text-align: center">'+a+"</div>",buttons:'<input id="buttonNo" type="button" value="No" style="width: 60px; margin-right: 5px">&nbsp;<input id="buttonYes" type="button" value="Yes" style="width: 60px">'}),$("#w2ui-screenPopup #buttonNo").on("click",function(){$().w2popup("close")}),$("#w2ui-screenPopup #buttonYes").on("click",function(){$().w2popup("close"),"function"==typeof c&&c()})}}(),function(){var a=function(a){this.box=null,this.name=null,this.active=null,this.tabs=[],this.right="",this.style="",this.onClick=null,this.onClose=null,this.onRender=null,this.onRefresh=null,this.onResize=null,this.onDestroy=null,$.extend(!0,this,a)};$.fn.w2tabs=function(b){if("object"==typeof b||!b){if(!b||b.name===void 0)return $.error('The parameter "name" is required but not supplied in $().w2tabs().'),void 0;if(w2ui[b.name]!==void 0)return $.error('The parameter "name" is not unique. There are other objects already created with the same name (obj: '+b.name+")."),void 0;var c=b.tabs,d=new a(b);$.extend(d,{tabs:[],handlers:[]});for(var e in c)d.tabs[e]=$.extend({},a.prototype.tab,c[e]);return 0!=$(this).length&&(d.box=$(this)[0],$(this).data("w2name",d.name),d.render()),w2ui[d.name]=d,d}if($(this).data("w2name")!==void 0){var f=w2ui[$(this).data("w2name")];return f[b].apply(f,Array.prototype.slice.call(arguments,1)),this}$.error("Method "+b+" does not exist on jQuery.w2tabs")},a.prototype={tab:{id:null,caption:"",hidden:!1,disabled:!1,closable:!1,hint:"",onClick:null,onRefresh:null,onClose:null},add:function(a){return this.insert(null,a)},insert:function(a,b){$.isArray(b)||(b=[b]);for(var c in b){if("undefined"==b[c].id+"")return $.error('The parameter "id" is required but not supplied. (obj: '+this.name+")"),void 0;var d=!0;for(var e in this.tabs)if(this.tabs[e].id==b[c].id){d=!1;break}if(!d)return $.error('The parameter "id='+b[c].id+'" is not unique within the current tabs. (obj: '+this.name+")"),void 0;if(!w2utils.isAlphaNumeric(b[c].id))return $.error('The parameter "id='+b[c].id+'" must be alpha-numeric + "-_". (obj: '+this.name+")"),void 0;var b=$.extend({},b,b[c]);if(null==a||a===void 0)this.tabs.push(b);else{var f=this.getIndex(a);this.tabs=this.tabs.slice(0,f).concat([b],this.tabs.slice(f))}this.refresh(b[c].id)}},remove:function(){var b=0;for(var c in arguments){var d=this.get(arguments[c]);if(!d)return!1;b++,this.tabs.splice(this.getIndex(d.id),1),$(this.box).find(".w2ui-tabs #tabs_"+this.name+"_tab_"+d.id).remove()}return b},set:function(a,b){var b=this.getIndex(a);return null==b?!1:($.extend(this.tabs[b],b),this.refresh(a),!0)},get:function(a){var b=null;for(var c in this.tabs)if(this.tabs[c].id==a){b=this.tabs[c];break}return b},getIndex:function(a){var b=null;for(var c in this.tabs)if(this.tabs[c].id==a){b=c;break}return b},show:function(){var a=0;for(var b in arguments){var c=this.get(arguments[b]);c&&c.hidden!==!1&&(c.hidden=!1,this.refresh(c.id),a++)}return a},hide:function(){var a=0;for(var b in arguments){var c=this.get(arguments[b]);c&&c.hidden!==!0&&(c.hidden=!0,this.refresh(c.id),a++)}return a},enable:function(){var b=0;for(var c in arguments){var d=this.get(arguments[c]);d&&d.disabled!==!1&&(d.disabled=!1,this.refresh(d.id),b++)}return b},disable:function(){var b=0;for(var c in arguments){var d=this.get(arguments[c]);d&&d.disabled!==!0&&(d.disabled=!0,this.refresh(d.id),b++)}return b},refresh:function(a){if(window.getSelection&&window.getSelection().removeAllRanges(),"undefined"==a+"")for(var b in this.tabs)this.refresh(this.tabs[b].id);var c=this.trigger({phase:"before",type:"refresh",target:a!==void 0?a:this.name,tab:this.get(a)});if(c.stop===!0)return!1;var d=this.get(a);if(null!=d){var e=$(this.box).find(".w2ui-tabs #tabs_"+this.name+"_tab_"+d.id),f=(d.closable?'<div class="w2ui-tab-close" onclick="w2ui[\''+this.name+"'].doClose('"+d.id+"', event);\"></div>":"")+'	<div class="w2ui-tab '+(this.active==d.id?"active":"")+'" title="'+(d.hint!==void 0?d.hint:"")+'"'+"		onclick=\"w2ui['"+this.name+"'].doClick('"+d.id+"', event);\">"+d.caption+"</div>";if(0==e.length){var g="";d.hidden&&(g+="display: none;"),d.disabled&&(g+="opacity: 0.2; -moz-opacity: 0.2; -webkit-opacity: 0.2; -o-opacity: 0.2; filter:alpha(opacity=20);"),html='<td id="tabs_'+this.name+"_tab_"+d.id+'" style="'+g+'" valign="middle">'+f+"</td>",this.getIndex(a)!=this.tabs.length-1&&$(this.box).find(".w2ui-tabs #tabs_"+this.name+"_tab_"+this.tabs[parseInt(this.getIndex(a))+1].id).length>0?$(this.box).find(".w2ui-tabs #tabs_"+this.name+"_tab_"+this.tabs[parseInt(this.getIndex(a))+1].id).before(html):$(this.box).find(".w2ui-tabs #tabs_"+this.name+"_right").before(html)}else e.html(f),d.hidden?e.css("display","none"):e.css("display",""),d.disabled?e.css({opacity:"0.2","-moz-opacity":"0.2","-webkit-opacity":"0.2","-o-opacity":"0.2",filter:"alpha(opacity=20)"}):e.css({opacity:"1","-moz-opacity":"1","-webkit-opacity":"1","-o-opacity":"1",filter:"alpha(opacity=100)"});this.trigger($.extend(c,{phase:"after"}))}},render:function(a){var b=this.trigger({phase:"before",type:"render",target:this.name,box:a});if(b.stop===!0)return!1;if(window.getSelection&&window.getSelection().removeAllRanges(),"undefined"!=a+""&&null!=a&&($(this.box).html(""),this.box=a),this.box){$(this.box).html("");var c='<div id="tabs_'+this.name+'" class="w2ui-reset w2ui-tabs" style="'+this.style+'">'+'	<table cellspacing="0" cellpadding="1" width="100%">'+'		<tr><td width="100%" id="tabs_'+this.name+'_right" align="right">'+this.right+"</td></tr>"+"	</table>"+"</div>";$(this.box).append(c),this.trigger($.extend(b,{phase:"after"})),this.refresh()}},resize:function(){window.getSelection&&window.getSelection().removeAllRanges();var c=this.trigger({phase:"before",type:"resize",target:this.name});return c.stop===!0?!1:(this.trigger($.extend(c,{phase:"after"})),void 0)},destroy:function(){var a=this.trigger({phase:"before",type:"destroy",target:this.name});return a.stop===!0?!1:($(this.box).html(""),delete w2ui[this.name],this.trigger($.extend({phase:"after"})),void 0)},doClick:function(a,b){var c=this.get(a);if(null==c||c.disabled)return!1;var d=this.trigger({phase:"before",type:"click",target:a,tab:this.get(a),event:b});return d.stop===!0?!1:($(this.box).find("#tabs_"+this.name+"_tab_"+this.active+" .w2ui-tab").removeClass("active"),this.active=c.id,this.trigger($.extend(d,{phase:"after"})),this.refresh(a),void 0)},doClose:function(a,b){var c=this.get(a);if(null==c||c.disabled)return!1;var d=this.trigger({phase:"before",type:"close",target:a,tab:this.get(a),event:b});if(d.stop===!0)return!1;var e=this;$(this.box).find(".w2ui-tabs #tabs_"+this.name+"_tab_"+c.id).css({"-webkit-transition":".2s","-moz-transition":"2s","-ms-transition":".2s","-o-transition":".2s",opacity:"0"}),setTimeout(function(){var a=$(e.box).find(".w2ui-tabs #tabs_"+e.name+"_tab_"+c.id).width();$(e.box).find(".w2ui-tabs #tabs_"+e.name+"_tab_"+c.id).html('<div style="width: '+a+'px; -webkit-transition: .2s; -moz-transition: .2s; -ms-transition: .2s; -o-transition: .2s"></div>'),setTimeout(function(){$(e.box).find(".w2ui-tabs #tabs_"+e.name+"_tab_"+c.id).find(":first-child").css({width:"0px"})},50)},200),setTimeout(function(){e.remove(a)},450),this.trigger($.extend(d,{phase:"after"})),this.refresh()},doInsert:function(a,b){if(null!=this.get(a)&&$.isPlainObject(b)){var c=!0;for(var d in this.tabs)if(this.tabs[d].id==b.id){c=!1;break}if(!c)return $.error('The parameter "id='+b.id+'" is not unique within the current tabs. (obj: '+this.name+")"),void 0;var e=$(this.box).find(".w2ui-tabs #tabs_"+this.name+"_tab_"+b.id);if(0==e.length){var f='<div id="_tmp_tabs" class="w2ui-reset w2ui-tabs" style="position: absolute; top: -1000px;"><table cellspacing="0" cellpadding="1" width="100%"><tr><td id="_tmp_simple_tab" style="" valign="middle">'+(b.closable?'<div class="w2ui-tab-close"></div>':"")+'	<div class="w2ui-tab '+(this.active==b.id?"active":"")+'">'+b.caption+"</div>"+"</td></tr></table>"+"</div>";$("body").append(f),tabHTML='<div style="width: 1px; -webkit-transition: 0.2s; -moz-transition: 0.2s; -ms-transition: 0.2s; -o-transition: 0.2s;">&nbsp;</div>';var g="";b.hidden&&(g+="display: none;"),b.disabled&&(g+="opacity: 0.2; -moz-opacity: 0.2; -webkit-opacity: 0.2; -o-opacity: 0.2; filter:alpha(opacity=20);"),html='<td id="tabs_'+this.name+"_tab_"+b.id+'" style="'+g+'" valign="middle">'+tabHTML+"</td>",this.getIndex(a)!=this.tabs.length&&$(this.box).find(".w2ui-tabs #tabs_"+this.name+"_tab_"+this.tabs[parseInt(this.getIndex(a))].id).length>0?$(this.box).find(".w2ui-tabs #tabs_"+this.name+"_tab_"+this.tabs[parseInt(this.getIndex(a))].id).before(html):$(this.box).find(".w2ui-tabs #tabs_"+this.name+"_right").before(html);var h=this;setTimeout(function(){var a=$("#_tmp_simple_tab").width();$("#_tmp_tabs").remove(),$("#tabs_"+h.name+"_tab_"+b.id+" > div").css("width",a+"px")},1),setTimeout(function(){h.insert(a,b)},200)}}}},$.extend(a.prototype,$.w2event)}(),function(){var a=function(a){this.box=null,this.name=null,this.items=[],this.right="",this.onClick=null,this.onRender=null,this.onRefresh=null,this.onResize=null,this.onDestroy=null,$.extend(!0,this,a)};$.fn.w2toolbar=function(b){if("object"==typeof b||!b){if(!b||b.name===void 0)return $.error('The parameter "name" is required but not supplied in $().w2toolbar().'),void 0;if(w2ui[b.name]!==void 0)return $.error('The parameter "name" is not unique. There are other objects already created with the same name (obj: '+b.name+")."),void 0;var c=b.items,d=new a(b);$.extend(d,{items:[],handlers:[]});for(var e in c)d.items[e]=$.extend({},a.prototype.item,c[e]);return 0!=$(this).length&&(d.box=$(this)[0],$(this).data("w2name",d.name),d.render()),w2ui[d.name]=d,d}if($(this).data("w2name")!==void 0){var f=w2ui[$(this).data("w2name")];return f[b].apply(f,Array.prototype.slice.call(arguments,1)),this}$.error("Method "+b+" does not exist on jQuery.w2toolbar")},a.prototype={item:{id:null,type:"button",caption:"",html:"",img:"",hidden:!1,disabled:!1,arrow:!0,hint:"",group:null,items:null,checked:!1,onClick:null},add:function(a){this.insert(null,a)},insert:function(b,c){$.isArray(c)||(c=[c]);for(var d in c){if(c[d].type===void 0)return $.error('The parameter "type" is required but not supplied in w2toolbar.add() method.'),void 0;if(-1==$.inArray(c[d].type+"",["button","check","radio","drop","menu","break","html","spacer"]))return $.error('The parameter "type" should be one of the following [button, check, radio, drop, menu, break, html, spacer] in w2toolbar.add() method.'),void 0;if(c[d].id===void 0)return $.error('The parameter "id" is required but not supplied in w2toolbar.add() method.'),void 0;for(var e=!0,f=0;this.items.length>f;f++)if(this.items[f].id==c[d].id)return e=!1,void 0;if(!e)return $.error('The parameter "id" is not unique within the current toolbar.'),void 0;if(!w2utils.isAlphaNumeric(c[d].id))return $.error('The parameter "id" must be alpha-numeric + "-_".'),void 0;var g=$.extend({},a.prototype.item,c[d]);if(null==b||b===void 0)this.items.push(g);else{var h=this.getIndex(b);this.items=this.items.slice(0,h).concat([g],this.items.slice(h))}this.refresh(c[d].id)}},remove:function(){var b=0;for(var c in arguments){var d=this.get(arguments[c]);if(d){b++,$(this.box).find(".w2ui-toolbar #"+this.name+"_item_"+d.id).remove();var e=this.getIndex(d.id);e&&this.items.splice(e,1)}}return b},set:function(a,b){var c=this.getIndex(a);return null==c?!1:($.extend(this.items[c],b),this.refresh(a),!0)},get:function(a){for(var b=null,c=0;this.items.length>c;c++)if(this.items[c].id==a){b=this.items[c];break}return b},getIndex:function(a){for(var b=null,c=0;this.items.length>c;c++)if(this.items[c].id==a)return c;return b},show:function(){var b=0;for(var c in arguments){var d=this.get(arguments[c]);d&&(b++,d.hidden=!1,this.refresh(d.id))}return b},hide:function(){var b=0;for(var c in arguments){var d=this.get(arguments[c]);d&&(b++,d.hidden=!0,this.refresh(d.id))}return b},enable:function(){var b=0;for(var c in arguments){var d=this.get(arguments[c]);d&&(b++,d.disabled=!1,this.refresh(d.id))}return b},disable:function(){var b=0;for(var c in arguments){var d=this.get(arguments[c]);d&&(b++,d.disabled=!0,this.refresh(d.id))}return b},check:function(){var b=0;for(var c in arguments){var d=this.get(arguments[c]);d&&(b++,d.checked=!0,this.refresh(d.id))}return b},uncheck:function(){var b=0;for(var c in arguments){var d=this.get(arguments[c]);d&&(b++,d.checked=!1,this.refresh(d.id))}return b},render:function(a){var b=this.trigger({phase:"before",type:"render",target:this.name,box:a});if(b.stop===!0)return!1;if(a!==void 0&&null!=a&&($(this.box).html(""),this.box=a),this.box){$(this.box).html("");for(var c='<div id="'+this.name+'_toolbar" class="w2ui-reset w2ui-toolbar">'+'<table cellspacing="0" cellpadding="0" width="100%">'+"<tr>",d=0;this.items.length>d;d++){var e=this.items[d];if(null!=e){var f="";e.hidden&&(f+="display: none;"),e.disabled&&(f+="opacity: 0.2; -moz-opacity: 0.2; -webkit-opacity: 0.2; -o-opacity: 0.2; filter:alpha(opacity=20);"),c+="spacer"==e.type?'<td width="100%" id="'+this.name+"_item_"+e.id+'" align="right"></td>':'<td id="'+this.name+"_item_"+e.id+'" style="'+f+'" valign="middle">'+this.getItemHTML(e)+"</td>"}}c+='<td width="100%" id="'+this.name+'_right" align="right">'+this.right+"</td>",c+="</tr></table></div>",$(this.box).append(c),0==$("#w2ui-global-drop").length&&$("body").append('<div id="w2ui-global-drop" class="w2ui-reset"></div>'),this.trigger($.extend({phase:"after"}))}},refresh:function(a){window.getSelection&&window.getSelection().removeAllRanges();var b=this.trigger({phase:"before",type:"refresh",target:a!==void 0?a:this.name,item:this.get(a)});if(b.stop===!0)return!1;if(a===void 0)for(var c=0;this.items.length>c;c++)this.refresh(this.items[c].id);var d=this.get(a);if(null!=d){var e=$(this.box).find(".w2ui-toolbar #"+this.name+"_item_"+d.id),f=this.getItemHTML(d);if(0==e.length){var g="";d.hidden&&(g+="display: none;"),d.disabled&&(g+="opacity: 0.2; -moz-opacity: 0.2; -webkit-opacity: 0.2; -o-opacity: 0.2; filter:alpha(opacity=20);"),f='<td id="'+this.name+"_item_"+d.id+'" style="'+g+'" valign="middle">'+f+"</td>",this.getIndex(a)==this.items.length-1?$(this.box).find(".w2ui-toolbar #"+this.name+"_right").before(f):$(this.box).find(".w2ui-toolbar #"+this.name+"_item_"+this.items[parseInt(this.getIndex(a))+1].id).before(f)}else e.html(f),d.hidden?e.css("display","none"):e.css("display",""),d.disabled?e.css({opacity:"0.2","-moz-opacity":"0.2","-webkit-opacity":"0.2","-o-opacity":"0.2",filter:"alpha(opacity=20)"}):e.css({opacity:"1","-moz-opacity":"1","-webkit-opacity":"1","-o-opacity":"1",filter:"alpha(opacity=100)"});this.trigger($.extend({phase:"after"}))}},resize:function(){window.getSelection&&window.getSelection().removeAllRanges();var d=this.trigger({phase:"before",type:"resize",target:this.name});return d.stop===!0?!1:(this.trigger($.extend({phase:"after"})),void 0)},destroy:function(){var a=this.trigger({phase:"before",type:"destroy",target:this.name});return a.stop===!0?!1:($(this.box).html(""),delete w2ui[this.name],this.trigger($.extend({phase:"after"})),void 0)},getMenuHTML:function(a){for(var b='<table cellspacing="0" style="padding: 5px 0px;">',c=0;a.items.length>c;c++){if("string"==typeof a.items[c]){var d=a.items[c].split("|");d[2]===void 0&&(d[2]=d[0])}else{var d=[];a.items[c].text===void 0&&a.items[c].caption!==void 0&&(a.items[c].text=a.items[c].caption),a.items[c].icon===void 0&&a.items[c].img!==void 0&&(a.items[c].icon=a.items[c].img),a.items[c].value===void 0&&a.items[c].id!==void 0&&(a.items[c].value=a.items[c].id),a.items[c].value===void 0&&a.items[c].cmd!==void 0&&(a.items[c].value=a.items[c].cmd),d[0]=a.items[c].text,d[1]=a.items[c].icon,d[2]=a.items[c].value!==void 0?a.items[c].value:a.items[c].text}b+='<tr style="cursor: default;" 	onmouseover="$(this).addClass(\'w2ui-selected\');" onmouseout="$(this).removeClass(\'w2ui-selected\');" 	onclick="var obj = w2ui[\''+this.name+"']; obj.doDropOut('"+a.id+"', 0); "+"			  obj.doClick('"+a.id+"', event, '"+c+"');\">"+"<td style='padding: 3px 3px 3px 6px'><div class=\""+(d[1]!==void 0?"w2ui-icon ":"")+d[1]+'"></div></td>'+"<td style='padding: 3px 10px 3px 3px'>"+d[0]+"</td>"+"</tr>"}return b+="</table>"},getItemHTML:function(a){var b="";
null==a.caption&&(a.caption=""),null==a.img&&(a.img="");var d="";switch(""!=a.img&&("IE5"==w2utils.engine?a.disabled?(d="FILTER: alpha(opacity=20);",butPicture='src="'+a.img+'" style="FILTER: alpha(opacity=20);"'):butPicture='src="images/empty.gif" style="Filter:Progid:DXImageTransform.Microsoft.AlphaImageLoader(src='+a.img+', opacity=20)"':butPicture='src="'+a.img+'"'),a.hint===void 0&&(a.hint=""),a.type){case"menu":a.html=this.getMenuHTML(a);case"button":case"check":case"radio":case"drop":b+='<table cellpadding="0" cellspacing="0" title="'+a.hint+'" class="w2ui-tab0 '+(a.checked?"checked":"")+'" '+"       onmouseover = \"var el=w2ui['"+this.name+"']; if (el) el.doOver('"+a.id+"', event);\" "+"       onmouseout  = \"var el=w2ui['"+this.name+"']; if (el) el.doOut('"+a.id+"', event);\" "+"       onmousedown = \"var el=w2ui['"+this.name+"']; if (el) el.doDown('"+a.id+"', event);\" "+"       onmouseup   = \"var el=w2ui['"+this.name+"']; if (el) el.doClick('"+a.id+"', event);\" "+">"+"<tr><td>"+'  <table cellpadding="1" cellspacing="0" class="w2ui-tab1 '+(a.checked?"checked":"")+'">'+"  <tr>"+(""!=a.img?'<td><div class="w2ui-tb-image w2ui-icon '+a.img+'"></div></td>':"<td>&nbsp;</td>")+(""!=a.caption?'<td class="w2ui-tb-caption" style="'+d+'" nowrap>'+a.caption+"</td>":"")+("drop"!=a.type&&"menu"!=a.type||a.arrow===!1?"":'<td class="w2ui-tb-down" nowrap>&nbsp;&nbsp;&nbsp;</td>')+"  </tr></table>"+"</td></tr></table>";break;case"break":b+='<table cellpadding="0" cellspacing="0" style="width 1px; height: 22px; margin-top: 2px;"><tr>    <td><div class="w2ui-break">&nbsp;</div></td></tr></table>';break;case"html":b+='<table cellpadding="0" cellspacing="0" style="height: 22px; margin-top: 2px;'+d+';"><tr>'+"    <td nowrap>"+a.html+"</td>"+"</tr></table>"}b+='<div class="w2ui-drop-box"></div>';var e="";return"function"==typeof a.onRender&&(e=a.onRender.call(this,a.id,b)),"function"==typeof this.onRender&&(e=this.onRender(a.id,b)),""!=e&&e!==void 0&&(b=e),b},doOver:function(a){var b=this.get(a);b&&!b.disabled&&($("#"+this.name+"_item_"+b.id+" table").addClass("over"),("drop"==b.type||"menu"==b.type)&&clearTimeout(b.timer))},doOut:function(a,b){var c=this.get(a);if(b===void 0&&(b=400),c&&!c.disabled&&($("#"+this.name+"_item_"+c.id+" table").removeClass("over"),"drop"==c.type||"menu"==c.type)){var d=this;c.timer=setTimeout(function(){w2ui[d.name];var b=c;$("#"+this.name+"_item_"+b.id+" div.w2ui-drop-box").hide(),$("#w2ui-global-drop").data("tb-id")==b.id&&$("#w2ui-global-drop").hide(),b.checked=!1,d.refresh(b.id)},b)}},doDown:function(a){window.getSelection&&window.getSelection().removeAllRanges();var b=this.get(a);if(b&&!b.disabled&&($("#"+this.name+"_item_"+b.id+" table").addClass("down"),"drop"==b.type||"menu"==b.type))if(b.checked)$("#"+this.name+"_item_"+b.id+" div.w2ui-drop-box").hide(),$("#w2ui-global-drop").data("tb-id")==b.id&&$("#w2ui-global-drop").hide();else{$("table.w2ui-toolbar div.w2ui-drop-box").hide(),$("#"+this.name+"_item_"+b.id+" div.w2ui-drop-box").show(),$("#w2ui-global-drop").data("tb-id")==b.id&&$("#w2ui-global-drop").hide(),$("#w2ui-global-drop").css({left:$("#"+this.name+"_item_"+b.id+" div.w2ui-drop-box").offset().left+"px",top:$("#"+this.name+"_item_"+b.id+" div.w2ui-drop-box").offset().top+"px"}).html(b.html).show().data("tb-id",b.id);var c=this;$("#w2ui-global-drop").unbind("mouseover").unbind("mouseout"),$("#w2ui-global-drop").bind("mouseover",function(){var d=w2ui[c.name];d&&d.doDropOver(b.id)}),$("#w2ui-global-drop").bind("mouseout",function(){var d=w2ui[c.name];d&&d.doDropOut(b.id)})}},doDropOver:function(a){var b=this.get(a);clearTimeout(b.timer)},doDropOut:function(a,b){var c=this.get(a),d=this;if(b===void 0&&(b=400),a===void 0)for(var e=0;this.items.length>e;e++){var c=this.items[e];("drop"==c.type||"menu"==c.type)&&(c.checked=!1,this.refresh(c.id)),$("#"+this.name+"_item_"+this.items[e].id+" div.w2ui-drop-box").hide(),$("#w2ui-global-drop").data("tb-id")==this.items[e].id&&$("#w2ui-global-drop").hide()}else c.timer=setTimeout(function(){w2ui[d.name];var b=c;$("#"+this.name+"_item_"+b.id+" div.w2ui-drop-box").hide(),$("#w2ui-global-drop").data("tb-id")==b.id&&$("#w2ui-global-drop").hide(),b.checked=!1,d.refresh(b.id)},b)},doClick:function(a,b,c){window.getSelection&&window.getSelection().removeAllRanges();var d=this.get(a);if(d&&!d.disabled){var e=this.trigger({phase:"before",type:"click",target:a!==void 0?a:this.name,item:this.get(a),subItem:c!==void 0&&this.get(a)?this.get(a).items[c]:null,event:b});if(e.stop===!0)return!1;$("#"+this.name+"_item_"+d.id+" table").removeClass("down");for(var f=0;this.items.length>f;f++)this.items[f].hideTimer&&clearTimeout(this.items[f].hideTimer);if("radio"==d.type){for(var f=0;this.items.length>f;f++){var g=this.items[f];null!=g&&g.id!=d.id&&"radio"==g.type&&g.group==d.group&&g.checked&&(g.checked=!1,this.refresh(g.id))}d.checked=!0,$("#"+this.name+"_item_"+d.id+" table").addClass("checked")}("check"==d.type||"drop"==d.type||"menu"==d.type)&&(d.checked=!d.checked,d.checked?$("#"+this.name+"_item_"+d.id+" table").addClass("checked"):$("#"+this.name+"_item_"+d.id+" table").removeClass("checked")),this.trigger($.extend({phase:"after"}))}}},$.extend(a.prototype,$.w2event)}(),function(){var a=function(a){this.name=null,this.box=null,this.sidebar=null,this.parent=null,this.img=null,this.style="",this.selected=null,this.nodes=[],this.onClick=null,this.onDblClick=null,this.onContextMenu=null,this.onOpen=null,this.onClose=null,this.onRender=null,this.onRefresh=null,this.onResize=null,this.onDestroy=null,$.extend(!0,this,a)};$.fn.w2sidebar=function(b){if("object"==typeof b||!b){if(!b||b.name===void 0)return $.error('The parameter "name" is required but not supplied in $().w2sidebar().'),void 0;if(w2ui[b.name]!==void 0)return $.error('The parameter "name" is not unique. There are other objects already created with the same name (obj: '+b.name+")."),void 0;var c=b.nodes,d=new a(b);return $.extend(d,{handlers:[],nodes:[]}),c!==void 0&&d.add(d,c),0!=$(this).length&&($(this).data("w2name",d.name),d.render($(this)[0])),d.sidebar=d,w2ui[d.name]=d,d}if($(this).data("w2name")!==void 0){var e=w2ui[$(this).data("w2name")];return e[b].apply(e,Array.prototype.slice.call(arguments,1)),this}$.error("Method "+b+" does not exist on jQuery.w2sidebar")},a.prototype={node:{id:null,text:"",count:"",img:null,parent:null,sidebar:null,nodes:[],style:"",selected:!1,expanded:!1,hidden:!1,disabled:!1,group:!1,onClick:null,onDblClick:null,onContextMenu:null,onOpen:null,onClose:null},add:function(a,b){return 1==arguments.length&&(b=arguments[0],a=this),"string"==typeof a&&(a=this.get(a)),this.insert(a,null,b)},insert:function(b,c,d){if(2==arguments.length){d=arguments[1],c=arguments[0];var e=this.get(c);if(null==e)return $.error('Cannot insert node "'+d[f].text+'" because cannot find node "'+c+'" to insert before.'),null;b=this.get(c).parent}"string"==typeof b&&(b=this.get(b)),$.isArray(d)||(d=[d]);for(var f in d)if(void 0!==d[f].id)if(null==this.get(this,d[f].id)){var g=$.extend({},a.prototype.node,d[f]);g.sidebar=this,g.parent=b;var h=g.nodes;if(g.nodes=[],null==c)b.nodes.push(g);else{var e=this.getIndex(b,c);if(null==e)return $.error('Cannot insert node "'+d[f].text+'" because cannot find node "'+c+'" to insert before.'),null;b.nodes.splice(e,0,g)}h!==void 0&&h.length>0&&this.insert(g,null,h)}else $.error("Cannot insert node with id="+d[f].id+" (text: "+d[f].text+") because another node with the same id already exists.");else $.error('Cannot insert node "'+d[f].text+'" because it has no id.');return this.refresh(b.id),g},remove:function(){var a=0;for(var b in arguments){var c=this.get(arguments[b]);if(null!=c){var d=this.getIndex(c.parent,arguments[b]);null!=d&&(c.parent.nodes.splice(d,1),a++)}}return 1==arguments.length?this.refresh(arguments[0]):this.refresh(),a},set:function(a,b,c){if(2==arguments.length&&(c=b,b=a,a=this),this._tmp=null,"string"==typeof a&&(a=this.get(a)),null==a.nodes)return null;for(var d=0;a.nodes.length>d;d++){if(a.nodes[d].id==b){var e=c.nodes;return $.extend(a.nodes[d],c,{nodes:[]}),e!==void 0&&this.add(a.nodes[d],e),this.refresh(b),!0}if(this._tmp=this.set(a.nodes[d],b,c),this._tmp)return!0}return!1},get:function(a,b){if(1==arguments.length&&(b=a,a=this),this._tmp=null,"string"==typeof a&&(a=this.get(a)),null==a.nodes)return null;for(var c=0;a.nodes.length>c;c++){if(a.nodes[c].id==b)return a.nodes[c];if(this._tmp=this.get(a.nodes[c],b),this._tmp)return this._tmp}return this._tmp},getIndex:function(a,b){if(1==arguments.length&&(b=a,a=this),"string"==typeof a&&(a=this.get(a)),null==a.nodes)return null;for(var c=0;a.nodes.length>c;c++)if(a.nodes[c].id==b)return c;return null},hide:function(){var a=0;for(var b in arguments){var c=this.get(arguments[b]);null!=c&&(c.hidden=!0,a++)}return 1==arguments.length?this.refresh(arguments[0]):this.refresh(),a},show:function(){var a=0;for(var b in arguments){var c=this.get(arguments[b]);null!=c&&(c.hidden=!1,a++)}return 1==arguments.length?this.refresh(arguments[0]):this.refresh(),a},disable:function(){var a=0;for(var b in arguments){var c=this.get(arguments[b]);null!=c&&(c.disabled=!0,c.selected&&this.unselect(c.id),a++)}return 1==arguments.length?this.refresh(arguments[0]):this.refresh(),a},enable:function(){var a=0;for(var b in arguments){var c=this.get(arguments[b]);null!=c&&(c.disabled=!1,a++)}return 1==arguments.length?this.refresh(arguments[0]):this.refresh(),a},select:function(a){if(this.selected==a)return!1;this.unselect(this.selected);var b=this.get(a);return b?($("#sidebar_"+this.name+" #node_"+a.replace(/\./,"\\.")).addClass("w2ui-selected").find(".w2ui-icon").addClass("w2ui-icon-selected"),b.selected=!0,this.selected=a,void 0):!1},unselect:function(a){var b=this.get(a);return b?(b.selected=!1,$("#sidebar_"+this.name+" #node_"+a.replace(/\./,"\\.")).removeClass("w2ui-selected").find(".w2ui-icon").removeClass("w2ui-icon-selected"),this.selected==a&&(this.selected=null),!0):!1},doClick:function(a,b){var c=this.trigger({phase:"before",type:"click",target:a,event:b});if(c.stop===!0)return!1;var d=this.get(a),e=this;d.group||d.disabled||($("#sidebar_"+this.name+" .w2ui-node").each(function(a,b){var c=(b.id+"").replace("node_",""),d=e.get(c);d&&d.selected&&(d.selected=!1,$(b).removeClass("w2ui-selected").find(".w2ui-icon").removeClass("w2ui-icon-selected"))}),$("#sidebar_"+this.name+" #node_"+a.replace(/\./,"\\.")).addClass("w2ui-selected").find(".w2ui-icon").addClass("w2ui-icon-selected"),this.get(a).selected=!0,this.selected=a),this.trigger($.extend(c,{phase:"after"}))},doDblClick:function(a,b){window.getSelection&&window.getSelection().removeAllRanges();var c=this.trigger({phase:"before",type:"dblClick",target:a,event:b});if(c.stop===!0)return!1;var d=this.get(a);d.nodes.length>0&&this.doToggle(a,b),this.trigger($.extend(c,{phase:"after"}))},doContextMenu:function(a,b){var c=this.trigger({phase:"before",type:"contextMenu",target:a,event:b});return c.stop===!0?!1:(this.trigger($.extend(c,{phase:"after"})),void 0)},doToggle:function(a,b){this.get(a).expanded?this.doClose(a,b):this.doOpen(a,b)},doOpen:function(a,b){var c=this.trigger({phase:"before",type:"open",target:a,event:b});if(c.stop===!0)return!1;var d=this.get(a);0!=d.nodes.length&&($("#sidebar_"+this.name+" #node_"+a.replace(/\./,"\\.")+"_sub").show(),$("#sidebar_"+this.name+" #node_"+a.replace(/\./,"\\.")+" .w2ui-node-dots:first-child").html('<div style="width: 16px">-</div>'),d.expanded=!0,this.trigger($.extend(c,{phase:"after"})))},doClose:function(a,b){var c=this.trigger({phase:"before",type:"close",target:a,event:b});return c.stop===!0?!1:($("#sidebar_"+this.name+" #node_"+a.replace(/\./,"\\.")+"_sub").hide(),$("#sidebar_"+this.name+" #node_"+a.replace(/\./,"\\.")+" .w2ui-node-dots:first-child").html('<div style="width: 16px">+</div>'),this.get(a).expanded=!1,this.trigger($.extend(c,{phase:"after"})),void 0)},render:function(a){var b=this.trigger({phase:"before",type:"render",target:this.name,box:a});return b.stop===!0?!1:(a!==void 0&&null!=a&&($(this.box).html(""),this.box=a),this.box&&($(this.box).html('<div id="sidebar_'+this.name+'" class="w2ui-reset w2ui-sidebar" style="'+this.style+'"></div>'),this.trigger($.extend(b,{phase:"after"})),this.refresh()),void 0)},refresh:function(a){function i(a){var b="",d=a.img;d===void 0&&(d=this.img);for(var e=a.parent,f=0;e&&null!=e.parent;)e.group&&f--,e=e.parent,f++;return a.group?b='<div class="w2ui-node-group"  id="node_'+a.id+'"'+"		onclick=\"w2ui['"+c.name+"'].doClick('"+a.id+"', event); w2ui['"+c.name+"'].doToggle('"+a.id+"'); "+"				 var sp=$(this).find('span:nth-child(1)'); if (sp.html() == 'Hide') sp.html('Show'); else sp.html('Hide');\""+"		onmouseout=\"$(this).find('span:nth-child(1)').css('color', 'transparent')\" "+"		onmouseover=\"$(this).find('span:nth-child(1)').css('color', 'gray')\">"+'	<span style="float: right; color: transparent">Hide</span>'+"	<span>"+a.text+"</span>"+"</div>"+'<div class="w2ui-node-sub" id="node_'+a.id+'_sub" style="'+a.style+";"+(!a.hidden&&a.expanded?"":"display: none;")+'"></div>':(a.selected&&!a.disabled&&(c.selected=a.id),b='<div class="w2ui-node '+(a.selected?"w2ui-selected":"")+" "+(a.disabled?"w2ui-disabled":"")+'" id="node_'+a.id+'" style="'+(a.hidden?"display: none;":"")+'"'+"	ondblclick=\"w2ui['"+c.name+"'].doDblClick('"+a.id+"', event); /* event.stopPropagation(); */\""+"	oncontextmenu=\"w2ui['"+c.name+"'].doContextMenu('"+a.id+"', event); /* event.stopPropagation(); */ event.preventDefault();\""+"	onClick=\"w2ui['"+c.name+"'].doClick('"+a.id+"', event); /* event.stopPropagation(); */\">"+'<table cellpadding="0" cellspacing="0" style="margin-left:'+18*f+"px; padding-right:"+18*f+'px"><tr>'+'<td class="w2ui-node-dots" nowrap onclick="w2ui[\''+c.name+"'].doToggle('"+a.id+"', event);\">"+'	<div style="width: 16px">'+(a.nodes.length>0?a.expanded?"-":"+":"")+"</div>"+"</td>"+'<td class="w2ui-node-data" nowrap>'+(d?'<div class="w2ui-node-image w2ui-icon '+d+" "+(a.selected&&!a.disabled?"w2ui-icon-selected":"")+'"></div>':"")+(a.count?'<div class="w2ui-node-count" style="width: auto; padding: 2px 5px; float: right">'+a.count+"</div>":"")+'<div class="w2ui-node-caption">'+a.text+"</div>"+"</td>"+"</tr></table>"+"</div>"+'<div class="w2ui-node-sub" id="node_'+a.id+'_sub" style="'+a.style+";"+(!a.hidden&&a.expanded?"":"display: none;")+'"></div>'),b}window.getSelection&&window.getSelection().removeAllRanges();var b=this.trigger({phase:"before",type:"refresh",target:a!==void 0?a:this.name});if(b.stop===!0)return!1;var c=this;if(a===void 0)var d=this,e="#sidebar_"+this.name;else var d=this.get(a),e="#sidebar_"+this.name+" #node_"+d.id.replace(/\./,"\\.")+"_sub";if(d!=this){var f="#sidebar_"+this.name+" #node_"+d.id.replace(/\./,"\\."),g=i(d);$(f).before('<div id="sidebar_'+this.name+'_tmp"></div>'),$(f).remove(),$(e).remove(),$("#sidebar_"+this.name+"_tmp").before(g),$("#sidebar_"+this.name+"_tmp").remove()}$(e).html("");for(var h=0;d.nodes.length>h;h++){var g=i(d.nodes[h]);$(e).append(g),0!=d.nodes[h].nodes.length&&this.refresh(d.nodes[h].id)}this.trigger($.extend(b,{phase:"after"}))},resize:function(a,b){window.getSelection&&window.getSelection().removeAllRanges();var c=this.trigger({phase:"before",type:"resize",target:this.name,width:a,height:b});return c.stop===!0?!1:(this.trigger($.extend(c,{phase:"after"})),void 0)},destroy:function(){var a=this.trigger({phase:"before",type:"destroy",target:this.name});return a.stop===!0?!1:($(this.box).html(""),delete w2ui[this.name],this.trigger($.extend(a,{phase:"after"})),void 0)}},$.extend(a.prototype,$.w2event)}(),function(a){a.fn.w2field=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"==typeof c?b.init.apply(this,arguments):"string"==typeof c?b.init.apply(this,[{type:c}]):(a.error("Method "+c+" does not exist on jQuery.w2field"),void 0)};var b={init:function(c){return a(this).each(function(){switch(c.type.toLowerCase()){case"clear":a(this).off("keypress").off("focus").off("blur"),a(this).prev().hasClass("w2ui-list")&&(a(this).prev().remove(),a(this).removeAttr("tabindex"));break;case"int":a(this).on("keypress",function(a){if(!(a.metaKey||a.ctrlKey||a.altKey||a.charCode!=a.keyCode&&a.keyCode>0)){var b=String.fromCharCode(a.charCode);return w2utils.isInt(b)||"-"==b?void 0:(a.stopPropagation(),!1)}}),a(this).on("blur",function(){w2utils.isInt(this.value)||(this.value="",a(this).trigger("change"))});break;case"float":a(this).on("keypress",function(a){if(!(a.metaKey||a.ctrlKey||a.altKey||a.charCode!=a.keyCode&&a.keyCode>0)){var b=String.fromCharCode(a.charCode);return w2utils.isInt(b)||"."==b||"-"==b?void 0:(a.stopPropagation(),!1)}}),a(this).on("blur",function(){w2utils.isFloat(this.value)||(this.value="",a(this).trigger("change"))});break;case"money":a(this).on("keypress",function(a){if(!(a.metaKey||a.ctrlKey||a.altKey||a.charCode!=a.keyCode&&a.keyCode>0)){var b=String.fromCharCode(a.charCode);return w2utils.isInt(b)||"."==b||"-"==b||"$"==b||"\u20ac"==b||"\u00a3"==b||"\u00a5"==b?void 0:(a.stopPropagation(),!1)}}),a(this).on("blur",function(){w2utils.isMoney(this.value)||(this.value="",a(this).trigger("change"))});break;case"hex":a(this).on("keypress",function(a){if(!(a.metaKey||a.ctrlKey||a.altKey||a.charCode!=a.keyCode&&a.keyCode>0)){var b=String.fromCharCode(a.charCode);return w2utils.isHex(b)?void 0:(a.stopPropagation(),!1)}}),a(this).on("blur",function(){w2utils.isHex(this.value)||(this.value="",a(this).trigger("change"))});break;case"alphanumeric":a(this).on("keypress",function(a){if(!(a.metaKey||a.ctrlKey||a.altKey||a.charCode!=a.keyCode&&a.keyCode>0)){var b=String.fromCharCode(a.charCode);return w2utils.isAlphaNumeric(b)?void 0:(a.stopPropagation(),!1)}}),a(this).on("blur",function(){w2utils.isAlphaNumeric(this.value)||(this.value="")});break;case"date":var f=this;if(0==a(this).length||1!=a("#"+a(this)[0].id).length)return console.error("The date field must have a unique id in w2field('date')."),void 0;a(this).css({transition:"none","-webkit-transition":"none","-moz-transition":"none","-ms-transition":"none","-o-transition":"none"}).data("options",c).on("focus",function(){var b=parseFloat(a(f).offset().top)+parseFloat(f.offsetHeight),d=parseFloat(a(f).offset().left);a("#global_calendar_div").remove(),a("body").append('<div id="global_calendar_div" style="position: absolute; z-index: 1600; display: none;		top: '+(b+parseInt(f.offsetHeight))+"px; left: "+d+'px;" '+' class="w2ui-reset w2ui-calendar" '+' onmousedown="event.stopPropagation(); event.preventDefault();"></div>'),a("#global_calendar_div").html(a().w2field("calendar_get",f.value,c)).css({left:d+"px",top:b+"px"}).data("el",f).show();var e=setInterval(function(){return a("#global_calendar_div").data("position")!=a(f).offset().left+"x"+(a(f).offset().top+f.offsetHeight)&&a("#global_calendar_div").css({"-webkit-transition":".2s",left:a(f).offset().left+"px",top:a(f).offset().top+f.offsetHeight+"px"}).data("position",a(f).offset().left+"x"+(a(f).offset().top+f.offsetHeight)),0==a(f).length||0==a(f).offset().left&&0==a(f).offset().top?(clearInterval(e),a("#global_calendar_div").remove(),void 0):void 0},100);a(f).data("mtimer",e)}).on("blur",function(){w2utils.isDate(a(f).val())||a(f).val(""),clearInterval(a(f).data("mtimer")),a("#global_calendar_div").remove()}).on("keypress",function(){var d=this;setTimeout(function(){a("#global_calendar_div").html(a().w2field("calendar_get",d.value,c))},10)});break;case"time":break;case"datetime":break;case"color":break;case"list":break;case"enum":var g={url:"",items:[],selected:[],max:0,maxHeight:72,showAll:!1,maxCache:500,onRender:null,onSelect:null},f=this;a(f).css({"border-color":"transparent"});var h=a.extend({},g,c);if(a.isArray(h.selected)?a(this).data("selected",h.selected):a(this).data("selected",[]),a.isArray(h.items)&&!a.isPlainObject(h.items[0])){var i=[];for(var j in h.items)i.push({id:h.items[j],text:h.items[j]});h.items=i}this.add=function(b){var c=a(this).data("selected");a.isArray(c)||(c=[]),0!=h.max&&h.max<=c.length&&c.splice(c.length-1,1),c.push(b),a(this).data("selected",c),a(this).data("last_del",null),a(this).trigger("change")},this.show=function(){if(0==a("#w2ui-global-items").length){a("body").append('<div id="w2ui-global-items" class="w2ui-reset w2ui-items" style="position: absolute; z-index: 1200; display: none; -moz-box-sizing: border-box; -webkit-box-sizing: border-box;"></div>');var c=a("#w2ui-global-items");c.css({display:"block",left:a(f).offset().left+"px",top:a(f).offset().top+f.offsetHeight+"px"}).width(w2utils.getSize(f,"width")).data("position",a(f).offset().left+"x"+(a(f).offset().top+f.offsetHeight)),b.list_render.call(f);var d=function(){var c=a("#w2ui-global-items");return 0==a(f).length||0==a(f).offset().left&&0==a(f).offset().top?(clearInterval(a(f).data("mtimer")),hide(),void 0):(c.data("position")!=a(f).offset().left+"x"+(a(f).offset().top+f.offsetHeight)&&(c.css({"-webkit-transition":".2s",left:a(f).offset().left+"px",top:a(f).offset().top+f.offsetHeight+"px"}).data("position",a(f).offset().left+"x"+(a(f).offset().top+f.offsetHeight)),setTimeout(function(){b.list_render.call(f,a(f).data("last_search"))},200)),c.length>0&&a(f).data("mtimer",setTimeout(d,100)),void 0)};a(f).data("mtimer",setTimeout(d,100))}},this.hide=function(){clearTimeout(a(f).data("mtimer")),a("#w2ui-global-items").remove()},this.refresh=function(){var c=this;a(a(this).data("selected-div")).remove();var d="margin-top: "+a(this).css("margin-top")+"; "+"margin-bottom: "+a(this).css("margin-bottom")+"; "+"margin-left: "+a(this).css("margin-left")+"; "+"margin-right: "+a(this).css("margin-right")+"; "+"width: "+(w2utils.getSize(this,"width")-parseInt(a(this).css("margin-left"))-parseInt(a(this).css("margin-right")))+"px; ",e='<div class="w2ui-list" style="'+d+';">'+"<ul>",f=a(this).data("selected");for(var g in f)e+='<li style="'+(a(this).data("last_del")==g?"opacity: 0.5":"")+'">'+'<div title="Remove" index="'+g+'">&nbsp;&nbsp;</div>'+f[g].text+"</li>";e+='<li><input type="text" style="width: 10px; background-color: transparent"></li>',e+="</ul></div>",a(this).before(e);var i=a(this).prev();a(this).data("selected-div",i);var j=w2utils.getSize(i,"height")-parseInt(a(i).css("margin-top"))-parseInt(a(i).css("margin-bottom"));23>j&&(j=23),j>h.maxHeight&&(j=h.maxHeight),a(i).height(j),i.length>0&&(i[0].scrollTop=1e3),a(this).height(j),a(i).on("click",function(d){var e=d.target;"Remove"==e.title&&(a(c).data("selected").splice(a(e).attr("index"),1),a(e.parentNode).remove(),c.refresh(),b.list_render.call(c),a(c).trigger("change"),d.stopPropagation()),a(this).find("input").focus()}),a(i).find("input").on("focus",function(b){a(i).css({outline:"auto 5px -webkit-focus-ring-color","outline-offset":"-2px"}),c.show(),b.stopPropagation()}).on("blur",function(b){a(i).css("outline","none"),c.hide(),b.stopPropagation()})},a(this).data("settings",h).attr("tabindex",-1),this.refresh()}})},list_render:function(c){var d=this,e=a("#w2ui-global-items"),f=a(this).data("settings"),g=a(this).data("selected");if(0!=e.length){if(f.items===void 0&&(f.items=[]),c===void 0){var h="";h+='<div style="border-radius: 4px; background-color: white; padding: 3px;">	<div class="list_items" style="padding-top: 3px;"></div></div>',e.html(h),c=""}if(a(this).data("last_search",c),(a(d).data("last_index")===void 0||null==a(d).data("last_index"))&&a(d).data("last_index",0),f.last_total===void 0&&(f.last_total=-1),f.last_search_len===void 0&&(f.last_search_len=0),f.last_search_match===void 0&&(f.last_search_match=-1),""!=f.url&&(0==f.items.length&&0!=f.last_total||c.length>f.last_search_len&&f.last_total>f.maxCache||c.length<f.last_search_match&&c.length!=f.last_search_len)){var i=!1;f.last_total<f.maxCache&&(i=!0),a.ajax({type:"POST",dataType:"text",url:f.url,data:{search:c,max:f.maxCache},complete:function(e,g){if(f.last_total=0,"success"==g){var h=a.parseJSON(e.responseText);0==i&&h.total<f.maxCache&&(f.last_search_match=c.length),f.last_search_len=c.length,f.last_total=h.total,f.items=h.options,b.list_render.call(d,c)}}})}var j=0,k=f.items,l="<ul>",m=[];for(var n in g)m.push(w2utils.isInt(g[n].id)?parseInt(g[n].id):g[n].id+"");for(var n in k)if(""!=k[n]){if("object"==typeof k[n]){var o=k[n].text+"";null==o&&k[n].caption!==void 0&&(o=k[n].caption);var p=k[n].id;null==p&&k[n].value!==void 0&&(p=k[n].value),(null==p||"undefined"==p+""||""==p)&&(p=o)}if("string"==typeof k[n])var p=k[n],o=k[n];if(-1==a.inArray(w2utils.isInt(p)?parseInt(p):p+"",m)||f.showAll===!0){var q=(c+"").toLowerCase(),r=o.toLowerCase();q.length<=r.length&&r.substr(0,q.length)==q&&("function"==typeof f.render&&(o=f.render(k[n])),l+='\n<li style="display: block; -webkit-transition: 0.2s" index="'+n+'" value="'+p+'" '+"  onmouseover=\"$(this).parent().find('li').removeClass('selected'); $(this).addClass('selected'); \""+'	class="'+(j%2?"w2ui-item-even":"w2ui-item-odd")+(j==a(d).data("last_index")?" selected":"")+'">'+o+"</li>",j==a(d).data("last_index")&&a(d).data("last_item",k[n]),j++)}}if(l+="</ul>",0==j){l='<div style="padding: 2px; padding-bottom: 5px; text-align: center; color: gray">No items found</div>';var s=!0}e.find(".list_items").html(l),a(this).data("last_max",j-1),e.find("li.selected").length>0&&e.find("li.selected")[0].scrollIntoView(!1),e.css({"-webkit-transition":"0s",height:"auto"});var t=parseInt(a(document).height())-parseInt(e.offset().top)-8;parseInt(e.height())>t&&(e.css({height:t-5+"px",overflow:"show"}),a(e).find(".list_items").css({height:t-15+"px",overflow:"auto"})),a(e).off("mousedown").on("mousedown",function(c){var e=a(c.target).attr("index"),g=f.items[e];d.add(g),a(d).data("last_index",0),d.refresh(),b.list_render.call(d,"")}),a(d).prev().find("li > input").val(c).css("max-width",a(e).width()-25+"px").width(6*(c.length+2)+"px").focus().on("click",function(a){a.stopPropagation()}).off("keyup").on("keyup",function(c){var e=this;setTimeout(function(){var g=a(d).data("last_index");switch(c.keyCode){case 38:g--,0>g&&(g=0),a(d).data("last_index",g),c.preventDefault();break;case 40:g++,g>a(d).data("last_max")&&(g=a(d).data("last_max")),a(d).data("last_index",g),c.preventDefault();break;case 13:if(a(d).data("last_item")===void 0||null==a(d).data("last_item")||s===!0)break;var h=a(d).data("selected");d.add(a(d).data("last_item")),g>a(d).data("last_max")-1&&(g=a(d).data("last_max")-1),a(d).data("last_index",g),a(d).data("last_item",null),a(e).val(""),d.refresh(),c.preventDefault();break;case 8:if(""==e.value)if(a(d).data("last_del")===void 0||null==a(d).data("last_del")){var h=a(d).data("selected");a.isArray(h)||(h=[]),a(d).data("last_del",h.length-1),d.refresh()}else{var h=a(d).data("selected");a.isArray(h)||(h=[]),h.length>0&&h.splice(h.length-1,1),a(d).data("selected",h),a(d).data("last_del",null),d.refresh(),a(d).trigger("change")}break;default:a(d).data("last_index",0),a(d).data("last_del",null)}var i=a(d).prev();i.css("height","auto");var j=w2utils.getSize(i,"height")-parseInt(a(i).css("margin-top"))-parseInt(a(i).css("margin-bottom"));23>j&&(j=23),j>f.maxHeight&&(j=f.maxHeight),a(i).height(j),i.length>0&&(i[0].scrollTop=1e3),a(d).height(j),(8!=c.keyCode||""!=e.value)&&(a(d).prev().find("li").css("opacity","1"),a(d).data("last_del",null)),-1==a.inArray(c.keyCode,[16,91,37,39])&&b.list_render.call(d,e.value)},10)})}},calendar_get:function(b,c){var d=new Date,e=Number(d.getMonth())+1+"/"+d.getDate()+"/"+((d.getYear()+"").length>3?d.getYear():d.getYear()+1900);(""==b||"undefined"==b+"")&&(b=e),w2utils.isDate(b)||(b=e);var f=b.split("/"),g='<table cellpadding="0" cellspacing="0" style=""><tr><td>'+a().w2field("calendar_month",f[0],f[2],c)+"</td>"+'<!--td valign="top" style="background-color: #f4f4fe; padding: 8px; padding-bottom: 0px; padding-top: 22px; border: 1px solid silver; border-left: 0px;">'+"	Jan <br> Feb <br> Mar <br> Apr <br> May <br> Jun <br> Jul <br> Aug <br> Sep <br> Oct <br> Nov <br> Dec"+"</td>"+'<td valign="top" style="background-color: #f4f4fe; padding: 6px; padding-bottom: 0px; padding-top: 22px; border: 1px solid silver; border-left: 0px;">'+"	2001 <br> 2002 <br> 2003 <br> 2004"+"</td-->"+"</tr></table>";return g},calendar_next:function(b){var c=(b+"").split("/"),d=c[0],e=c[1];12>parseInt(d)?d=parseInt(d)+1:(d=1,e=parseInt(e)+1);var f=a(a("#global_calendar_div.w2ui-calendar").data("el")).data("options");a("#global_calendar_div.w2ui-calendar").html(a().w2field("calendar_get",d+"/1/"+e,f))},calendar_previous:function(b){var c=(b+"").split("/"),d=c[0],e=c[1];parseInt(d)>1?d=parseInt(d)-1:(d=12,e=parseInt(e)-1);var f=a(a("#global_calendar_div.w2ui-calendar").data("el")).data("options");a("#global_calendar_div.w2ui-calendar").html(a().w2field("calendar_get",d+"/1/"+e,f))},calendar_month:function(b,c,d){var e=new Date,f=["January","February","March","April","May","June","July","August","September","October","November","December"],h=["31","28","31","30","31","30","31","31","30","31","30","31"],i=Number(e.getMonth())+1+"/"+e.getDate()+"/"+((e.getYear()+"").length>3?e.getYear():e.getYear()+1900);c=Number(c),b=Number(b),(null===c||""===c)&&(c=(e.getYear()+"").length>3?e.getYear():e.getYear()+1900),(null===b||""===b)&&(b=Number(e.getMonth())+1),b>12&&(b-=12,c++),(1>b||0==b)&&(b+=12,c--),h[1]=c/4==Math.floor(c/4)?"29":"28",null==c&&(c=e.getYear()),null==b&&(b=e.getMonth()-1);var e=new Date;e.setDate(1),e.setMonth(b-1),e.setYear(c);for(var j=e.getDay(),k='<div class="w2ui-calendar-title">	<div style="float: left" class="w2ui-calendar-previous" onclick="$().w2field(\'calendar_previous\', \''+b+"/"+c+"')\"> <- </div>"+'	<div style="float: right" class="w2ui-calendar-next" onclick="$().w2field(\'calendar_next\', \''+b+"/"+c+"')\"> -> </div> "+f[b-1]+", "+c+"</div>"+'<table class="w2ui-calendar-days" onclick="" cellspacing="0">'+'	<tr class="w2ui-day-title"><td>M</td> <td>T</td> <td>W</td> <td>T</td> <td>F</td> <td>S</td> <td>S</td></tr>'+"	<tr>",l=1,m=1;43>m;m++){if(0==j&&1==m){for(var n=0;6>n;n++)k+='<td class="w2ui-day-empty">&nbsp;</td>';m+=6}else if(j>m||l>h[b-1]){k+='<td class="w2ui-day-empty">&nbsp;</td>',0==m%7&&(k+="</tr><tr>");continue}var o=b+"/"+l+"/"+c,p="";o==i&&(p="w2ui-today"),6==m%7&&(p="w2ui-saturday"),0==m%7&&(p="w2ui-sunday");var q=l,r="",s="",t="";d.colored&&void 0!=d.colored[o]&&(tmp=d.colored[o].split(":"),s="background-color: "+tmp[0]+";",r="color: "+tmp[1]+";");var u=!1;if(d.start||d.end){var v=new Date(d.start),w=new Date(d.end),x=new Date(o);(v>x||x>w)&&(t=" w2ui-blocked-date",u=!0)}d.blocked&&-1!=a.inArray(o,d.blocked)&&(t=" w2ui-blocked-date",u=!0),k+='<td class="'+p+t+'" style="'+r+s+'" id="'+this.name+"_date_"+o+'" date="'+o+'"',u===!1&&(k+="onclick=\"var el = $('#global_calendar_div.w2ui-calendar').data('el'); 	$(el).val('"+o+"').trigger('change').trigger('blur'); "+"	 event.stopPropagation(); return false;"+'"'),k+=">"+q+"</td>",(0==m%7||0==j&&1==m)&&(k+="</tr><tr>"),l++}return k+="</tr></table>"}}}(jQuery),function(){var w2form=function(a){this.name=null,this.box=null,this.url="",this.form_url="",this.form_html="",this.page=0,this.recid=0,this.fields=[],this.actions={},this.record={},this.original={},this.postData={},this.tabs={},this.isLoaded=!1,this.style="",this.onRequest=null,this.onLoad=null,this.onSubmit=null,this.onSave=null,this.onChange=null,this.onRender=null,this.onRefresh=null,this.onResize=null,this.onDestroy=null,this.onAction=null,this.request_xhr=null,this.save_xhr=null,$.extend(!0,this,a)};$.fn.w2form=function(a){if("object"==typeof a||!a){var b=this;if(!a||a.name===void 0)return $.error('The parameter "name" is required but not supplied in $().w2form().'),void 0;if(w2ui[a.name]!==void 0)return $.error('The parameter "name" is not unique. There are other objects already created with the same name (obj: '+a.name+")."),void 0;var c=a.record,d=a.original,e=a.fields,f=a.tabs,g=new w2form(a);$.extend(g,{record:{},original:{},fields:[],tabs:{},handlers:[]}),$.isArray(f)?$.extend(!0,g.tabs,{tabs:f}):$.extend(!0,g.tabs,f);for(var h in e)g.fields[h]=$.extend(!0,{},e[h]);for(var h in c)g.record[h]=$.isPlainObject(c[h])?$.extend(!0,{},c[h]):c[h];
for(var h in d)g.original[h]=$.isPlainObject(d[h])?$.extend(!0,{},d[h]):d[h];return g.initTabs(),0==$(this).length||g.form_url?g.form_url&&$.get(g.form_url,function(a){g.form_html=a,0!=$(b).length&&($(b).html(g.form_html),g.init(b),g.render($(b)[0]))}):(g.form_html||(g.form_html=$(this).html()),g.init(this),g.render($(this)[0])),w2ui[g.name]=g,g}if($(this).data("w2name")!==void 0){var b=w2ui[$(this).data("w2name")];return b[a].apply(b,Array.prototype.slice.call(arguments,1)),this}$.error("Method "+a+" does not exist on jQuery.w2form")},w2form.prototype={init:function(a){var b=this;$(a).find("input, textarea, select").each(function(a,c){var d="text",e=$(c).attr("name")!==void 0?$(c).attr("name"):$(c).attr("id");"checkbox"==c.type&&(d="checkbox"),"radio"==c.type&&(d="radio"),"password"==c.type&&(d="password"),"button"==c.type&&(d="button"),"select"==c.tagName&&(d="list"),"textarea"==c.tagName&&(d="textarea"),"checkbox"==d||"radio"==d?$(c).attr("checked")?!0:!1:$(c).val();var g=b.get(e);if(g&&"button"!=d){var h=$(c).parents(".w2ui-page");if(h.length>0)for(var i=0;100>i;i++)if(h.hasClass("page-"+i)){g.page=i;break}}else"button"!=d&&console.log('WARNING: Field "'+e+'" is present in HTML, but not defined in w2form.')})},initTabs:function(){if(!$.isEmptyObject(this.tabs)&&this.tabs.render===void 0){var a=this;this.tabs=$().w2tabs($.extend({},this.tabs,{name:this.name+"_tabs"})),this.tabs.on("click",function(b){a.goto(this.getIndex(b))})}},get:function(a){for(var b in this.fields)if(this.fields[b].name==a)return this.fields[b];return null},set:function(a,b){for(var c in this.fields)if(this.fields[c].name==a)return $.extend(this.fields[c],b),!0;return!1},reload:function(a){""!=this.url?(this.isLoaded=!1,this.request(null,a)):(this.isLoaded=!0,this.refresh())},clear:function(){this.record={};for(var a in this.fields){var b=this.fields[a];b.selected&&delete b.selected}$().w2tag(),this.refresh()},request:function(postData,url,callBack){if("function"==typeof postData&&(callBack=postData,url=null,postData=null),"function"==typeof url&&(callBack=url,url=null),postData===void 0&&(postData={}),(url===void 0||""==url||null==url)&&(url=this.url),""!=url&&null!=url){(null==this.recid||this.recid===void 0)&&(this.recid=0);var params={};params.cmd="get-record",params.name=this.name,params.recid=this.recid,$.extend(params,this.postData),$.extend(params,postData);var eventData=this.trigger({phase:"before",type:"request",target:this.name,url:url,postData:params});if(eventData.stop===!0)return"function"==typeof callBack&&callBack(),!1;this.record={},this.original={};var obj=this;if(this.isLoaded=!1,this.showStatus("Refreshing "),this.request_xhr)try{this.request_xhr.abort()}catch(e){}this.request_xhr=$.ajax({type:"POST",url:url+(url.indexOf("?")>-1?"&":"?")+"t="+(new Date).getTime(),data:($.param(eventData.postData,!1)+"").replace(/%5B/g,"[").replace(/%5D/g,"]"),dataType:"text",complete:function(xhr,status){obj.hideStatus(),obj.isLoaded=!0;var eventData=obj.trigger({phase:"before",target:obj.name,type:"load",data:xhr.responseText,xhr:xhr,status:status});if(eventData.stop===!0)return"function"==typeof callBack&&callBack(),!1;if(403==xhr.status)return document.location="login.html",void 0;if(eventData.data!==void 0&&""!=eventData.data){var data="data = "+eventData.data,data=eval(data);"success"!=data.status?console.log("ERROR: "+data.message):(obj.record=$.extend({},data.record),obj.original=$.extend({},data.record))}obj.trigger($.extend(eventData,{phase:"after"})),obj.refresh(),"function"==typeof callBack&&callBack()}}),this.trigger($.extend(eventData,{phase:"after"}))}},validate:function(a){a===void 0&&(a=!0);var b=[];for(var c in this.fields){var d=this.fields[c];switch(null==this.record[d.name]&&(this.record[d.name]=""),d.type){case"int":if(this.record[d.name]&&!w2utils.isInt(this.record[d.name])){var e={field:d,error:"Not an integer"};b.push(e),a&&$(d.el).w2tag(e.error,{"class":"w2ui-error"})}break;case"float":if(this.record[d.name]&&!w2utils.isFloat(this.record[d.name])){var e={field:d,error:"Not a float number"};b.push(e),a&&$(d.el).w2tag(e.error,{"class":"w2ui-error"})}break;case"money":if(this.record[d.name]&&!w2utils.isMoney(this.record[d.name])){var e={field:d,error:"Not in money format"};b.push(e),a&&$(d.el).w2tag(e.error,{"class":"w2ui-error"})}break;case"hex":if(this.record[d.name]&&!w2utils.isHex(this.record[d.name])){var e={field:d,error:"Not a hex number"};b.push(e),a&&$(d.el).w2tag(e,{"class":"w2ui-error"})}break;case"email":if(this.record[d.name]&&!w2utils.isEmail(this.record[d.name])){var e={field:d,error:"Not a valid email"};b.push(e),a&&$(d.el).w2tag(e.error,{"class":"w2ui-error"})}break;case"checkbox":this.record[d.name]=1==this.record[d.name]?1:0;break;case"date":if(this.record[d.name]&&!w2utils.isDate(this.record[d.name])){var e={field:d,error:"Not a valid date (mm/dd/yyyy)"};b.push(e),a&&$(d.el).w2tag(e.error,{"class":"w2ui-error"})}break;case"list":case"enum":var f=$(d.el).data("selected");switch($.isArray(f)||(f=[]),f.length){case 0:this.record[d.name]="";break;case 1:this.record[d.name]=f[0].id;break;default:this.record[d.name]=[];for(var g in f)this.record[d.name].push(f[g].id)}}if(d.required&&!this.record[d.name]){var e={field:d,error:"Required field"};b.push(e),a&&$(d.el).w2tag(e.error,{"class":"w2ui-error"})}}return b},save:function(postData,url,callBack){var obj=this;"function"==typeof postData&&(callBack=postData,url=null,postData=null),"function"==typeof url&&(callBack=url,url=null);var errors=this.validate(!0);if(0!==errors.length)return this.goto(errors[0].field.page),void 0;if((postData===void 0||null==postData)&&(postData={}),(url===void 0||""==url||null==url)&&(url=this.url),""!=url&&null!=url){this.showStatus("Saving...");var params={};params.cmd="save-record",params.name=this.name,params.recid=this.recid,$.extend(params,this.postData),$.extend(params,postData),params.record=$.extend(!0,{},this.record);for(var f in this.fields){var field=this.fields[f];switch((field.type+"").toLowerCase()){case"date":params.record[field.name]=w2utils.formatDate(params.record[field.name],"yyyy-mm-dd")}}var eventData=this.trigger({phase:"before",type:"submit",target:this.name,url:url,postData:params});if(eventData.stop===!0)return"function"==typeof callBack&&callBack(),!1;if(this.save_xhr)try{this.save_xhr.abort()}catch(e){}this.save_xhr=$.ajax({type:"POST",url:url+(url.indexOf("?")>-1?"&":"?")+"t="+(new Date).getTime(),data:($.param(eventData.postData,!1)+"").replace(/%5B/g,"[").replace(/%5D/g,"]"),dataType:"text",complete:function(xhr,status){obj.hideStatus();var eventData=obj.trigger({phase:"before",target:obj.name,type:"save",data:xhr.responseText,xhr:xhr,status:status});if(eventData.stop===!0)return"function"==typeof callBack&&callBack(),!1;if(403==xhr.status)return document.location="login.html",void 0;try{if(eventData.data!==void 0&&""!=eventData.data&&$.parseJSON(eventData.data)!==!1){var data="data = "+eventData.data,data=eval(data);"success"!=data.status?console.log("ERROR: "+data.message):obj.original=$.extend({},obj.record)}}catch(e){var data={};data.status="error",data.message="Server did not return JSON structure."}obj.trigger($.extend(eventData,{phase:"after"})),obj.refresh(),"function"==typeof callBack&&callBack(data)}}),this.trigger($.extend(eventData,{phase:"after"}))}},showStatus:function(){},hideStatus:function(){},doAction:function(a,b){var c=this.trigger({phase:"before",target:a,type:"action",event:b});return c.stop===!0?!1:("function"==typeof this.actions[a]&&this.actions[a].call(this,b),this.trigger($.extend(c,{phase:"after"})),void 0)},resize:function(a,b){var c=this.trigger({phase:"before",target:this.name,type:"resize",width:a,height:b});return c.stop===!0?!1:(this.trigger($.extend(c,{phase:"after"})),void 0)},"goto":function(a){a!==void 0&&(this.page=a),this.refresh()},refresh:function(){var a=this,b=this.trigger({phase:"before",target:this.name,type:"refresh",page:this.page});if(b.stop===!0)return!1;$(this.box).find(".w2ui-page").hide(),$(this.box).find(".w2ui-page.page-"+this.page).show(),"object"==typeof this.tabs&&"function"==typeof this.tabs.refresh?($("#form_"+this.name+"_tabs").show(),this.tabs.active=this.tabs.tabs[this.page].id,this.tabs.refresh()):$("#form_"+this.name+"_tabs").hide();for(var c in this.fields){var d=this.fields[c];if(d.el=$(this.box).find('[name="'+d.name+'"]')[0],d.el===void 0)return console.log('ERROR: Cannot associate field "'+d.name+'" with html control. Make sure html control exists with the same name.'),void 0;d.el.id=d.name,$(d.el).off("change").on("change",function(){var b=this.value,c=a.record[this.name]?a.record[this.name]:"";if($(this).data("selected")){var d=$(this).data("selected"),e=a.get(this.name).selected,b=[],c=[];if($.isArray(d))for(var f in d)b[f]=$.extend(!0,{},d[f]);if($.isArray(e))for(var f in e)c[f]=$.extend(!0,{},e[f]);a.get(this.name).selected=b}var g=a.trigger({phase:"before",target:this.name,type:"change",value_new:b,value_previous:c});if(g.stop===!0)return $(this).val(a.record[this.name]),!1;var h=this.value;"checkbox"==this.type&&(h=this.checked?!0:!1),"radio"==this.type&&(h=this.checked?!0:!1),a.record[this.name]=h,a.trigger($.extend(g,{phase:"after"}))}),d.required?$(d.el).parent().addClass("w2ui-required"):$(d.el).parent().removeClass("w2ui-required")}$(this.box).find("button, input[type=button]").each(function(b,c){$(c).off("click").on("click",function(b){var c=this.value;this.name&&(c=this.name),this.id&&(c=this.id),a.doAction(c,b)})});for(var c in this.fields){var d=this.fields[c],e=this.record[d.name]!==void 0?this.record[d.name]:"";switch((d.type+"").toLowerCase()){case"email":case"text":d.el.value=e;break;case"date":d.el.value=w2utils.formatDate(e,"mm/dd/yyyy"),this.record[d.name]=d.el.value,$(d.el).w2field("date");break;case"int":d.el.value=e,$(d.el).w2field("int");break;case"float":d.el.value=e,$(d.el).w2field("float");break;case"money":d.el.value=e,$(d.el).w2field("money");break;case"hex":d.el.value=e,$(d.el).w2field("hex");break;case"alphanumeric":d.el.value=e,$(d.el).w2field("alphaNumeric");break;case"checkbox":1==this.record[d.name]||1==this.record[d.name]||"t"==this.record[d.name]?$(d.el).attr("checked",!0):$(d.el).removeAttr("checked");break;case"password":d.el.value=e;break;case"list":d.options.max=1,d.options.showAll=!0;case"enum":if(d.options===void 0||d.options.url===void 0&&d.options.items===void 0){console.log("ERROR: (w2form."+a.name+") the field "+d.name+" defined as enum but not field.options.url or field.options.items provided.");break}var f=e;d.selected&&(f=d.selected),$(d.el).w2field($.extend({},d.options,{type:"enum",selected:f}));break;default:console.log('ERROR: field type "'+d.type+'" is not recognized.')}}this.trigger($.extend(b,{phase:"after"}))},render:function(a){var b=this.trigger({phase:"before",target:this.name,type:"render",box:a!==void 0?a:this.box});if(b.stop===!0)return!1;a!==void 0&&(this.box=a);var c='<div id="form_'+this.name+'_tabs" class="w2ui-form-tabs"></div>'+this.form_html;$(this.box).html(c).addClass("w2ui-reset w2ui-form"),$(this.box).length>0&&($(this.box)[0].style.cssText+=this.style),this.initTabs(),"object"==typeof this.tabs&&"function"==typeof this.tabs.render&&this.tabs.render($("#form_"+this.name+"_tabs")[0]),this.trigger($.extend(b,{phase:"after"})),""!=this.url&&0!=this.recid?this.request():this.refresh()},destroy:function(){var a=this.trigger({phase:"before",target:this.name,type:"destroy"});return a.stop===!0?!1:("object"==typeof this.tabs&&this.tabs.destroy&&this.tabs.destroy(),$(this.box).html(""),delete w2ui[this.name],this.trigger($.extend(a,{phase:"after"})),void 0)}},$.extend(w2form.prototype,$.w2event)}();